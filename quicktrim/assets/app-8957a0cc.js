(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function $(){}const be=e=>e;function ct(e,t){for(const n in t)e[n]=t[n];return e}function Dt(e){return e()}function _t(){return Object.create(null)}function Q(e){e.forEach(Dt)}function He(e){return typeof e=="function"}function ae(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function rn(e){return Object.keys(e).length===0}function Lt(e,...t){if(e==null)return $;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function qe(e){let t;return Lt(e,n=>t=n)(),t}function B(e,t,n){e.$$.on_destroy.push(Lt(t,n))}function he(e){return e??""}function an(e,t,n){return e.set(n),t}function vt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const jt=typeof window<"u";let Ye=jt?()=>window.performance.now():()=>Date.now(),pt=jt?e=>requestAnimationFrame(e):$;const Se=new Set;function Ft(e){Se.forEach(t=>{t.c(e)||(Se.delete(t),t.f())}),Se.size!==0&&pt(Ft)}function Be(e){let t;return Se.size===0&&pt(Ft),{promise:new Promise(n=>{Se.add(t={c:e,f:n})}),abort(){Se.delete(t)}}}function w(e,t){e.appendChild(t)}function $t(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function cn(e){const t=q("style");return fn($t(e),t),t.sheet}function fn(e,t){return w(e.head||e,t),t.sheet}function x(e,t,n){e.insertBefore(t,n||null)}function H(e){e.parentNode&&e.parentNode.removeChild(e)}function Ut(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function q(e){return document.createElement(e)}function se(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function oe(e){return document.createTextNode(e)}function L(){return oe(" ")}function Ve(){return oe("")}function P(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function un(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ot(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function dn(e){return Array.from(e.childNodes)}function Fe(e,t){t=""+t,e.data!==t&&(e.data=t)}function pn(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Pt(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Y(e,t,n){e.classList[n?"add":"remove"](t)}function Rt(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,i,t),s}class hn{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=se(n.nodeName):this.e=q(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)x(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(H)}}function bt(e,t){return new e(t)}const Je=new Map;let et=0;function mn(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function gn(e,t){const n={stylesheet:cn(t),rules:{}};return Je.set(e,n),n}function We(e,t,n,i,s,o,r,l=0){const a=16.666/i;let c=`{
`;for(let g=0;g<=1;g+=a){const y=t+(n-t)*o(g);c+=g*100+`%{${r(y,1-y)}}
`}const f=c+`100% {${r(n,1-n)}}
}`,d=`__svelte_${mn(f)}_${l}`,u=$t(e),{stylesheet:p,rules:h}=Je.get(u)||gn(u,e);h[d]||(h[d]=!0,p.insertRule(`@keyframes ${d} ${f}`,p.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${d} ${i}ms linear ${s}ms 1 both`,et+=1,d}function ze(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?o=>o.indexOf(t)<0:o=>o.indexOf("__svelte")===-1),s=n.length-i.length;s&&(e.style.animation=i.join(", "),et-=s,et||_n())}function _n(){pt(()=>{et||(Je.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&H(t)}),Je.clear())})}function vn(e,t,n,i){if(!t)return $;const s=e.getBoundingClientRect();if(t.left===s.left&&t.right===s.right&&t.top===s.top&&t.bottom===s.bottom)return $;const{delay:o=0,duration:r=300,easing:l=be,start:a=Ye()+o,end:c=a+r,tick:f=$,css:d}=n(e,{from:t,to:s},i);let u=!0,p=!1,h;function m(){d&&(h=We(e,0,1,r,o,l,d)),o||(p=!0)}function g(){d&&ze(e,h),u=!1}return Be(y=>{if(!p&&y>=a&&(p=!0),p&&y>=c&&(f(1,0),g()),!u)return!1;if(p){const v=y-a,C=0+1*l(v/r);f(C,1-C)}return!0}),m(),f(0,1),g}function bn(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,s=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,Wt(e,s)}}function Wt(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform;e.style.transform=`${s} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let Xe;function Ue(e){Xe=e}function nt(){if(!Xe)throw new Error("Function called outside component initialization");return Xe}function Ke(e){nt().$$.on_mount.push(e)}function yn(e){nt().$$.after_update.push(e)}function st(e){nt().$$.on_destroy.push(e)}function ht(){const e=nt();return(t,n,{cancelable:i=!1}={})=>{const s=e.$$.callbacks[t];if(s){const o=Rt(t,n,{cancelable:i});return s.slice().forEach(r=>{r.call(e,o)}),!o.defaultPrevented}return!0}}function wn(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const Ce=[],fe=[];let Te=[];const ft=[],zt=Promise.resolve();let ut=!1;function Xt(){ut||(ut=!0,zt.then(Yt))}function kn(){return Xt(),zt}function re(e){Te.push(e)}function En(e){ft.push(e)}const lt=new Set;let Me=0;function Yt(){if(Me!==0)return;const e=Xe;do{try{for(;Me<Ce.length;){const t=Ce[Me];Me++,Ue(t),Mn(t.$$)}}catch(t){throw Ce.length=0,Me=0,t}for(Ue(null),Ce.length=0,Me=0;fe.length;)fe.pop()();for(let t=0;t<Te.length;t+=1){const n=Te[t];lt.has(n)||(lt.add(n),n())}Te.length=0}while(Ce.length);for(;ft.length;)ft.pop()();ut=!1,lt.clear(),Ue(e)}function Mn(e){if(e.fragment!==null){e.update(),Q(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function An(e){const t=[],n=[];Te.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),Te=t}let je;function mt(){return je||(je=Promise.resolve(),je.then(()=>{je=null})),je}function ve(e,t,n){e.dispatchEvent(Rt(`${t?"intro":"outro"}${n}`))}const Ge=new Set;let le;function me(){le={r:0,c:[],p:le}}function ge(){le.r||Q(le.c),le=le.p}function j(e,t){e&&e.i&&(Ge.delete(e),e.i(t))}function W(e,t,n,i){if(e&&e.o){if(Ge.has(e))return;Ge.add(e),le.c.push(()=>{Ge.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const gt={duration:0};function Cn(e,t,n){const i={direction:"in"};let s=t(e,n,i),o=!1,r,l,a=0;function c(){r&&ze(e,r)}function f(){const{delay:u=0,duration:p=300,easing:h=be,tick:m=$,css:g}=s||gt;g&&(r=We(e,0,1,p,u,h,g,a++)),m(0,1);const y=Ye()+u,v=y+p;l&&l.abort(),o=!0,re(()=>ve(e,!0,"start")),l=Be(C=>{if(o){if(C>=v)return m(1,0),ve(e,!0,"end"),c(),o=!1;if(C>=y){const k=h((C-y)/p);m(k,1-k)}}return o})}let d=!1;return{start(){d||(d=!0,ze(e),He(s)?(s=s(i),mt().then(f)):f())},invalidate(){d=!1},end(){o&&(c(),o=!1)}}}function qn(e,t,n){const i={direction:"out"};let s=t(e,n,i),o=!0,r;const l=le;l.r+=1;function a(){const{delay:c=0,duration:f=300,easing:d=be,tick:u=$,css:p}=s||gt;p&&(r=We(e,1,0,f,c,d,p));const h=Ye()+c,m=h+f;re(()=>ve(e,!1,"start")),Be(g=>{if(o){if(g>=m)return u(0,1),ve(e,!1,"end"),--l.r||Q(l.c),!1;if(g>=h){const y=d((g-h)/f);u(1-y,y)}}return o})}return He(s)?mt().then(()=>{s=s(i),a()}):a(),{end(c){c&&s.tick&&s.tick(1,0),o&&(r&&ze(e,r),o=!1)}}}function Qe(e,t,n,i){const s={direction:"both"};let o=t(e,n,s),r=i?0:1,l=null,a=null,c=null;function f(){c&&ze(e,c)}function d(p,h){const m=p.b-r;return h*=Math.abs(m),{a:r,b:p.b,d:m,duration:h,start:p.start,end:p.start+h,group:p.group}}function u(p){const{delay:h=0,duration:m=300,easing:g=be,tick:y=$,css:v}=o||gt,C={start:Ye()+h,b:p};p||(C.group=le,le.r+=1),l||a?a=C:(v&&(f(),c=We(e,r,p,m,h,g,v)),p&&y(0,1),l=d(C,m),re(()=>ve(e,p,"start")),Be(k=>{if(a&&k>a.start&&(l=d(a,m),a=null,ve(e,l.b,"start"),v&&(f(),c=We(e,r,l.b,l.duration,0,g,o.css))),l){if(k>=l.end)y(r=l.b,1-r),ve(e,l.b,"end"),a||(l.b?f():--l.group.r||Q(l.group.c)),l=null;else if(k>=l.start){const E=k-l.start;r=l.a+l.d*g(E/l.duration),y(r,1-r)}}return!!(l||a)}))}return{run(p){He(o)?mt().then(()=>{o=o(s),u(p)}):u(p)},end(){f(),l=a=null}}}function Sn(e,t){W(e,1,1,()=>{t.delete(e.key)})}function Tn(e,t){e.f(),Sn(e,t)}function In(e,t,n,i,s,o,r,l,a,c,f,d){let u=e.length,p=o.length,h=u;const m={};for(;h--;)m[e[h].key]=h;const g=[],y=new Map,v=new Map,C=[];for(h=p;h--;){const T=d(s,o,h),N=n(T);let z=r.get(N);z?i&&C.push(()=>z.p(T,t)):(z=c(N,T),z.c()),y.set(N,g[h]=z),N in m&&v.set(N,Math.abs(h-m[N]))}const k=new Set,E=new Set;function M(T){j(T,1),T.m(l,f),r.set(T.key,T),f=T.first,p--}for(;u&&p;){const T=g[p-1],N=e[u-1],z=T.key,G=N.key;T===N?(f=T.first,u--,p--):y.has(G)?!r.has(z)||k.has(z)?M(T):E.has(G)?u--:v.get(z)>v.get(G)?(E.add(z),M(T)):(k.add(G),u--):(a(N,r),u--)}for(;u--;){const T=e[u];y.has(T.key)||a(T,r)}for(;p;)M(g[p-1]);return Q(C),g}function On(e,t){const n={},i={},s={$$scope:1};let o=e.length;for(;o--;){const r=e[o],l=t[o];if(l){for(const a in r)a in l||(i[a]=1);for(const a in l)s[a]||(n[a]=l[a],s[a]=1);e[o]=l}else for(const a in r)s[a]=1}for(const r in i)r in n||(n[r]=void 0);return n}function Hn(e){return typeof e=="object"&&e!==null?e:{}}const Nn=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...Nn];function xn(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function ie(e){e&&e.c()}function ee(e,t,n,i){const{fragment:s,after_update:o}=e.$$;s&&s.m(t,n),i||re(()=>{const r=e.$$.on_mount.map(Dt).filter(He);e.$$.on_destroy?e.$$.on_destroy.push(...r):Q(r),e.$$.on_mount=[]}),o.forEach(re)}function te(e,t){const n=e.$$;n.fragment!==null&&(An(n.after_update),Q(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Dn(e,t){e.$$.dirty[0]===-1&&(Ce.push(e),Xt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ue(e,t,n,i,s,o,r,l=[-1]){const a=Xe;Ue(e);const c=e.$$={fragment:null,ctx:[],props:o,update:$,not_equal:s,bound:_t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:_t(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};r&&r(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(d,u,...p)=>{const h=p.length?p[0]:u;return c.ctx&&s(c.ctx[d],c.ctx[d]=h)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](h),f&&Dn(e,d)),u}):[],c.update(),f=!0,Q(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const d=dn(t.target);c.fragment&&c.fragment.l(d),d.forEach(H)}else c.fragment&&c.fragment.c();t.intro&&j(e.$$.fragment),ee(e,t.target,t.anchor,t.customElement),Yt()}Ue(a)}class de{$destroy(){te(this,1),this.$destroy=$}$on(t,n){if(!He(n))return $;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!rn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Bt(e){const t=e-1;return t*t*t+1}function $e(e,{delay:t=0,duration:n=400,easing:i=be}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:o=>`opacity: ${o*s}`}}function Ln(e,{delay:t=0,duration:n=400,easing:i=Bt,x:s=0,y:o=0,opacity:r=0}={}){const l=getComputedStyle(e),a=+l.opacity,c=l.transform==="none"?"":l.transform,f=a*(1-r),[d,u]=vt(s),[p,h]=vt(o);return{delay:t,duration:n,easing:i,css:(m,g)=>`
			transform: ${c} translate(${(1-m)*d}${u}, ${(1-m)*p}${h});
			opacity: ${a-f*g}`}}function jn(e,{from:t,to:n},i={}){const s=getComputedStyle(e),o=s.transform==="none"?"":s.transform,[r,l]=s.transformOrigin.split(" ").map(parseFloat),a=t.left+t.width*r/n.width-(n.left+r),c=t.top+t.height*l/n.height-(n.top+l),{delay:f=0,duration:d=p=>Math.sqrt(p)*120,easing:u=Bt}=i;return{delay:f,duration:He(d)?d(Math.sqrt(a*a+c*c)):d,easing:u,css:(p,h)=>{const m=h*a,g=h*c,y=p+h*t.width/n.width,v=p+h*t.height/n.height;return`transform: ${o} translate(${m}px, ${g}px) scale(${y}, ${v});`}}}const Ae=[];function ne(e,t=$){let n;const i=new Set;function s(l){if(ae(e,l)&&(e=l,n)){const a=!Ae.length;for(const c of i)c[1](),Ae.push(c,e);if(a){for(let c=0;c<Ae.length;c+=2)Ae[c][0](Ae[c+1]);Ae.length=0}}}function o(l){s(l(e))}function r(l,a=$){const c=[l,a];return i.add(c),i.size===1&&(n=t(s)||$),l(e),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:r}}const Fn={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function $n(){const{subscribe:e,update:t}=ne(new Array),n={};let i=0;function s(c){return c instanceof Object}function o(c="default",f={}){return n[c]=f,n}function r(c,f){const d={target:"default",...s(c)?c:{...f,msg:c}},u=n[d.target]||{},p={...Fn,...u,...d,theme:{...u.theme,...d.theme},classes:[...u.classes||[],...d.classes||[]],id:++i};return t(h=>p.reversed?[...h,p]:[p,...h]),i}function l(c){t(f=>{if(!f.length||c===0)return[];if(typeof c=="function")return f.filter(u=>c(u));if(s(c))return f.filter(u=>u.target!==c.target);const d=c||Math.max(...f.map(u=>u.id));return f.filter(u=>u.id!==d)})}function a(c,f){const d=s(c)?c:{...f,id:c};t(u=>{const p=u.findIndex(h=>h.id===d.id);return p>-1&&(u[p]={...u[p],...d}),u})}return{subscribe:e,push:r,pop:l,set:a,_init:o}}const tt=$n();function yt(e){return Object.prototype.toString.call(e)==="[object Date]"}function dt(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((s,o)=>dt(e[o],s));return s=>i.map(o=>o(s))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(yt(e)&&yt(t)){e=e.getTime(),t=t.getTime();const o=t-e;return r=>new Date(e+r*o)}const i=Object.keys(t),s={};return i.forEach(o=>{s[o]=dt(e[o],t[o])}),o=>{const r={};return i.forEach(l=>{r[l]=s[l](o)}),r}}if(n==="number"){const i=t-e;return s=>e+s*i}throw new Error(`Cannot interpolate ${n} values`)}function Un(e,t={}){const n=ne(e);let i,s=e;function o(r,l){if(e==null)return n.set(e=r),Promise.resolve();s=r;let a=i,c=!1,{delay:f=0,duration:d=400,easing:u=be,interpolate:p=dt}=ct(ct({},t),l);if(d===0)return a&&(a.abort(),a=null),n.set(e=s),Promise.resolve();const h=Ye()+f;let m;return i=Be(g=>{if(g<h)return!0;c||(m=p(e,r),typeof d=="function"&&(d=d(e,r)),c=!0),a&&(a.abort(),a=null);const y=g-h;return y>d?(n.set(e=r),!1):(n.set(e=m(u(y/d))),!0)}),i.promise}return{set:o,update:(r,l)=>o(r(s,e),l),subscribe:n.subscribe}}function Pn(e){let t,n=e[0].msg+"",i;return{c(){t=new hn(!1),i=Ve(),t.a=i},m(s,o){t.m(n,s,o),x(s,i,o)},p(s,o){o&1&&n!==(n=s[0].msg+"")&&t.p(n)},i:$,o:$,d(s){s&&H(i),s&&t.d()}}}function Rn(e){let t,n,i;const s=[e[2]];var o=e[0].component.src;function r(l){let a={};for(let c=0;c<s.length;c+=1)a=ct(a,s[c]);return{props:a}}return o&&(t=bt(o,r())),{c(){t&&ie(t.$$.fragment),n=Ve()},m(l,a){t&&ee(t,l,a),x(l,n,a),i=!0},p(l,a){const c=a&4?On(s,[Hn(l[2])]):{};if(a&1&&o!==(o=l[0].component.src)){if(t){me();const f=t;W(f.$$.fragment,1,0,()=>{te(f,1)}),ge()}o?(t=bt(o,r()),ie(t.$$.fragment),j(t.$$.fragment,1),ee(t,n.parentNode,n)):t=null}else o&&t.$set(c)},i(l){i||(t&&j(t.$$.fragment,l),i=!0)},o(l){t&&W(t.$$.fragment,l),i=!1},d(l){l&&H(n),t&&te(t,l)}}}function wt(e){let t,n,i;return{c(){t=q("div"),_(t,"class","_toastBtn pe svelte-95rq8t"),_(t,"role","button"),_(t,"tabindex","0")},m(s,o){x(s,t,o),n||(i=[P(t,"click",e[4]),P(t,"keydown",e[8])],n=!0)},p:$,d(s){s&&H(t),n=!1,Q(i)}}}function Wn(e){let t,n,i,s,o,r,l,a,c,f;const d=[Rn,Pn],u=[];function p(m,g){return m[0].component?0:1}i=p(e),s=u[i]=d[i](e);let h=e[0].dismissable&&wt(e);return{c(){t=q("div"),n=q("div"),s.c(),o=L(),h&&h.c(),r=L(),l=q("progress"),_(n,"role","status"),_(n,"class","_toastMsg svelte-95rq8t"),Y(n,"pe",e[0].component),_(l,"class","_toastBar svelte-95rq8t"),l.value=e[1],_(t,"class","_toastItem svelte-95rq8t"),Y(t,"pe",e[0].pausable)},m(m,g){x(m,t,g),w(t,n),u[i].m(n,null),w(t,o),h&&h.m(t,null),w(t,r),w(t,l),a=!0,c||(f=[P(t,"mouseenter",e[9]),P(t,"mouseleave",e[6])],c=!0)},p(m,[g]){let y=i;i=p(m),i===y?u[i].p(m,g):(me(),W(u[y],1,1,()=>{u[y]=null}),ge(),s=u[i],s?s.p(m,g):(s=u[i]=d[i](m),s.c()),j(s,1),s.m(n,null)),(!a||g&1)&&Y(n,"pe",m[0].component),m[0].dismissable?h?h.p(m,g):(h=wt(m),h.c(),h.m(t,r)):h&&(h.d(1),h=null),(!a||g&2)&&(l.value=m[1]),(!a||g&1)&&Y(t,"pe",m[0].pausable)},i(m){a||(j(s),a=!0)},o(m){W(s),a=!1},d(m){m&&H(t),u[i].d(),h&&h.d(),c=!1,Q(f)}}}function rt(e,t="undefined"){return typeof e===t}function zn(e,t,n){let i,{item:s}=t,o=s.initial,r=o,l=!1,a={},c;const f=Un(s.initial,{duration:s.duration,easing:be});B(e,f,v=>n(1,i=v));function d(){tt.pop(s.id)}function u(){(i===1||i===0)&&d()}function p(){!l&&i!==o&&(f.set(i,{duration:0}),l=!0)}function h(){if(l){const v=s.duration,C=v-v*((i-r)/(o-r));f.set(o,{duration:C}).then(u),l=!1}}function m(v=document){if(rt(v.hidden))return;const C=()=>v.hidden?p():h(),k="visibilitychange";v.addEventListener(k,C),c=()=>v.removeEventListener(k,C),C()}Ke(m),st(()=>{rt(s.onpop,"function")&&s.onpop(s.id),c&&c()});const g=v=>{v instanceof KeyboardEvent&&["Enter"," "].includes(v.key)&&d()},y=()=>{s.pausable&&p()};return e.$$set=v=>{"item"in v&&n(0,s=v.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(rt(s.progress)||n(0,s.next=s.progress,s)),e.$$.dirty&131&&o!==s.next&&(n(7,o=s.next),r=i,l=!1,f.set(o).then(u)),e.$$.dirty&1&&s.component){const{props:v={},sendIdTo:C}=s.component;n(2,a={...v,...C&&{[C]:s.id}})}},[s,i,a,f,d,p,h,o,g,y]}class Xn extends de{constructor(t){super(),ue(this,t,zn,Wn,ae,{item:0})}}function kt(e,t,n){const i=e.slice();return i[4]=t[n],i}function Et(e,t){let n,i,s,o,r,l,a,c,f=$,d;return i=new Xn({props:{item:t[4]}}),{key:e,first:null,c(){var u;n=q("li"),ie(i.$$.fragment),s=L(),_(n,"class",o=he((u=t[4].classes)==null?void 0:u.join(" "))+" svelte-1u812xz"),_(n,"style",r=Mt(t[4].theme)),this.first=n},m(u,p){x(u,n,p),ee(i,n,null),w(n,s),d=!0},p(u,p){var m;t=u;const h={};p&1&&(h.item=t[4]),i.$set(h),(!d||p&1&&o!==(o=he((m=t[4].classes)==null?void 0:m.join(" "))+" svelte-1u812xz"))&&_(n,"class",o),(!d||p&1&&r!==(r=Mt(t[4].theme)))&&_(n,"style",r)},r(){c=n.getBoundingClientRect()},f(){bn(n),f(),Wt(n,c)},a(){f(),f=vn(n,c,jn,{duration:200})},i(u){d||(j(i.$$.fragment,u),re(()=>{d&&(a&&a.end(1),l=Cn(n,Ln,t[4].intro),l.start())}),d=!0)},o(u){W(i.$$.fragment,u),l&&l.invalidate(),a=qn(n,$e,{}),d=!1},d(u){u&&H(n),te(i),u&&a&&a.end()}}}function Yn(e){let t,n=[],i=new Map,s,o=e[0];const r=l=>l[4].id;for(let l=0;l<o.length;l+=1){let a=kt(e,o,l),c=r(a);i.set(c,n[l]=Et(c,a))}return{c(){t=q("ul");for(let l=0;l<n.length;l+=1)n[l].c();_(t,"class","_toastContainer svelte-1u812xz")},m(l,a){x(l,t,a);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);s=!0},p(l,[a]){if(a&1){o=l[0],me();for(let c=0;c<n.length;c+=1)n[c].r();n=In(n,a,r,1,l,o,i,t,Tn,Et,null,kt);for(let c=0;c<n.length;c+=1)n[c].a();ge()}},i(l){if(!s){for(let a=0;a<o.length;a+=1)j(n[a]);s=!0}},o(l){for(let a=0;a<n.length;a+=1)W(n[a]);s=!1},d(l){l&&H(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Mt(e){return e?Object.keys(e).reduce((t,n)=>`${t}${n}:${e[n]};`,""):void 0}function Bn(e,t,n){let i;B(e,tt,l=>n(3,i=l));let{options:s={}}=t,{target:o="default"}=t,r=[];return e.$$set=l=>{"options"in l&&n(1,s=l.options),"target"in l&&n(2,o=l.target)},e.$$.update=()=>{e.$$.dirty&6&&tt._init(o,s),e.$$.dirty&12&&n(0,r=i.filter(l=>l.target===o))},[r,s,o,i]}class Vn extends de{constructor(t){super(),ue(this,t,Bn,Yn,ae,{options:1,target:2})}}const Ie=ne([]),R=ne({triminprogress:!1,isDefined:!1,cancelTrim:!1,index:0,x:0,y:0,width:0,height:0,mode:"whole"}),Pe=ne(!1),Re=ne(!1);ne(null);const Oe=ne(!1),at=ne(!1),At=ne(null),Kn=ne(""),Qn=ne(null);function Zn(e){let t,n,i,s,o,r,l,a,c,f,d,u,p,h,m,g,y,v,C,k,E,M,T;return{c(){t=q("div"),i=L(),s=q("div"),o=q("div"),r=L(),l=q("h3"),l.textContent="An extension to efficiently trim, save and copy to the clipboard images opened directly in the browser window.",a=L(),c=q("p"),c.textContent="Works with PNG, WebP and JPEG formats.",f=L(),d=q("div"),d.innerHTML=`<div class="icon-group svelte-1sg77sf"><div class="icon-row svelte-1sg77sf"><div class="icon-unit svelte-1sg77sf"><div class="icon-mode-whole svelte-1sg77sf"></div> 
          <label class="svelte-1sg77sf"><span class="svelte-1sg77sf">Whole</span></label></div> 
        <div class="icon-unit svelte-1sg77sf"><div class="icon-mode-quadrant svelte-1sg77sf"></div> 
          <label class="svelte-1sg77sf"><span class="svelte-1sg77sf">Quadrant</span></label></div></div></div> 
    <div class="help-text svelte-1sg77sf"><h4 class="svelte-1sg77sf">Modes</h4> 
      <p class="svelte-1sg77sf">Whole mode focuses on the entire image. Quadrant mode splits the image into four equal quadrants, handy for quickly processing 2x2 image grids from sources like Midjourney. Controls appear in each quadrant when the mouse is hovered over them.</p></div> 
    <div class="icon-group svelte-1sg77sf"><div class="icon-group svelte-1sg77sf"><div class="icon-row svelte-1sg77sf"><div class="icon-unit svelte-1sg77sf"><div class="icon-expand svelte-1sg77sf"></div> 
            <label class="svelte-1sg77sf"><span class="svelte-1sg77sf">Expand</span></label></div> 
          <div class="icon-unit svelte-1sg77sf"><div class="icon-shrink svelte-1sg77sf"></div> 
            <label class="svelte-1sg77sf"><span class="svelte-1sg77sf">Shrink</span></label></div></div></div></div> 
    <div class="help-text svelte-1sg77sf"><h4 class="svelte-1sg77sf">Expand/Shrink</h4> 
      <p class="svelte-1sg77sf">In quadrant mode, Expand the quadrant full screen, or shrink to edit all 4 quadrants. The trim tool is only available when a quadrant is expanded.</p></div> 
    <div class="icon-group svelte-1sg77sf"><div class="icon-unit svelte-1sg77sf"><div class="icon-triminactive svelte-1sg77sf"></div></div></div> 

    <div class="help-text svelte-1sg77sf"><h4 class="svelte-1sg77sf">Trim</h4> 
      <p class="svelte-1sg77sf">Draw out a rectangular trim area to save or copy part of the image. Use resize handles to adjust the area, or click and drag within the trim area to move it. Clicking outside the trim area resets and deactivates trimming.</p></div> 
    <div class="icon-group svelte-1sg77sf"><div class="icon-unit svelte-1sg77sf"><div class="icon-clipboard svelte-1sg77sf"></div></div></div> 
    <div class="help-text svelte-1sg77sf"><h4 class="svelte-1sg77sf">Copy</h4> 
      <p class="svelte-1sg77sf">Copies the image to the clipboard.</p></div> 
    <div class="icon-group svelte-1sg77sf"><div class="icon-unit svelte-1sg77sf"><div class="icon-download svelte-1sg77sf"></div></div></div> 
    <div class="help-text svelte-1sg77sf"><h4 class="svelte-1sg77sf">Download</h4> 
      <p class="svelte-1sg77sf">Saves the image (in the originating file format) to the browser download directory.</p></div> 
    <div class="icon-group svelte-1sg77sf"><div class="icon-unit svelte-1sg77sf"></div></div> 
    <div class="help-text svelte-1sg77sf"><h4 class="svelte-1sg77sf">Filename</h4> 
      <p class="svelte-1sg77sf">Press enter Click on filename to edit. Note that quadrants are automatically suffixed with &quot;_q1,&quot; &quot;_q2,&quot; etc.</p></div> 
    <div class="svelte-1sg77sf"></div> 
    <div class="help-text svelte-1sg77sf"><h4 class="sm-center gap-top svelte-1sg77sf">Keyboard Shortcuts</h4> 
      <ul class="nobullets shortcut-list svelte-1sg77sf"><li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">m</span> Toggle between whole and quadrant modes</li> 
        <li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">f</span> Toggle fullscreen mode (in quadrant mode)</li> 
        <li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">t</span> Activate trim tool</li> 
        <li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">c</span> Copy full image or trim area to clipboard</li> 
        <li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">d</span> Download full image or trim area.</li> 
        <li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">Shift</span>+ <span class="keycap svelte-1sg77sf">D</span> Download all quadrants (in quadrant mode).</li> 
        <li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">Esc</span> Deactivate trim tool</li> 
        <li class="svelte-1sg77sf"><span class="keycap svelte-1sg77sf">Enter</span> Edit filename</li></ul></div>`,u=L(),p=q("p"),h=oe("@"),m=oe(e[1]),g=L(),y=q("a"),y.textContent="Sideways Design",v=L(),C=q("div"),_(t,"class","help-page-overlay svelte-1sg77sf"),_(o,"class","wordmark svelte-1sg77sf"),_(l,"class","svelte-1sg77sf"),_(c,"class","center svelte-1sg77sf"),_(d,"class","help-grid svelte-1sg77sf"),_(y,"href","https://sidewaysdesign.com/"),_(y,"class","svelte-1sg77sf"),_(p,"class","year svelte-1sg77sf"),_(C,"class","icon-close svelte-1sg77sf"),_(s,"class","help-page-wrapper svelte-1sg77sf")},m(N,z){x(N,t,z),x(N,i,z),x(N,s,z),w(s,o),w(s,r),w(s,l),w(s,a),w(s,c),w(s,f),w(s,d),w(s,u),w(s,p),w(p,h),w(p,m),w(p,g),w(p,y),w(s,v),w(s,C),E=!0,M||(T=[P(t,"click",e[3]),P(C,"click",e[4])],M=!0)},p:$,i(N){E||(re(()=>{E&&(n||(n=Qe(t,$e,{duration:250},!0)),n.run(1))}),re(()=>{E&&(k||(k=Qe(s,$e,{duration:375},!0)),k.run(1))}),E=!0)},o(N){n||(n=Qe(t,$e,{duration:250},!1)),n.run(0),k||(k=Qe(s,$e,{duration:375},!1)),k.run(0),E=!1},d(N){N&&H(t),N&&n&&n.end(),N&&H(i),N&&H(s),N&&k&&k.end(),M=!1,Q(T)}}}function Gn(e,t,n){let{active:i}=t,{popupOpen:s}=t;const o=new Date().getFullYear();Ke(()=>document.addEventListener("keydown",r)),st(()=>document.removeEventListener("keydown",r));function r(c){const d={Escape:()=>n(0,s=!1)}[c.key];d&&d(c)}const l=()=>n(0,s=!1),a=()=>n(0,s=!1);return e.$$set=c=>{"active"in c&&n(2,i=c.active),"popupOpen"in c&&n(0,s=c.popupOpen)},[s,o,i,l,a]}class Jn extends de{constructor(t){super(),ue(this,t,Gn,Zn,ae,{active:2,popupOpen:0})}}function Ct(e){let t,n,i;function s(r){e[10](r)}let o={};return e[3]!==void 0&&(o.popupOpen=e[3]),t=new Jn({props:o}),fe.push(()=>xn(t,"popupOpen",s)),{c(){ie(t.$$.fragment)},m(r,l){ee(t,r,l),i=!0},p(r,l){const a={};!n&&l&8&&(n=!0,a.popupOpen=r[3],En(()=>n=!1)),t.$set(a)},i(r){i||(j(t.$$.fragment,r),i=!0)},o(r){W(t.$$.fragment,r),i=!1},d(r){te(t,r)}}}function es(e){let t,n,i,s,o,r,l,a,c,f,d,u,p,h,m,g,y,v,C,k=e[3]&&Ct(e);return{c(){t=q("div"),n=q("div"),i=q("div"),s=L(),o=q("div"),o.innerHTML=`<div class="wordmark svelte-15soh4d"></div> 
      <p class="byline svelte-15soh4d"><a href="https://sidewaysdesign.com" target="blank" class="svelte-15soh4d">by Sideways Design</a></p>`,r=L(),l=q("div"),a=L(),c=q("div"),f=q("div"),f.innerHTML='<span class="tooltip svelte-15soh4d">Whole Image</span>',d=L(),u=q("div"),u.innerHTML='<span class="tooltip svelte-15soh4d">Quadrants</span>',p=L(),h=q("div"),m=L(),k&&k.c(),g=Ve(),_(i,"class","mode-control-hide1 svelte-15soh4d"),_(l,"class","mode-control-info svelte-15soh4d"),_(f,"class","mode-control mode-control-whole svelte-15soh4d"),_(f,"aria-label","Whole Image"),_(f,"tabindex","1"),Y(f,"active",e[1]==="whole"),_(u,"class","mode-control mode-control-quadrant svelte-15soh4d"),_(u,"aria-label","Quadrant"),_(u,"tabindex","0"),Y(u,"active",e[1]==="quadrant"),_(c,"class","mode-control-container svelte-15soh4d"),_(h,"class","mode-control-hide2 svelte-15soh4d"),_(n,"class","mode-control-group svelte-15soh4d"),_(t,"class","mode-control-wrapper svelte-15soh4d"),Y(t,"tucked",e[2]),Y(t,"triminprogress",e[0].triminprogress)},m(E,M){x(E,t,M),w(t,n),w(n,i),w(n,s),w(n,o),w(n,r),w(n,l),w(n,a),w(n,c),w(c,f),w(c,d),w(c,u),w(n,p),w(n,h),x(E,m,M),k&&k.m(E,M),x(E,g,M),y=!0,v||(C=[P(i,"click",e[5]),P(l,"click",e[6]),P(f,"click",e[7]),P(u,"click",e[8]),P(h,"click",e[9])],v=!0)},p(E,[M]){(!y||M&2)&&Y(f,"active",E[1]==="whole"),(!y||M&2)&&Y(u,"active",E[1]==="quadrant"),(!y||M&4)&&Y(t,"tucked",E[2]),(!y||M&1)&&Y(t,"triminprogress",E[0].triminprogress),E[3]?k?(k.p(E,M),M&8&&j(k,1)):(k=Ct(E),k.c(),j(k,1),k.m(g.parentNode,g)):k&&(me(),W(k,1,1,()=>{k=null}),ge())},i(E){y||(j(k),y=!0)},o(E){W(k),y=!1},d(E){E&&H(t),E&&H(m),k&&k.d(E),E&&H(g),v=!1,Q(C)}}}function ts(e,t,n){let i;B(e,R,h=>n(0,i=h));let s,o=!1,r=!1;const l=h=>{h==="quadrant"&&R.update(m=>({...m,index:1,mode:"quadrant"})),h==="whole"&&R.update(m=>({...m,index:0,mode:"whole",expanded:!1}))},a=()=>n(2,o=!0),c=()=>n(3,r=!0),f=()=>l("whole"),d=()=>l("quadrant"),u=()=>n(2,o=!1);function p(h){r=h,n(3,r)}return e.$$.update=()=>{e.$$.dirty&1&&n(1,s=i.mode)},[i,s,o,r,l,a,c,f,d,u,p]}class ns extends de{constructor(t){super(),ue(this,t,ts,es,ae,{})}}const Vt=(e,t)=>{console.log("FUNC toggleFullscreen"),Oe.update(n=>!n),qe(Oe)||Pe.set(!1),t("expandaction")},Kt=()=>{console.log("FUNC toggleTrimming"),Pe.update(e=>!e)},ss=(e,t)=>{console.log("handleDownloadAction",e,qe(R).index),e===qe(R).index&&t("imageaction","download")},is=(e,t)=>{e===qe(R).index&&(console.log("FUNC handleClipboardAction",e,qe(R).index,e!==qe(R).index),t("imageaction","clipboard"))},os=()=>{const e=document.activeElement;return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"||e.tagName==="FORM"||e.contentEditable==="true"};function qt(e,t,n){const i=e.slice();return i[35]=t[n],i}function St(e){let t,n,i,s=Math.floor(e[1].x)+"",o,r,l,a,c=Math.floor(e[1].y)+"",f,d,u,p,h=Math.floor(e[1].width)+"",m,g,y,v,C=Math.floor(e[1].height)+"",k;return{c(){t=q("div"),n=q("p"),i=q("span"),i.textContent="x:",o=oe(s),r=L(),l=q("p"),a=q("span"),a.textContent="y:",f=oe(c),d=L(),u=q("p"),p=q("span"),p.textContent="w:",m=oe(h),g=L(),y=q("p"),v=q("span"),v.textContent="h:",k=oe(C),_(i,"class","svelte-g41pfg"),_(n,"class","svelte-g41pfg"),_(a,"class","svelte-g41pfg"),_(l,"class","svelte-g41pfg"),_(p,"class","svelte-g41pfg"),_(u,"class","svelte-g41pfg"),_(v,"class","svelte-g41pfg"),_(y,"class","svelte-g41pfg"),_(t,"class","trim-stats svelte-g41pfg")},m(E,M){x(E,t,M),w(t,n),w(n,i),w(n,o),w(t,r),w(t,l),w(l,a),w(l,f),w(t,d),w(t,u),w(u,p),w(u,m),w(t,g),w(t,y),w(y,v),w(y,k)},p(E,M){M[0]&2&&s!==(s=Math.floor(E[1].x)+"")&&Fe(o,s),M[0]&2&&c!==(c=Math.floor(E[1].y)+"")&&Fe(f,c),M[0]&2&&h!==(h=Math.floor(E[1].width)+"")&&Fe(m,h),M[0]&2&&C!==(C=Math.floor(E[1].height)+"")&&Fe(k,C)},d(E){E&&H(t)}}}function Tt(e){let t;return{c(){t=se("rect"),_(t,"class","handle svelte-g41pfg"),_(t,"id",e[35].id),_(t,"x","-100"),_(t,"y","-100"),_(t,"width",Ze),_(t,"height",Ze),Pt(t,"cursor",e[35].cursor),_(t,"rx",Ze/2),_(t,"ry",Ze/2)},m(n,i){x(n,t,i)},p:$,d(n){n&&H(t)}}}function ls(e){let t,n,i,s,o,r,l,a,c,f,d,u,p=(e[8]||e[5]||e[7]||e[6])&&St(e),h=e[9],m=[];for(let g=0;g<h.length;g+=1)m[g]=Tt(qt(e,h,g));return{c(){t=q("div"),n=q("div"),p&&p.c(),i=L(),s=se("svg"),o=se("defs"),r=se("rect"),l=se("clipPath"),a=se("use"),c=se("use"),f=se("use"),d=se("path"),u=se("rect");for(let g=0;g<m.length;g+=1)m[g].c();_(n,"class","trim-stats-container svelte-g41pfg"),_(r,"vector-effect","non-scaling-stroke"),_(r,"shape-rendering","geometricPrecision"),_(r,"id","bbox"),_(r,"x","0"),_(r,"y","0"),_(r,"width","0"),_(r,"height","0"),ot(a,"xlink:href","#bbox"),_(l,"id","insideStrokeOnly"),ot(c,"xlink:href","#bbox"),_(c,"stroke-width","2px"),_(c,"stroke","white"),_(c,"fill","none"),_(c,"clip-path","url(#insideStrokeOnly)"),ot(f,"xlink:href","#bbox"),_(f,"stroke-width","2px"),_(f,"stroke-dasharray","2,2"),_(f,"stroke","#777"),_(f,"fill","none"),_(f,"clip-path","url(#insideStrokeOnly)"),_(d,"id",Qt),_(d,"fill","#000"),_(d,"d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z"),_(d,"fill-rule","evenodd"),_(d,"opacity","0.5"),_(u,"id",Zt),_(u,"x","-100"),_(u,"y","-100"),_(u,"width","0"),_(u,"height","0"),Pt(u,"cursor","grab"),_(u,"fill","transparent"),_(s,"width","100%"),_(s,"height","100%"),_(s,"class","inactive svelte-g41pfg"),_(t,"class","trim-stage svelte-g41pfg")},m(g,y){x(g,t,y),w(t,n),p&&p.m(n,null),e[11](n),w(t,i),w(t,s),w(s,o),w(o,r),e[12](r),w(o,l),w(l,a),w(s,c),w(s,f),w(s,d),e[13](d),w(s,u);for(let v=0;v<m.length;v+=1)m[v]&&m[v].m(s,null);e[14](s)},p(g,y){if(g[8]||g[5]||g[7]||g[6]?p?p.p(g,y):(p=St(g),p.c(),p.m(n,null)):p&&(p.d(1),p=null),y[0]&512){h=g[9];let v;for(v=0;v<h.length;v+=1){const C=qt(g,h,v);m[v]?m[v].p(C,y):(m[v]=Tt(C),m[v].c(),m[v].m(s,null))}for(;v<m.length;v+=1)m[v].d(1);m.length=h.length}},i:$,o:$,d(g){g&&H(t),p&&p.d(),e[11](null),e[12](null),e[13](null),Ut(m,g),e[14](null)}}}const Qt="focusOverlay",Zt="movehandle",Ze=14;function rs(e,t,n){let{frameSpecs:i}=t,s,o,r,l,a,c,f=i.width,d=i.height,u=i.x1,p=i.y1,h=i.factor,m={x:0,y:0,width:0,height:0},g=!1,y=!1,v=!1,C,k,E,M,T,N={x:u,y:p,width:f,height:d},z=!1;const G=[{id:"top-left",cursor:"nw-resize"},{id:"top-right",cursor:"ne-resize"},{id:"bottom-left",cursor:"sw-resize"},{id:"bottom-right",cursor:"se-resize"}];Ke(()=>{s.addEventListener("mousedown",Ne),s.addEventListener("mousemove",xe),s.addEventListener("mouseup",De),G.forEach(A=>{A.ref=document.querySelector(`svg #${A.id}`)}),c=document.querySelector(`svg #${Zt}`),n(2,r=document.querySelector(`svg #${Qt}`)),r.addEventListener("click",I)});async function Ne(A){console.log("TRIM MOUSEDOWN"),o=s.getBoundingClientRect(),M=o.left,T=o.top,A.target===s?(k=A.clientX-M,E=A.clientY-T,n(5,g=!0),s.classList.remove("inactive"),n(1,m={x:0,y:0,width:0,height:0}),r.setAttribute("d",`M0,0H${o.width}V${o.height}H0Z`)):A.target.classList.contains("handle")?(k=A.clientX-M,E=A.clientY-T,n(6,y=!0),C=A.target):A.target.id==="movehandle"&&(k=A.clientX-m.x,E=A.clientY-m.y,n(7,v=!0)),R.update(U=>({...U,triminprogress:!0}))}function xe(A){let U,V,K,Z;if(g)U=Math.min(k,A.clientX-M),V=Math.min(E,A.clientY-T),K=Math.abs(k-A.clientX+M),Z=Math.abs(E-A.clientY+T);else if(y){const D=m;switch(U=m.x,V=m.y,K=m.width,Z=m.height,C.id){case"top-left":U=Math.min(A.clientX-M,D.x+D.width),V=Math.min(A.clientY-T,D.y+D.height),K=Math.abs(D.x+D.width-U),Z=Math.abs(D.y+D.height-V);break;case"top-right":V=Math.min(A.clientY-T,D.y+D.height),K=Math.abs(A.clientX-M-D.x),Z=Math.abs(D.y+D.height-V);break;case"bottom-left":U=Math.min(A.clientX-M,D.x+D.width),K=Math.abs(D.x+D.width-U),Z=Math.abs(A.clientY-T-D.y);break;case"bottom-right":K=Math.abs(A.clientX-M-D.x),Z=Math.abs(A.clientY-T-D.y);break}}else v&&(U=Math.min(Math.max(0,A.clientX-k),o.width-m.width),V=Math.min(Math.max(0,A.clientY-E),o.height-m.height),K=m.width,Z=m.height);(g||y||v)&&(we(U,V,K,Z),ye(U+K/2,V+Z/2),n(1,m={x:U,y:V,width:K,height:Z}))}function De(){console.log("TRIM MOUSEUP"),n(5,g=!1),n(6,y=!1),n(7,v=!1),n(8,z=!!(m.width&&m.height)),z&&R.update(A=>({...A,...N})),R.update(A=>({...A,isDefined:z,triminprogress:!1}))}function ye(A,U){n(3,l.style.left=`${A}px`,l),n(3,l.style.top=`${U}px`,l)}function we(A,U,V,K){a.setAttribute("x",A),a.setAttribute("y",U),a.setAttribute("width",V),a.setAttribute("height",K),c.setAttribute("x",A),c.setAttribute("y",U),c.setAttribute("width",V),c.setAttribute("height",K),G.forEach(Z=>{const D=Z.ref;switch(Z.id){case"top-left":D.setAttribute("x",A),D.setAttribute("y",U);break;case"top-right":D.setAttribute("x",A+V),D.setAttribute("y",U);break;case"bottom-left":D.setAttribute("x",A),D.setAttribute("y",U+K);break;case"bottom-right":D.setAttribute("x",A+V),D.setAttribute("y",U+K);break}}),r.setAttribute("d",`M0,0H${o.width}V${o.height}H0ZM${A},${U}H${A+V}V${U+K}H${A}Z`)}function I(){n(8,z=!1),R.update(A=>({...A,isDefined:!1,cancelTrim:!0})),we(-100,-100,0,0),G.forEach(A=>{A.ref.setAttribute("x",-100),A.ref.setAttribute("y",-100)}),r.setAttribute("d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z")}function ce(A){fe[A?"unshift":"push"](()=>{l=A,n(3,l)})}function J(A){fe[A?"unshift":"push"](()=>{a=A,n(4,a)})}function ke(A){fe[A?"unshift":"push"](()=>{r=A,n(2,r)})}function _e(A){fe[A?"unshift":"push"](()=>{s=A,n(0,s)})}return e.$$set=A=>{"frameSpecs"in A&&n(10,i=A.frameSpecs)},e.$$.update=()=>{e.$$.dirty[0]&3&&s&&(N={x:Math.floor(m.x/s.clientWidth*f*h)+u,y:Math.floor(m.y/s.clientHeight*d*h)+p,width:Math.floor(m.width/s.clientWidth*f*h),height:Math.floor(m.height/s.clientHeight*d*h)})},[s,m,r,l,a,g,y,v,z,G,i,ce,J,ke,_e]}class as extends de{constructor(t){super(),ue(this,t,rs,ls,ae,{frameSpecs:10},null,[-1,-1])}}function It(e){let t,n,i;return n=new as({props:{frameSpecs:e[1]}}),{c(){t=q("div"),ie(n.$$.fragment),_(t,"class","trim-action svelte-tnfbpj")},m(s,o){x(s,t,o),ee(n,t,null),i=!0},p(s,o){const r={};o&2&&(r.frameSpecs=s[1]),n.$set(r)},i(s){i||(j(n.$$.fragment,s),i=!0)},o(s){W(n.$$.fragment,s),i=!1},d(s){s&&H(t),te(n)}}}function cs(e){let t,n,i,s;return{c(){t=q("div"),n=oe(e[6]),_(t,"class","filename-text svelte-tnfbpj"),_(t,"tabindex","0")},m(o,r){x(o,t,r),w(t,n),i||(s=[P(t,"focus",e[19]),P(t,"click",e[20])],i=!0)},p(o,r){r&64&&Fe(n,o[6])},d(o){o&&H(t),i=!1,Q(s)}}}function fs(e){let t,n,i,s;return{c(){t=q("div"),n=oe(e[6]),_(t,"class","filename-text editing svelte-tnfbpj"),_(t,"tabindex","0"),_(t,"contenteditable",""),e[6]===void 0&&re(()=>e[18].call(t))},m(o,r){x(o,t,r),w(t,n),e[17](t),e[6]!==void 0&&(t.textContent=e[6]),i||(s=[P(t,"blur",e[16]),P(t,"input",e[18]),P(t,"click",un(e[15])),P(t,"keydown",e[14])],i=!0)},p(o,r){r&64&&pn(n,o[6]),r&64&&o[6]!==t.textContent&&(t.textContent=o[6])},d(o){o&&H(t),e[17](null),i=!1,Q(s)}}}function Ot(e){let t,n,i,s;return{c(){t=q("button"),_(t,"tabindex","0"),_(t,"class",n=he(`isolate-control ${e[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-tnfbpj")},m(o,r){x(o,t,r),i||(s=P(t,"click",e[23]),i=!0)},p(o,r){r&256&&n!==(n=he(`isolate-control ${o[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-tnfbpj")&&_(t,"class",n)},d(o){o&&H(t),i=!1,s()}}}function Ht(e){let t,n,i,s;return{c(){t=q("button"),_(t,"tabindex","0"),_(t,"class",n=he(`isolate-control ${e[9]&&e[7]?"icon-shrink":"icon-expand"}`)+" svelte-tnfbpj")},m(o,r){x(o,t,r),i||(s=P(t,"click",e[24]),i=!0)},p(o,r){r&640&&n!==(n=he(`isolate-control ${o[9]&&o[7]?"icon-shrink":"icon-expand"}`)+" svelte-tnfbpj")&&_(t,"class",n)},d(o){o&&H(t),i=!1,s()}}}function us(e){let t,n,i,s,o,r,l,a,c,f,d,u,p,h,m,g=e[8]&&e[7]&&It(e);function y(M,T){return M[4]?fs:cs}let v=y(e),C=v(e),k=(e[5]!=="quadrant"||e[9])&&Ot(e),E=e[5]==="quadrant"&&Ht(e);return{c(){t=q("div"),g&&g.c(),n=L(),i=q("div"),s=q("div"),o=q("div"),C.c(),r=L(),l=q("button"),a=L(),c=q("button"),f=L(),d=q("div"),k&&k.c(),u=L(),E&&E.c(),_(l,"class","icon-download svelte-tnfbpj"),_(o,"class","filename-area svelte-tnfbpj"),_(o,"data-index",e[0]),_(c,"class","icon-clipboard svelte-tnfbpj"),_(s,"class","controls-wrapper svelte-tnfbpj"),_(d,"class","isolate-controls svelte-tnfbpj"),_(i,"class","image-action svelte-tnfbpj"),_(t,"class","svelte-tnfbpj"),Y(t,"triminprogress",e[3].triminprogress)},m(M,T){x(M,t,T),g&&g.m(t,null),w(t,n),w(t,i),w(i,s),w(s,o),C.m(o,null),w(o,r),w(o,l),w(s,a),w(s,c),w(i,f),w(i,d),k&&k.m(d,null),w(d,u),E&&E.m(d,null),p=!0,h||(m=[P(l,"click",e[21]),P(c,"click",e[22]),P(t,"blur",e[13])],h=!0)},p(M,[T]){M[8]&&M[7]?g?(g.p(M,T),T&384&&j(g,1)):(g=It(M),g.c(),j(g,1),g.m(t,n)):g&&(me(),W(g,1,1,()=>{g=null}),ge()),v===(v=y(M))&&C?C.p(M,T):(C.d(1),C=v(M),C&&(C.c(),C.m(o,r))),(!p||T&1)&&_(o,"data-index",M[0]),M[5]!=="quadrant"||M[9]?k?k.p(M,T):(k=Ot(M),k.c(),k.m(d,u)):k&&(k.d(1),k=null),M[5]==="quadrant"?E?E.p(M,T):(E=Ht(M),E.c(),E.m(d,null)):E&&(E.d(1),E=null),(!p||T&8)&&Y(t,"triminprogress",M[3].triminprogress)},i(M){p||(j(g),p=!0)},o(M){W(g),p=!1},d(M){M&&H(t),g&&g.d(),C.d(),k&&k.d(),E&&E.d(),h=!1,Q(m)}}}function ds(e,t,n){let i,s,o,r,l,a;B(e,R,I=>n(3,s=I)),B(e,Re,I=>n(4,o=I)),B(e,Ie,I=>n(26,r=I)),B(e,Pe,I=>n(8,l=I)),B(e,Oe,I=>n(9,a=I));let{index:c}=t,{frameSpecs:f}=t,d,u,p;const h=ht(),m=I=>{p=r[I],Qn.set(u),Re.set(!0)},g=(I,ce)=>{Ie.update(J=>{const ke=[...J];return ke[I]=ce,ke})},y=()=>{let I=u.innerText;if(I.length===0){n(6,v=p);return}console.log("FUNC stopEditingFilename"),g(c,I),Re.set(!1)};let v=r[c];const C=I=>{Pe.set(!1),Oe.set(!1)},k=I=>{const ce=document.createRange();ce.selectNodeContents(I),ce.collapse(!1);const J=window.getSelection();J.removeAllRanges(),J.addRange(ce)},E=I=>{I.key==="Escape"&&(I.preventDefault(),I.stopPropagation(),n(2,u.innerText=p,u),u.blur())};function M(I){wn.call(this,e,I)}const T=()=>y(event);function N(I){fe[I?"unshift":"push"](()=>{u=I,n(2,u)})}function z(){v=this.textContent,n(6,v)}const G=()=>m(c),Ne=()=>m(c),xe=()=>ss(c,h),De=()=>is(c,h),ye=()=>Kt(),we=()=>Vt(c,h);return e.$$set=I=>{"index"in I&&n(0,c=I.index),"frameSpecs"in I&&n(1,f=I.frameSpecs)},e.$$.update=()=>{e.$$.dirty&20&&o&&kn().then(()=>k(u)),e.$$.dirty&8&&s.cancelTrim&&(Pe.set(!1),R.update(I=>({...I,cancelTrim:!1,isDefined:!1}))),e.$$.dirty&8&&n(5,d=s.mode),e.$$.dirty&9&&n(7,i=s.index===c)},[c,f,u,s,o,d,v,i,l,a,h,m,y,C,E,M,T,N,z,G,Ne,xe,De,ye,we]}class Gt extends de{constructor(t){super(),ue(this,t,ds,us,ae,{index:0,frameSpecs:1})}}function ps(e,t,n){let i,s,o,r,l;B(e,Oe,v=>n(3,s=v)),B(e,Re,v=>n(4,o=v)),B(e,R,v=>n(1,r=v)),B(e,Ie,v=>n(5,l=v));let{index:a}=t;const c=ht(),f=v=>{Kn.set(l[v]),Re.set(!0)},d=v=>{r.mode!=="quadrant"&&R.update(C=>({...C,index:v,mode:"quadrant"})),c("switchquadrant",{index:v})},u=()=>{a!==0?(r.expanded&&c("expandaction"),R.update(v=>({...v,index:0,mode:"whole"}))):R.update(v=>({...v,index:1,mode:"quadrant"}))},p=v=>{c("copytoclipboard",{index:i})},h=v=>{c("downloadfile",{index:i})},m=v=>{r.isDefined||(i==0?c("downloadfile",{index:0}):c("downloadall"))},g=()=>{console.log("blurAnythingActive");const v=document.activeElement;if(v){v.blur(),event.preventDefault();return}},y=v=>{if(o&&v.key==="Enter"){g();return}if(os())return;const k={1:()=>d(1),2:()=>d(2),3:()=>d(3),4:()=>d(4),c:()=>p(),t:()=>Kt(),f:()=>Vt(i,c),D:()=>m(),d:()=>h(),m:()=>u(),Enter:()=>f(a),Escape:()=>{g(),R.update(E=>({...E,cancelTrim:!0,isDefined:!1}))},"[":()=>{if(a===0||!s)return;const E=a===1?4:(a-1)%4;R.update(M=>({...M,index:E}))},"]":()=>{if(a===0||!s)return;const E=a===4?1:(a+1)%5;R.update(M=>({...M,index:E}))}}[v.key];k&&(v.preventDefault(),k(v))};return Ke(()=>document.addEventListener("keydown",y)),st(()=>document.removeEventListener("keydown",y)),e.$$set=v=>{"index"in v&&n(0,a=v.index)},e.$$.update=()=>{e.$$.dirty&2&&(i=r.index)},[a,r]}class hs extends de{constructor(t){super(),ue(this,t,ps,null,ae,{index:0})}}function Nt(e,t,n){const i=e.slice();return i[10]=t[n],i}function ms(e){let t;return{c(){t=q("div"),t.innerHTML="<p>Error loading image dimensions.</p>"},m(n,i){x(n,t,i)},p:$,i:$,o:$,d(n){n&&H(t)}}}function gs(e){let t,n,i,s,o,r,l;const a=[bs,vs],c=[];function f(d,u){return d[2]==="quadrant"?0:1}return s=f(e),o=c[s]=a[s](e),{c(){t=q("div"),n=q("div"),i=q("div"),o.c(),_(i,"class","image-tracker svelte-ueqknh"),Y(i,"expanded",e[7]),Y(i,"quadrants",e[2]==="quadrant"),_(n,"class","image-shim svelte-ueqknh"),_(n,"style",r=`${e[8]}`),_(t,"class","image-base svelte-ueqknh")},m(d,u){x(d,t,u),w(t,n),w(n,i),c[s].m(i,null),l=!0},p(d,u){let p=s;s=f(d),s===p?c[s].p(d,u):(me(),W(c[p],1,1,()=>{c[p]=null}),ge(),o=c[s],o?o.p(d,u):(o=c[s]=a[s](d),o.c()),j(o,1),o.m(i,null)),(!l||u[0]&128)&&Y(i,"expanded",d[7]),(!l||u[0]&4)&&Y(i,"quadrants",d[2]==="quadrant"),(!l||u[0]&256&&r!==(r=`${d[8]}`))&&_(n,"style",r)},i(d){l||(j(o),l=!0)},o(d){W(o),l=!1},d(d){d&&H(t),c[s].d()}}}function _s(e){let t;return{c(){t=q("div"),t.innerHTML='<div class="spinner svelte-ueqknh">Loading...</div>',_(t,"class","spinner-container svelte-ueqknh")},m(n,i){x(n,t,i)},p:$,i:$,o:$,d(n){n&&H(t)}}}function vs(e){let t,n,i,s,o,r;return n=new Gt({props:{index:e[10],frameSpecs:e[9]}}),n.$on("imageaction",e[29]),{c(){t=q("div"),ie(n.$$.fragment),_(t,"class","whole active svelte-ueqknh"),_(t,"style",i=`background-image:url(${e[1]});${e[8]}`)},m(l,a){x(l,t,a),ee(n,t,null),s=!0,o||(r=P(t,"mouseenter",e[30]),o=!0)},p(l,a){const c={};a[0]&1024&&(c.index=l[10]),a[0]&512&&(c.frameSpecs=l[9]),n.$set(c),(!s||a[0]&258&&i!==(i=`background-image:url(${l[1]});${l[8]}`))&&_(t,"style",i)},i(l){s||(j(n.$$.fragment,l),s=!0)},o(l){W(n.$$.fragment,l),s=!1},d(l){l&&H(t),te(n),o=!1,r()}}}function bs(e){let t,n,i=[1,2,3,4],s=[];for(let r=0;r<4;r+=1)s[r]=xt(Nt(e,i,r));const o=r=>W(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<4;r+=1)s[r].c();t=Ve()},m(r,l){for(let a=0;a<4;a+=1)s[a]&&s[a].m(r,l);x(r,t,l),n=!0},p(r,l){if(l[0]&228167){i=[1,2,3,4];let a;for(a=0;a<4;a+=1){const c=Nt(r,i,a);s[a]?(s[a].p(c,l),j(s[a],1)):(s[a]=xt(c),s[a].c(),j(s[a],1),s[a].m(t.parentNode,t))}for(me(),a=4;a<4;a+=1)o(a);ge()}},i(r){if(!n){for(let l=0;l<4;l+=1)j(s[l]);n=!0}},o(r){s=s.filter(Boolean);for(let l=0;l<4;l+=1)W(s[l]);n=!1},d(r){Ut(s,r),r&&H(t)}}}function xt(e){let t,n,i,s,o,r,l,a,c,f;s=new Gt({props:{index:e[10],frameSpecs:{...e[9],...e[14](e[10]),factor:.5}}}),s.$on("expandaction",e[26]),s.$on("imageaction",e[27]);function d(){return e[28](e[10])}return{c(){t=q("div"),n=q("div"),i=L(),ie(s.$$.fragment),o=L(),_(t,"style",r=`background-image:url(${e[1]});${e[8]}`),_(t,"class",l=he(e[2])+" svelte-ueqknh"),Y(t,"active",e[0]===e[10])},m(u,p){x(u,t,p),w(t,n),e[25](n),w(t,i),ee(s,t,null),w(t,o),a=!0,c||(f=[P(t,"mouseenter",d),P(t,"transitionstart",e[11]),P(t,"transitionend",e[12])],c=!0)},p(u,p){e=u;const h={};p[0]&512&&(h.frameSpecs={...e[9],...e[14](e[10]),factor:.5}),s.$set(h),(!a||p[0]&258&&r!==(r=`background-image:url(${e[1]});${e[8]}`))&&_(t,"style",r),(!a||p[0]&4&&l!==(l=he(e[2])+" svelte-ueqknh"))&&_(t,"class",l),(!a||p[0]&5)&&Y(t,"active",e[0]===e[10])},i(u){a||(j(s.$$.fragment,u),a=!0)},o(u){W(s.$$.fragment,u),a=!1},d(u){u&&H(t),e[25](null),te(s),c=!1,Q(f)}}}function ys(e){let t,n,i,s,o,r;t=new hs({props:{index:e[10]}}),t.$on("downloadfile",e[20]),t.$on("downloadall",e[21]),t.$on("copytoclipboard",e[19]),t.$on("switchquadrant",e[18]),t.$on("expandaction",e[24]);const l=[_s,gs,ms],a=[];function c(f,d){return f[3]?0:f[4]&&f[5]?1:2}return i=c(e),s=a[i]=l[i](e),{c(){ie(t.$$.fragment),n=L(),s.c(),o=Ve()},m(f,d){ee(t,f,d),x(f,n,d),a[i].m(f,d),x(f,o,d),r=!0},p(f,d){const u={};d[0]&1024&&(u.index=f[10]),t.$set(u);let p=i;i=c(f),i===p?a[i].p(f,d):(me(),W(a[p],1,1,()=>{a[p]=null}),ge(),s=a[i],s?s.p(f,d):(s=a[i]=l[i](f),s.c()),j(s,1),s.m(o.parentNode,o))},i(f){r||(j(t.$$.fragment,f),j(s),r=!0)},o(f){W(t.$$.fragment,f),W(s),r=!1},d(f){te(t,f),f&&H(n),a[i].d(f),f&&H(o)}}}function ws(e,t,n){let i,s,o,r,l;B(e,at,b=>n(32,s=b)),B(e,R,b=>n(23,o=b)),B(e,Ie,b=>n(33,r=b)),B(e,At,b=>n(34,l=b));let{imageUrl:a}=t,{imageExtension:c}=t,{currentIndex:f}=t,{mode:d}=t,u=!0,p,h,m,g,y=!1,v="",C;Ke(async()=>{const b=await T(a);n(9,C={width:b.width,height:b.height,x1:0,y1:0,factor:1}),n(4,p=b.width),n(5,h=b.height),m=b.canvas,n(8,v=z(p,h))}),yn(()=>{m&&g&&d==="whole"&&g.appendChild(m)});const k=b=>{b.target===b.currentTarget&&(console.log("transitionStart TRUE"),at.set(!0))},E=b=>{b.target===b.currentTarget&&(at.set(!1),console.log("$lastHovered:",l),l&&l!==f&&_e(l))},M=async b=>{const S=new Image;return S.crossOrigin="anonymous",S.src=b,await S.decode(),S},T=async b=>{n(3,u=!0);let S,O,F;try{const X=await M(b);return S=X.width,O=X.height,F=G(X,0,0,S,O),{width:S,height:O,canvas:F}}catch(X){console.error("Error getting image dimensions:",X)}finally{n(3,u=!1)}},N=ht(),z=(b,S)=>{const O=(Ee,Le)=>Le===0?Ee:O(Le,Ee%Le),F=O(b,S),X=b/F,pe=S/F;return`aspect-ratio: ${X} / ${pe};`},G=(b,S,O,F,X)=>{const pe=document.createElement("canvas"),Ee=pe.getContext("2d");return pe.width=F,pe.height=X,Ee.drawImage(b,0,0,F,X),pe},Ne=(b,S,O)=>{let F,X;switch(b){case 1:F=0,X=0;break;case 2:F=S,X=0;break;case 3:F=0,X=O;break;case 4:F=S,X=O;break;default:F=0,X=0}return{sx:F,sy:X}},xe=(b="download",S)=>{const O=parseInt(S)===0?p:p/2,F=parseInt(S)===0?h:h/2,X=document.createElement("canvas"),pe=X.getContext("2d");X.width=O,X.height=F;let{sx:Ee,sy:Le}=Ne(S,O,F);pe.drawImage(m,Ee,Le,O,F,0,0,O,F);const it=X.toDataURL("image/png");switch(b){case"download":ye(it,r[S],c),N("toastNotice",`Quadrant ${S} downloading.`);break;case"clipboard":I(it);break;case"background":return it;default:console.error('Invalid action specified. Please use a valid action such as "download", "clipboard", or "background".');break}},De=(b,S,O)=>{const F=b.toDataURL(`image/${O}`,.95);ye(F,S,O)},ye=(b,S,O)=>{const F=document.createElement("a");F.href=b,F.download=`${S}${O}`,F.click()},we=b=>{b.toBlob(S=>{const O=new ClipboardItem({"image/png":S});return navigator.clipboard.write([O])})},I=b=>{fetch(b).then(S=>S.blob()).then(S=>{const O=new ClipboardItem({"image/png":S});return N("toastNotice",`Quadrant ${f} copied to clipboard.`),navigator.clipboard.write([O])}).then(()=>{console.log("Quadrant of image copied to clipboard successfully.")}).catch(S=>{console.error("Failed to copy quadrant of image to clipboard:",S)})},ce=(b,S)=>{const O=document.createElement("canvas"),F=O.getContext("2d");return O.width=S.width,O.height=S.height,F.drawImage(b,S.x,S.y,S.width,S.height,0,0,S.width,S.height),O},J=(b,S=0)=>{if(d==="quadrant"&&!o.isDefined)xe(b,f);else{const O=o.isDefined?ce(m,o):m;b==="download"?(console.log("rootnames:",r),De(O,r[f],c),N("toastNotice",o.isDefined?"Trim area downloading.":"Full image downloading.")):b==="clipboard"&&(we(O),N("toastNotice",o.isDefined?"Trim area copied to clipboard":"Full image copied to clipboard."))}},ke=b=>{const S=parseInt(b)===1||parseInt(b)===3?0:p/2,O=parseInt(b)===1||parseInt(b)===2?0:h/2;return{x1:S,y1:O}},_e=b=>{y||(n(0,f=b),R.update(S=>({...S,index:b})))},A=()=>{R.update(b=>({...b,expanded:!b.expanded}))},U=b=>{s?At.set(b):_e(b)},V=b=>_e(b.detail.index),K=b=>J("clipboard",b.detail.index),Z=b=>J("download",b.detail.index),D=b=>{let S=f;[4,3,2,1].forEach(O=>{n(0,f=O),J("download",O)}),n(0,f=S)},Jt=()=>A();function en(b){fe[b?"unshift":"push"](()=>{g=b,n(6,g)})}const tn=()=>A(),nn=b=>J(b.detail),sn=b=>U(b),on=b=>J(b.detail),ln=()=>_e(i);return e.$$set=b=>{"imageUrl"in b&&n(1,a=b.imageUrl),"imageExtension"in b&&n(22,c=b.imageExtension),"currentIndex"in b&&n(0,f=b.currentIndex),"mode"in b&&n(2,d=b.mode)},e.$$.update=()=>{e.$$.dirty[0]&8388608&&n(10,i=o.index),e.$$.dirty[0]&8388608&&n(7,y=o.expanded)},[f,a,d,u,p,h,g,y,v,C,i,k,E,J,ke,_e,A,U,V,K,Z,D,c,o,Jt,en,tn,nn,sn,on,ln]}class ks extends de{constructor(t){super(),ue(this,t,ws,ys,ae,{imageUrl:1,imageExtension:22,currentIndex:0,mode:2},null,[-1,-1])}}function Es(e){let t,n,i,s,o,r,l,a,c;return s=new ks({props:{imageUrl:e[0],currentIndex:e[5],mode:e[1],imageExtension:e[4]}}),s.$on("toastNotice",e[3]),r=new ns({}),a=new Vn({}),{c(){t=q("main"),n=q("div"),i=q("div"),ie(s.$$.fragment),o=L(),ie(r.$$.fragment),l=L(),ie(a.$$.fragment),_(i,"class","image-stage svelte-1wix96r"),Y(i,"fullscreen",e[2]),_(n,"class","image-wrapper svelte-1wix96r")},m(f,d){x(f,t,d),w(t,n),w(n,i),ee(s,i,null),w(t,o),ee(r,t,null),x(f,l,d),ee(a,f,d),c=!0},p(f,[d]){const u={};d&1&&(u.imageUrl=f[0]),d&2&&(u.mode=f[1]),s.$set(u),(!c||d&4)&&Y(i,"fullscreen",f[2])},i(f){c||(j(s.$$.fragment,f),j(r.$$.fragment,f),j(a.$$.fragment,f),c=!0)},o(f){W(s.$$.fragment,f),W(r.$$.fragment,f),W(a.$$.fragment,f),c=!1},d(f){f&&H(t),te(s),te(r),f&&H(l),te(a,f)}}}let Ms="_q";function As(e,t,n){let i,s,o,r;B(e,Ie,g=>n(9,s=g)),B(e,R,g=>n(6,o=g)),B(e,Oe,g=>n(2,r=g));let l,a;st(()=>{l.startsWith("blob:")&&URL.revokeObjectURL(l)}),window.location.search&&(a=new URLSearchParams(window.location.search)),l=(a==null?void 0:a.get("image"))||"https://media.discordapp.net/attachments/1060231236733382769/1105121925421867099/sidewaysdesign_multiple_expressions_of_a_cow_in_the_style_of_sa_62ee6891-cbb7-4f2f-9514-e21833b9fecb.webp";const c={duration:1500,intro:{x:256}},f=g=>tt.push(g.detail,c),d=g=>{const y=g.split("/").pop(),[v,C,k]=y.match(/(.+)(\.\w+)$/)??[];return{rootname:C??y,imageExtension:k??""}},{rootname:u,imageExtension:p}=d(l);let h={currentMode:i,currentName:u,currentIndex:i==="quadrant"?1:0,filenames:[u,...Array.from([1,2,3,4],(g,y)=>`${u}${Ms}${y+1}`)]};an(Ie,s=h.filenames,s);let m=h.currentIndex;return e.$$.update=()=>{e.$$.dirty&64&&n(1,i=o.mode)},h.currentIndex=m,[l,i,r,f,p,m,o]}class Cs extends de{constructor(t){super(),ue(this,t,As,Es,ae,{})}}new Cs({target:document.getElementById("app")});
