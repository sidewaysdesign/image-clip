(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function X(){}const Xe=e=>e;function Yt(e,t){for(const n in t)e[n]=t[n];return e}function Xn(e){return e()}function En(){return Object.create(null)}function he(e){e.forEach(Xn)}function rt(e){return typeof e=="function"}function be(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function us(e){return Object.keys(e).length===0}function Yn(e,...t){if(e==null)return X;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Qt(e){let t;return Yn(e,n=>t=n)(),t}function j(e,t,n){e.$$.on_destroy.push(Yn(t,n))}function Ne(e){return e??""}function ds(e,t,n){return e.set(n),t}function Tn(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Bn=typeof window<"u";let bt=Bn?()=>window.performance.now():()=>Date.now(),Zt=Bn?e=>requestAnimationFrame(e):X;const it=new Set;function Kn(e){it.forEach(t=>{t.c(e)||(it.delete(t),t.f())}),it.size!==0&&Zt(Kn)}function wt(e){let t;return it.size===0&&Zt(Kn),{promise:new Promise(n=>{it.add(t={c:e,f:n})}),abort(){it.delete(t)}}}function p(e,t){e.appendChild(t)}function Vn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function fs(e){const t=z("style");return ps(Vn(e),t),t.sheet}function ps(e,t){return p(e.head||e,t),t.sheet}function W(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode&&e.parentNode.removeChild(e)}function Qn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function z(e){return document.createElement(e)}function _e(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ee(e){return document.createTextNode(e)}function S(){return ee(" ")}function kt(){return ee("")}function Y(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function ms(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function jt(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function hs(e){return Array.from(e.childNodes)}function nt(e,t){t=""+t,e.data!==t&&(e.data=t)}function gs(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Zn(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function V(e,t,n){e.classList[n?"add":"remove"](t)}function Gn(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,i,t),s}class vs{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=_e(n.nodeName):this.e=z(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)W(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(F)}}function qn(e,t){return new e(t)}const Nt=new Map;let Dt=0;function _s(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function ys(e,t){const n={stylesheet:fs(t),rules:{}};return Nt.set(e,n),n}function gt(e,t,n,i,s,r,o,l=0){const a=16.666/i;let c=`{
`;for(let w=0;w<=1;w+=a){const k=t+(n-t)*r(w);c+=w*100+`%{${o(k,1-k)}}
`}const f=c+`100% {${o(n,1-n)}}
}`,u=`__svelte_${_s(f)}_${l}`,d=Vn(e),{stylesheet:h,rules:v}=Nt.get(d)||ys(d,e);v[u]||(v[u]=!0,h.insertRule(`@keyframes ${u} ${f}`,h.cssRules.length));const b=e.style.animation||"";return e.style.animation=`${b?`${b}, `:""}${u} ${i}ms linear ${s}ms 1 both`,Dt+=1,u}function vt(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=n.length-i.length;s&&(e.style.animation=i.join(", "),Dt-=s,Dt||bs())}function bs(){Zt(()=>{Dt||(Nt.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&F(t)}),Nt.clear())})}function ws(e,t,n,i){if(!t)return X;const s=e.getBoundingClientRect();if(t.left===s.left&&t.right===s.right&&t.top===s.top&&t.bottom===s.bottom)return X;const{delay:r=0,duration:o=300,easing:l=Xe,start:a=bt()+r,end:c=a+o,tick:f=X,css:u}=n(e,{from:t,to:s},i);let d=!0,h=!1,v;function b(){u&&(v=gt(e,0,1,o,r,l,u)),r||(h=!0)}function w(){u&&vt(e,v),d=!1}return wt(k=>{if(!h&&k>=a&&(h=!0),h&&k>=c&&(f(1,0),w()),!d)return!1;if(h){const _=k-a,E=0+1*l(_/o);f(E,1-E)}return!0}),b(),f(0,1),w}function ks(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,s=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,Jn(e,s)}}function Jn(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform;e.style.transform=`${s} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let _t;function ht(e){_t=e}function Ft(){if(!_t)throw new Error("Function called outside component initialization");return _t}function zt(e){Ft().$$.on_mount.push(e)}function zs(e){Ft().$$.after_update.push(e)}function Gt(e){Ft().$$.on_destroy.push(e)}function Jt(){const e=Ft();return(t,n,{cancelable:i=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=Gn(t,n,{cancelable:i});return s.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}const tt=[],Ae=[];let lt=[];const Bt=[],es=Promise.resolve();let Kt=!1;function ts(){Kt||(Kt=!0,es.then(ns))}function Ms(){return ts(),es}function Ee(e){lt.push(e)}function Es(e){Bt.push(e)}const Ut=new Set;let Je=0;function ns(){if(Je!==0)return;const e=_t;do{try{for(;Je<tt.length;){const t=tt[Je];Je++,ht(t),Ts(t.$$)}}catch(t){throw tt.length=0,Je=0,t}for(ht(null),tt.length=0,Je=0;Ae.length;)Ae.pop()();for(let t=0;t<lt.length;t+=1){const n=lt[t];Ut.has(n)||(Ut.add(n),n())}lt.length=0}while(tt.length);for(;Bt.length;)Bt.pop()();Kt=!1,Ut.clear(),ht(e)}function Ts(e){if(e.fragment!==null){e.update(),he(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ee)}}function qs(e){const t=[],n=[];lt.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),lt=t}let pt;function en(){return pt||(pt=Promise.resolve(),pt.then(()=>{pt=null})),pt}function Ue(e,t,n){e.dispatchEvent(Gn(`${t?"intro":"outro"}${n}`))}const It=new Set;let Me;function De(){Me={r:0,c:[],p:Me}}function Pe(){Me.r||he(Me.c),Me=Me.p}function P(e,t){e&&e.i&&(It.delete(e),e.i(t))}function B(e,t,n,i){if(e&&e.o){if(It.has(e))return;It.add(e),Me.c.push(()=>{It.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const tn={duration:0};function Cs(e,t,n){const i={direction:"in"};let s=t(e,n,i),r=!1,o,l,a=0;function c(){o&&vt(e,o)}function f(){const{delay:d=0,duration:h=300,easing:v=Xe,tick:b=X,css:w}=s||tn;w&&(o=gt(e,0,1,h,d,v,w,a++)),b(0,1);const k=bt()+d,_=k+h;l&&l.abort(),r=!0,Ee(()=>Ue(e,!0,"start")),l=wt(E=>{if(r){if(E>=_)return b(1,0),Ue(e,!0,"end"),c(),r=!1;if(E>=k){const T=v((E-k)/h);b(T,1-T)}}return r})}let u=!1;return{start(){u||(u=!0,vt(e),rt(s)?(s=s(i),en().then(f)):f())},invalidate(){u=!1},end(){r&&(c(),r=!1)}}}function Ss(e,t,n){const i={direction:"out"};let s=t(e,n,i),r=!0,o;const l=Me;l.r+=1;function a(){const{delay:c=0,duration:f=300,easing:u=Xe,tick:d=X,css:h}=s||tn;h&&(o=gt(e,1,0,f,c,u,h));const v=bt()+c,b=v+f;Ee(()=>Ue(e,!1,"start")),wt(w=>{if(r){if(w>=b)return d(0,1),Ue(e,!1,"end"),--l.r||he(l.c),!1;if(w>=v){const k=u((w-v)/f);d(1-k,k)}}return r})}return rt(s)?en().then(()=>{s=s(i),a()}):a(),{end(c){c&&s.tick&&s.tick(1,0),r&&(o&&vt(e,o),r=!1)}}}function Lt(e,t,n,i){const s={direction:"both"};let r=t(e,n,s),o=i?0:1,l=null,a=null,c=null;function f(){c&&vt(e,c)}function u(h,v){const b=h.b-o;return v*=Math.abs(b),{a:o,b:h.b,d:b,duration:v,start:h.start,end:h.start+v,group:h.group}}function d(h){const{delay:v=0,duration:b=300,easing:w=Xe,tick:k=X,css:_}=r||tn,E={start:bt()+v,b:h};h||(E.group=Me,Me.r+=1),l||a?a=E:(_&&(f(),c=gt(e,o,h,b,v,w,_)),h&&k(0,1),l=u(E,b),Ee(()=>Ue(e,h,"start")),wt(T=>{if(a&&T>a.start&&(l=u(a,b),a=null,Ue(e,l.b,"start"),_&&(f(),c=gt(e,o,l.b,l.duration,0,w,r.css))),l){if(T>=l.end)k(o=l.b,1-o),Ue(e,l.b,"end"),a||(l.b?f():--l.group.r||he(l.group.c)),l=null;else if(T>=l.start){const g=T-l.start;o=l.a+l.d*w(g/l.duration),k(o,1-o)}}return!!(l||a)}))}return{run(h){rt(r)?en().then(()=>{r=r(s),d(h)}):d(h)},end(){f(),l=a=null}}}function As(e,t){B(e,1,1,()=>{t.delete(e.key)})}function Hs(e,t){e.f(),As(e,t)}function Ls(e,t,n,i,s,r,o,l,a,c,f,u){let d=e.length,h=r.length,v=d;const b={};for(;v--;)b[e[v].key]=v;const w=[],k=new Map,_=new Map,E=[];for(v=h;v--;){const H=u(s,r,v),L=n(H);let G=o.get(L);G?i&&E.push(()=>G.p(H,t)):(G=c(L,H),G.c()),k.set(L,w[v]=G),L in b&&_.set(L,Math.abs(v-b[L]))}const T=new Set,g=new Set;function q(H){P(H,1),H.m(l,f),o.set(H.key,H),f=H.first,h--}for(;d&&h;){const H=w[h-1],L=e[d-1],G=H.key,Q=L.key;H===L?(f=H.first,d--,h--):k.has(Q)?!o.has(G)||T.has(G)?q(H):g.has(Q)?d--:_.get(G)>_.get(Q)?(g.add(G),q(H)):(T.add(Q),d--):(a(L,o),d--)}for(;d--;){const H=e[d];k.has(H.key)||a(H,o)}for(;h;)q(w[h-1]);return he(E),w}function xs(e,t){const n={},i={},s={$$scope:1};let r=e.length;for(;r--;){const o=e[r],l=t[r];if(l){for(const a in o)a in l||(i[a]=1);for(const a in l)s[a]||(n[a]=l[a],s[a]=1);e[r]=l}else for(const a in o)s[a]=1}for(const o in i)o in n||(n[o]=void 0);return n}function $s(e){return typeof e=="object"&&e!==null?e:{}}const Is=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...Is];function Os(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function fe(e){e&&e.c()}function re(e,t,n,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,n),i||Ee(()=>{const o=e.$$.on_mount.map(Xn).filter(rt);e.$$.on_destroy?e.$$.on_destroy.push(...o):he(o),e.$$.on_mount=[]}),r.forEach(Ee)}function ae(e,t){const n=e.$$;n.fragment!==null&&(qs(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ns(e,t){e.$$.dirty[0]===-1&&(tt.push(e),ts(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Te(e,t,n,i,s,r,o,l=[-1]){const a=_t;ht(e);const c=e.$$={fragment:null,ctx:[],props:r,update:X,not_equal:s,bound:En(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:En(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};o&&o(c.root);let f=!1;if(c.ctx=n?n(e,t.props||{},(u,d,...h)=>{const v=h.length?h[0]:d;return c.ctx&&s(c.ctx[u],c.ctx[u]=v)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](v),f&&Ns(e,u)),d}):[],c.update(),f=!0,he(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const u=hs(t.target);c.fragment&&c.fragment.l(u),u.forEach(F)}else c.fragment&&c.fragment.c();t.intro&&P(e.$$.fragment),re(e,t.target,t.anchor,t.customElement),ns()}ht(a)}class qe{$destroy(){ae(this,1),this.$destroy=X}$on(t,n){if(!rt(n))return X;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!us(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ss(e){const t=e-1;return t*t*t+1}function mt(e,{delay:t=0,duration:n=400,easing:i=Xe}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:r=>`opacity: ${r*s}`}}function Ds(e,{delay:t=0,duration:n=400,easing:i=ss,x:s=0,y:r=0,opacity:o=0}={}){const l=getComputedStyle(e),a=+l.opacity,c=l.transform==="none"?"":l.transform,f=a*(1-o),[u,d]=Tn(s),[h,v]=Tn(r);return{delay:t,duration:n,easing:i,css:(b,w)=>`
			transform: ${c} translate(${(1-b)*u}${d}, ${(1-b)*h}${v});
			opacity: ${a-f*w}`}}function Ps(e,{from:t,to:n},i={}){const s=getComputedStyle(e),r=s.transform==="none"?"":s.transform,[o,l]=s.transformOrigin.split(" ").map(parseFloat),a=t.left+t.width*o/n.width-(n.left+o),c=t.top+t.height*l/n.height-(n.top+l),{delay:f=0,duration:u=h=>Math.sqrt(h)*120,easing:d=ss}=i;return{delay:f,duration:rt(u)?u(Math.sqrt(a*a+c*c)):u,easing:d,css:(h,v)=>{const b=v*a,w=v*c,k=h+v*t.width/n.width,_=h+v*t.height/n.height;return`transform: ${r} translate(${b}px, ${w}px) scale(${k}, ${_});`}}}const et=[];function Fs(e,t){return{subscribe:ce(e,t).subscribe}}function ce(e,t=X){let n;const i=new Set;function s(l){if(be(e,l)&&(e=l,n)){const a=!et.length;for(const c of i)c[1](),et.push(c,e);if(a){for(let c=0;c<et.length;c+=2)et[c][0](et[c+1]);et.length=0}}}function r(l){s(l(e))}function o(l,a=X){const c=[l,a];return i.add(c),i.size===1&&(n=t(s)||X),l(e),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}const Rs={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function js(){const{subscribe:e,update:t}=ce(new Array),n={};let i=0;function s(c){return c instanceof Object}function r(c="default",f={}){return n[c]=f,n}function o(c,f){const u={target:"default",...s(c)?c:{...f,msg:c}},d=n[u.target]||{},h={...Rs,...d,...u,theme:{...d.theme,...u.theme},classes:[...d.classes||[],...u.classes||[]],id:++i};return t(v=>h.reversed?[...v,h]:[h,...v]),i}function l(c){t(f=>{if(!f.length||c===0)return[];if(typeof c=="function")return f.filter(d=>c(d));if(s(c))return f.filter(d=>d.target!==c.target);const u=c||Math.max(...f.map(d=>d.id));return f.filter(d=>d.id!==u)})}function a(c,f){const u=s(c)?c:{...f,id:c};t(d=>{const h=d.findIndex(v=>v.id===u.id);return h>-1&&(d[h]={...d[h],...u}),d})}return{subscribe:e,push:o,pop:l,set:a,_init:r}}const Pt=js();function Cn(e){return Object.prototype.toString.call(e)==="[object Date]"}function Vt(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((s,r)=>Vt(e[r],s));return s=>i.map(r=>r(s))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Cn(e)&&Cn(t)){e=e.getTime(),t=t.getTime();const r=t-e;return o=>new Date(e+o*r)}const i=Object.keys(t),s={};return i.forEach(r=>{s[r]=Vt(e[r],t[r])}),r=>{const o={};return i.forEach(l=>{o[l]=s[l](r)}),o}}if(n==="number"){const i=t-e;return s=>e+s*i}throw new Error(`Cannot interpolate ${n} values`)}function Us(e,t={}){const n=ce(e);let i,s=e;function r(o,l){if(e==null)return n.set(e=o),Promise.resolve();s=o;let a=i,c=!1,{delay:f=0,duration:u=400,easing:d=Xe,interpolate:h=Vt}=Yt(Yt({},t),l);if(u===0)return a&&(a.abort(),a=null),n.set(e=s),Promise.resolve();const v=bt()+f;let b;return i=wt(w=>{if(w<v)return!0;c||(b=h(e,o),typeof u=="function"&&(u=u(e,o)),c=!0),a&&(a.abort(),a=null);const k=w-v;return k>u?(n.set(e=o),!1):(n.set(e=b(d(k/u))),!0)}),i.promise}return{set:r,update:(o,l)=>r(o(s,e),l),subscribe:n.subscribe}}function Ws(e){let t,n=e[0].msg+"",i;return{c(){t=new vs(!1),i=kt(),t.a=i},m(s,r){t.m(n,s,r),W(s,i,r)},p(s,r){r&1&&n!==(n=s[0].msg+"")&&t.p(n)},i:X,o:X,d(s){s&&F(i),s&&t.d()}}}function Xs(e){let t,n,i;const s=[e[2]];var r=e[0].component.src;function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Yt(a,s[c]);return{props:a}}return r&&(t=qn(r,o())),{c(){t&&fe(t.$$.fragment),n=kt()},m(l,a){t&&re(t,l,a),W(l,n,a),i=!0},p(l,a){const c=a&4?xs(s,[$s(l[2])]):{};if(a&1&&r!==(r=l[0].component.src)){if(t){De();const f=t;B(f.$$.fragment,1,0,()=>{ae(f,1)}),Pe()}r?(t=qn(r,o()),fe(t.$$.fragment),P(t.$$.fragment,1),re(t,n.parentNode,n)):t=null}else r&&t.$set(c)},i(l){i||(t&&P(t.$$.fragment,l),i=!0)},o(l){t&&B(t.$$.fragment,l),i=!1},d(l){l&&F(n),t&&ae(t,l)}}}function Sn(e){let t,n,i;return{c(){t=z("div"),m(t,"class","_toastBtn pe svelte-95rq8t"),m(t,"role","button"),m(t,"tabindex","0")},m(s,r){W(s,t,r),n||(i=[Y(t,"click",e[4]),Y(t,"keydown",e[8])],n=!0)},p:X,d(s){s&&F(t),n=!1,he(i)}}}function Ys(e){let t,n,i,s,r,o,l,a,c,f;const u=[Xs,Ws],d=[];function h(b,w){return b[0].component?0:1}i=h(e),s=d[i]=u[i](e);let v=e[0].dismissable&&Sn(e);return{c(){t=z("div"),n=z("div"),s.c(),r=S(),v&&v.c(),o=S(),l=z("progress"),m(n,"role","status"),m(n,"class","_toastMsg svelte-95rq8t"),V(n,"pe",e[0].component),m(l,"class","_toastBar svelte-95rq8t"),l.value=e[1],m(t,"class","_toastItem svelte-95rq8t"),V(t,"pe",e[0].pausable)},m(b,w){W(b,t,w),p(t,n),d[i].m(n,null),p(t,r),v&&v.m(t,null),p(t,o),p(t,l),a=!0,c||(f=[Y(t,"mouseenter",e[9]),Y(t,"mouseleave",e[6])],c=!0)},p(b,[w]){let k=i;i=h(b),i===k?d[i].p(b,w):(De(),B(d[k],1,1,()=>{d[k]=null}),Pe(),s=d[i],s?s.p(b,w):(s=d[i]=u[i](b),s.c()),P(s,1),s.m(n,null)),(!a||w&1)&&V(n,"pe",b[0].component),b[0].dismissable?v?v.p(b,w):(v=Sn(b),v.c(),v.m(t,o)):v&&(v.d(1),v=null),(!a||w&2)&&(l.value=b[1]),(!a||w&1)&&V(t,"pe",b[0].pausable)},i(b){a||(P(s),a=!0)},o(b){B(s),a=!1},d(b){b&&F(t),d[i].d(),v&&v.d(),c=!1,he(f)}}}function Wt(e,t="undefined"){return typeof e===t}function Bs(e,t,n){let i,{item:s}=t,r=s.initial,o=r,l=!1,a={},c;const f=Us(s.initial,{duration:s.duration,easing:Xe});j(e,f,_=>n(1,i=_));function u(){Pt.pop(s.id)}function d(){(i===1||i===0)&&u()}function h(){!l&&i!==r&&(f.set(i,{duration:0}),l=!0)}function v(){if(l){const _=s.duration,E=_-_*((i-o)/(r-o));f.set(r,{duration:E}).then(d),l=!1}}function b(_=document){if(Wt(_.hidden))return;const E=()=>_.hidden?h():v(),T="visibilitychange";_.addEventListener(T,E),c=()=>_.removeEventListener(T,E),E()}zt(b),Gt(()=>{Wt(s.onpop,"function")&&s.onpop(s.id),c&&c()});const w=_=>{_ instanceof KeyboardEvent&&["Enter"," "].includes(_.key)&&u()},k=()=>{s.pausable&&h()};return e.$$set=_=>{"item"in _&&n(0,s=_.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(Wt(s.progress)||n(0,s.next=s.progress,s)),e.$$.dirty&131&&r!==s.next&&(n(7,r=s.next),o=i,l=!1,f.set(r).then(d)),e.$$.dirty&1&&s.component){const{props:_={},sendIdTo:E}=s.component;n(2,a={..._,...E&&{[E]:s.id}})}},[s,i,a,f,u,h,v,r,w,k]}class Ks extends qe{constructor(t){super(),Te(this,t,Bs,Ys,be,{item:0})}}function An(e,t,n){const i=e.slice();return i[4]=t[n],i}function Hn(e,t){let n,i,s,r,o,l,a,c,f=X,u;return i=new Ks({props:{item:t[4]}}),{key:e,first:null,c(){var d;n=z("li"),fe(i.$$.fragment),s=S(),m(n,"class",r=Ne((d=t[4].classes)==null?void 0:d.join(" "))+" svelte-1u812xz"),m(n,"style",o=Ln(t[4].theme)),this.first=n},m(d,h){W(d,n,h),re(i,n,null),p(n,s),u=!0},p(d,h){var b;t=d;const v={};h&1&&(v.item=t[4]),i.$set(v),(!u||h&1&&r!==(r=Ne((b=t[4].classes)==null?void 0:b.join(" "))+" svelte-1u812xz"))&&m(n,"class",r),(!u||h&1&&o!==(o=Ln(t[4].theme)))&&m(n,"style",o)},r(){c=n.getBoundingClientRect()},f(){ks(n),f(),Jn(n,c)},a(){f(),f=ws(n,c,Ps,{duration:200})},i(d){u||(P(i.$$.fragment,d),Ee(()=>{u&&(a&&a.end(1),l=Cs(n,Ds,t[4].intro),l.start())}),u=!0)},o(d){B(i.$$.fragment,d),l&&l.invalidate(),a=Ss(n,mt,{}),u=!1},d(d){d&&F(n),ae(i),d&&a&&a.end()}}}function Vs(e){let t,n=[],i=new Map,s,r=e[0];const o=l=>l[4].id;for(let l=0;l<r.length;l+=1){let a=An(e,r,l),c=o(a);i.set(c,n[l]=Hn(c,a))}return{c(){t=z("ul");for(let l=0;l<n.length;l+=1)n[l].c();m(t,"class","_toastContainer svelte-1u812xz")},m(l,a){W(l,t,a);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);s=!0},p(l,[a]){if(a&1){r=l[0],De();for(let c=0;c<n.length;c+=1)n[c].r();n=Ls(n,a,o,1,l,r,i,t,Hs,Hn,null,An);for(let c=0;c<n.length;c+=1)n[c].a();Pe()}},i(l){if(!s){for(let a=0;a<r.length;a+=1)P(n[a]);s=!0}},o(l){for(let a=0;a<n.length;a+=1)B(n[a]);s=!1},d(l){l&&F(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Ln(e){return e?Object.keys(e).reduce((t,n)=>`${t}${n}:${e[n]};`,""):void 0}function Qs(e,t,n){let i;j(e,Pt,l=>n(3,i=l));let{options:s={}}=t,{target:r="default"}=t,o=[];return e.$$set=l=>{"options"in l&&n(1,s=l.options),"target"in l&&n(2,r=l.target)},e.$$.update=()=>{e.$$.dirty&6&&Pt._init(r,s),e.$$.dirty&12&&n(0,o=i.filter(l=>l.target===r))},[o,s,r,i]}class Zs extends qe{constructor(t){super(),Te(this,t,Qs,Vs,be,{options:1,target:2})}}const is="colorMixerParams",xn=localStorage.getItem(is),$n={mode:"whole"},ot=ce([]),Z=ce({triminprogress:!1,isDefined:!1,cancelTrim:!1,index:0,x:0,y:0,width:0,height:0,mode:"whole",expanded:!1}),st=ce({x:0,y:0,width:0,height:0,update:!1}),yt=ce({width:0,height:0,url:"",extension:""}),He=ce(!1),Ot=ce(!1);ce(null);const We=ce(!1),Xt=ce(!1),In=ce(null);ce("");const Gs=ce(null),ye=ce(xn?{...$n,...JSON.parse(xn)}:$n),nn=Fs("_quad");ye.subscribe(e=>{localStorage.setItem(is,JSON.stringify(e))});function Js(e){let t;return{c(){t=z("div"),t.innerHTML=`<svg id="a" xmlns="http://www.w3.org/2000/svg" width="65.454" height="42.886" viewBox="0 0 65.454 42.886" class="svelte-bpckiz"><defs><style>.b {
          fill: none;
          stroke: #fff;
          stroke-linecap: round;
          stroke-linejoin: round;
        }
      </style></defs><polyline class="b" points="36.725 9.196 32.727 5.198 28.729 9.196"></polyline><line class="b" x1="32.727" y1="5.198" x2="32.727" y2="16.615"></line><path class="b" d="m39.92.5h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464V2.964c0-1.358-1.105-2.464-2.464-2.464Z"></path><polyline class="b" points="36.725 33.688 32.727 37.686 28.729 33.688"></polyline><line class="b" x1="32.727" y1="37.686" x2="32.727" y2="27.019"></line><path class="b" d="m42.383,39.92v-14.385c0-1.358-1.105-2.464-2.464-2.464h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464Z"></path><polyline class="b" points="9.196 28.732 5.198 32.73 9.196 36.728"></polyline><line class="b" x1="5.198" y1="32.73" x2="15.865" y2="32.73"></line><path class="b" d="m.5,25.537v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464v-14.385c0-1.358-1.105-2.464-2.464-2.464H2.964c-1.358,0-2.464,1.105-2.464,2.464Z"></path><polyline class="b" points="56.259 28.732 60.257 32.73 56.259 36.728"></polyline><line class="b" x1="60.257" y1="32.73" x2="49.59" y2="32.73"></line><path class="b" d="m62.491,23.074h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464v-14.385c0-1.358-1.105-2.464-2.464-2.464Z"></path></svg>`,m(t,"class","icon")},m(n,i){W(n,t,i)},p:X,i:X,o:X,d(n){n&&F(t)}}}class xt extends qe{constructor(t){super(),Te(this,t,null,Js,be,{})}}function ei(e){let t,n,i,s,r,o,l,a,c,f,u,d,h,v,b,w,k,_,E,T,g,q,H,L,G,Q,U,O,se,A,pe,te,ue,de,le,oe,me,we,Ce,Fe,Re,M,$,I,R,K,x,ve,Se,Le,ke,y,C,N,D,J,ie,ze,ge,xe,Ye,sn,ln,at,Be,Mt,on,Ke,rn,an,ct,Ve,Et,cn,Qe,un,dn,ut,$e,Tt,fn,qt,pn,Ze,mn,hn,Ct,gn,St,vn,At,_n,Ht,yn,je,bn,wn,kn,dt,zn,ft,Ie,Oe,Rt,Mn;return Ye=new xt({}),Ke=new xt({}),Qe=new xt({}),Ze=new xt({}),{c(){t=z("div"),i=S(),s=z("div"),r=z("div"),o=S(),l=z("h3"),l.textContent="Quickly trim, save and copy to the clipboard images opened directly in a browser window.",a=S(),c=z("p"),c.textContent="Works with PNG, WebP and JPEG formats.",f=S(),u=z("div"),d=z("div"),d.innerHTML=`<div class="icon-row svelte-115cz9v"><div class="icon-unit svelte-115cz9v"><div id="icon-mode-whole" class="icon-mode-whole svelte-115cz9v"></div> 
          <label for="icon-mode-whole" class="svelte-115cz9v"><span class="svelte-115cz9v">Whole</span></label></div> 
        <div class="icon-unit svelte-115cz9v"><div id="icon-mode-quadrant" class="icon-mode-quadrant svelte-115cz9v"></div> 
          <label for="icon-mode-quadrant" class="svelte-115cz9v"><span class="svelte-115cz9v">Quadrant</span></label></div></div>`,h=S(),v=z("div"),v.innerHTML=`<h4 class="svelte-115cz9v">Modes</h4> 
      <p class="svelte-115cz9v">Whole mode is based on the entire image. Quadrant mode splits the image into four equal quadrants. In quadrant mode, hover over individual quadrant to activate.</p>`,b=S(),w=z("div"),w.innerHTML=`<div class="icon-group svelte-115cz9v"><div class="icon-row svelte-115cz9v"><div class="icon-unit svelte-115cz9v"><div id="icon-expand" class="icon-expand svelte-115cz9v"></div> 
            <label for="icon-expand" class="svelte-115cz9v"><span class="svelte-115cz9v">Expand</span></label></div> 
          <div class="icon-unit svelte-115cz9v"><div id="icon-shrink" class="icon-shrink svelte-115cz9v"></div> 
            <label for="icon-shrink" class="svelte-115cz9v"><span class="svelte-115cz9v">Shrink</span></label></div></div></div>`,k=S(),_=z("div"),_.innerHTML=`<h4 class="svelte-115cz9v">Expand/Shrink</h4> 
      <p class="svelte-115cz9v">Expand quadrant to fill screen/shrink return to 4 quadrants.</p>`,E=S(),T=z("div"),T.innerHTML='<div class="icon-unit svelte-115cz9v"><div class="icon-triminactive svelte-115cz9v"></div></div>',g=S(),q=z("div"),q.innerHTML=`<h4 class="svelte-115cz9v">Trim</h4> 
      <p class="svelte-115cz9v">Draw a rectangular trim area to save or copy part of an image. Click-drag within trim area to move. Drag handles to adjust size. Click outside trim area to reset. Trim tool is only available in a quadrant when expanded.</p>`,H=S(),L=z("div"),L.innerHTML='<div class="icon-unit svelte-115cz9v"><div class="icon-clipboard svelte-115cz9v"></div></div>',G=S(),Q=z("div"),Q.innerHTML=`<h4 class="svelte-115cz9v">Copy</h4> 
      <p class="svelte-115cz9v">Copies the image to the clipboard.</p>`,U=S(),O=z("div"),O.innerHTML='<div class="icon-unit svelte-115cz9v"><div class="icon-download svelte-115cz9v"></div></div>',se=S(),A=z("div"),A.innerHTML=`<h4 class="svelte-115cz9v">Download</h4> 
      <p class="svelte-115cz9v">Saves the image to the browser download directory.</p>`,pe=S(),te=z("div"),te.innerHTML='<div class="icon-unit svelte-115cz9v"></div>',ue=S(),de=z("div"),le=z("h4"),le.textContent="Filename",oe=S(),me=z("p"),we=ee('Click on filename area to edit. Quadrants are suffixed with "'),Ce=ee(e[0]),Fe=ee('1", "'),Re=ee(e[0]),M=ee('2" '),$=z("em"),$.textContent="etc.",I=ee(" unless manually edited."),R=S(),K=z("div"),x=S(),ve=z("div"),Se=z("h4"),Se.textContent="Keyboard Shortcuts",Le=S(),ke=z("div"),y=z("ul"),C=z("li"),C.innerHTML='<span class="keycap svelte-115cz9v">M</span> Toggle between whole and quadrant modes',N=S(),D=z("li"),D.innerHTML='<span class="keycap svelte-115cz9v">F</span> Toggle fullscreen mode (in quadrant mode)',J=S(),ie=z("li"),ie.innerHTML='<span class="keycap svelte-115cz9v">T</span> Activate trim tool',ze=S(),ge=z("li"),xe=z("div"),fe(Ye.$$.fragment),sn=ee(`
            Nudge trim frame`),ln=S(),at=z("li"),Be=z("div"),Mt=z("span"),Mt.textContent="Shift",on=ee("+ "),fe(Ke.$$.fragment),rn=ee(`
            Nudge trim frame by 10`),an=S(),ct=z("li"),Ve=z("div"),Et=z("span"),Et.textContent="Ctrl",cn=ee("+ "),fe(Qe.$$.fragment),un=ee(`
            Extend trim frame`),dn=S(),ut=z("li"),$e=z("div"),Tt=z("span"),Tt.textContent="Shift",fn=ee(" + "),qt=z("span"),qt.textContent="Ctrl",pn=ee(" + "),fe(Ze.$$.fragment),mn=ee(`
            Extend trim frame by 10`),hn=S(),Ct=z("li"),Ct.innerHTML='<span class="keycap svelte-115cz9v">D</span> Download full image or trim area.',gn=S(),St=z("li"),St.innerHTML=`<div class="combo svelte-115cz9v"><span class="keycap svelte-115cz9v">Shift</span>+ <span class="keycap svelte-115cz9v">D</span></div>
            Download all quadrants at once.`,vn=S(),At=z("li"),At.innerHTML='<span class="keycap svelte-115cz9v">C</span> Copy full image or trim area to clipboard',_n=S(),Ht=z("li"),Ht.innerHTML='<span class="keycap svelte-115cz9v">Esc</span> Exit actions or tools',yn=S(),je=z("p"),bn=ee("@"),wn=ee(e[1]),kn=S(),dt=z("a"),dt.textContent="Sideways Design",zn=S(),ft=z("div"),m(t,"class","help-page-overlay svelte-115cz9v"),m(r,"class","wordmark svelte-115cz9v"),m(l,"class","svelte-115cz9v"),m(c,"class","center svelte-115cz9v"),m(d,"class","icon-group svelte-115cz9v"),m(v,"class","help-text svelte-115cz9v"),m(w,"class","icon-group svelte-115cz9v"),m(_,"class","help-text svelte-115cz9v"),m(T,"class","icon-group svelte-115cz9v"),m(q,"class","help-text svelte-115cz9v"),m(L,"class","icon-group svelte-115cz9v"),m(Q,"class","help-text svelte-115cz9v"),m(O,"class","icon-group svelte-115cz9v"),m(A,"class","help-text svelte-115cz9v"),m(te,"class","icon-group svelte-115cz9v"),m(le,"class","svelte-115cz9v"),m(me,"class","svelte-115cz9v"),m(de,"class","help-text svelte-115cz9v"),m(K,"class","svelte-115cz9v"),m(Se,"class","sm-center gap-top svelte-115cz9v"),m(C,"class","svelte-115cz9v"),m(D,"class","svelte-115cz9v"),m(ie,"class","svelte-115cz9v"),m(xe,"class","combo svelte-115cz9v"),m(ge,"class","svelte-115cz9v"),m(Mt,"class","keycap svelte-115cz9v"),m(Be,"class","combo svelte-115cz9v"),m(at,"class","svelte-115cz9v"),m(Et,"class","keycap svelte-115cz9v"),m(Ve,"class","combo svelte-115cz9v"),m(ct,"class","svelte-115cz9v"),m(Tt,"class","keycap svelte-115cz9v"),m(qt,"class","keycap svelte-115cz9v"),m($e,"class","combo svelte-115cz9v"),m(ut,"class","svelte-115cz9v"),m(Ct,"class","svelte-115cz9v"),m(St,"class","svelte-115cz9v"),m(At,"class","svelte-115cz9v"),m(Ht,"class","svelte-115cz9v"),m(y,"class","nobullets shortcut-list svelte-115cz9v"),m(ke,"class","shortcuts-section svelte-115cz9v"),m(ve,"class","help-text svelte-115cz9v"),m(u,"class","help-grid svelte-115cz9v"),m(dt,"href","https://sidewaysdesign.com/"),m(dt,"class","svelte-115cz9v"),m(je,"class","year svelte-115cz9v"),m(ft,"class","icon-close svelte-115cz9v"),m(s,"class","help-page-wrapper svelte-115cz9v")},m(ne,Ge){W(ne,t,Ge),W(ne,i,Ge),W(ne,s,Ge),p(s,r),p(s,o),p(s,l),p(s,a),p(s,c),p(s,f),p(s,u),p(u,d),p(u,h),p(u,v),p(u,b),p(u,w),p(u,k),p(u,_),p(u,E),p(u,T),p(u,g),p(u,q),p(u,H),p(u,L),p(u,G),p(u,Q),p(u,U),p(u,O),p(u,se),p(u,A),p(u,pe),p(u,te),p(u,ue),p(u,de),p(de,le),p(de,oe),p(de,me),p(me,we),p(me,Ce),p(me,Fe),p(me,Re),p(me,M),p(me,$),p(me,I),p(u,R),p(u,K),p(u,x),p(u,ve),p(ve,Se),p(ve,Le),p(ve,ke),p(ke,y),p(y,C),p(y,N),p(y,D),p(y,J),p(y,ie),p(y,ze),p(y,ge),p(ge,xe),re(Ye,xe,null),p(ge,sn),p(y,ln),p(y,at),p(at,Be),p(Be,Mt),p(Be,on),re(Ke,Be,null),p(at,rn),p(y,an),p(y,ct),p(ct,Ve),p(Ve,Et),p(Ve,cn),re(Qe,Ve,null),p(ct,un),p(y,dn),p(y,ut),p(ut,$e),p($e,Tt),p($e,fn),p($e,qt),p($e,pn),re(Ze,$e,null),p(ut,mn),p(y,hn),p(y,Ct),p(y,gn),p(y,St),p(y,vn),p(y,At),p(y,_n),p(y,Ht),p(s,yn),p(s,je),p(je,bn),p(je,wn),p(je,kn),p(je,dt),p(s,zn),p(s,ft),Oe=!0,Rt||(Mn=[Y(t,"click",e[2]),Y(t,"keydown",e[3]),Y(ft,"keydown",e[3]),Y(ft,"click",e[2])],Rt=!0)},p(ne,[Ge]){(!Oe||Ge&1)&&nt(Ce,ne[0]),(!Oe||Ge&1)&&nt(Re,ne[0])},i(ne){Oe||(Ee(()=>{Oe&&(n||(n=Lt(t,mt,{duration:250},!0)),n.run(1))}),P(Ye.$$.fragment,ne),P(Ke.$$.fragment,ne),P(Qe.$$.fragment,ne),P(Ze.$$.fragment,ne),Ee(()=>{Oe&&(Ie||(Ie=Lt(s,mt,{duration:375},!0)),Ie.run(1))}),Oe=!0)},o(ne){n||(n=Lt(t,mt,{duration:250},!1)),n.run(0),B(Ye.$$.fragment,ne),B(Ke.$$.fragment,ne),B(Qe.$$.fragment,ne),B(Ze.$$.fragment,ne),Ie||(Ie=Lt(s,mt,{duration:375},!1)),Ie.run(0),Oe=!1},d(ne){ne&&F(t),ne&&n&&n.end(),ne&&F(i),ne&&F(s),ae(Ye),ae(Ke),ae(Qe),ae(Ze),ne&&Ie&&Ie.end(),Rt=!1,he(Mn)}}}function ti(e,t,n){let i;j(e,nn,c=>n(0,i=c));let{popupOpen:s}=t;const r=new Date().getFullYear();zt(()=>document.addEventListener("keydown",o)),Gt(()=>document.removeEventListener("keydown",o));function o(c){const u={Escape:()=>n(4,s=!1)}[c.key];u&&u(c)}const l=()=>n(4,s=!1);function a(c){c.key==="Escape"&&l()}return e.$$set=c=>{"popupOpen"in c&&n(4,s=c.popupOpen)},[i,r,l,a,s]}class ni extends qe{constructor(t){super(),Te(this,t,ti,ei,be,{popupOpen:4})}}function On(e){let t,n,i;function s(o){e[13](o)}let r={};return e[1]!==void 0&&(r.popupOpen=e[1]),t=new ni({props:r}),Ae.push(()=>Os(t,"popupOpen",s)),{c(){fe(t.$$.fragment)},m(o,l){re(t,o,l),i=!0},p(o,l){const a={};!n&&l&2&&(n=!0,a.popupOpen=o[1],Es(()=>n=!1)),t.$set(a)},i(o){i||(P(t.$$.fragment,o),i=!0)},o(o){B(t.$$.fragment,o),i=!1},d(o){ae(t,o)}}}function si(e){let t,n,i,s,r,o,l,a,c,f,u,d,h,v,b,w,k,_,E,T=e[1]&&On(e);return{c(){t=z("div"),n=z("div"),i=z("div"),s=S(),r=z("div"),r.innerHTML=`<div class="wordmark svelte-7qk3k3"></div> 
      <p class="byline svelte-7qk3k3"><a href="https://sidewaysdesign.com" target="blank" class="svelte-7qk3k3">by Sideways Design</a></p>`,o=S(),l=z("div"),a=S(),c=z("div"),f=z("div"),f.innerHTML='<span class="tooltip svelte-7qk3k3">Whole Image</span>',u=S(),d=z("div"),d.innerHTML='<span class="tooltip svelte-7qk3k3">Quadrants</span>',h=S(),v=z("div"),b=S(),T&&T.c(),w=kt(),m(i,"class","mode-control-hide1 svelte-7qk3k3"),m(i,"aria-hidden","true"),m(l,"class","mode-control-info svelte-7qk3k3"),m(f,"class","mode-control mode-control-whole svelte-7qk3k3"),m(f,"aria-label","Whole Image"),m(f,"tabindex","-2"),V(f,"active",e[3].mode==="whole"),m(d,"class","mode-control mode-control-quadrant svelte-7qk3k3"),m(d,"aria-label","Quadrant"),m(d,"tabindex","-1"),V(d,"active",e[3].mode==="quadrant"),m(c,"class","mode-control-container svelte-7qk3k3"),m(v,"aria-hidden","true"),m(v,"class","mode-control-hide2 svelte-7qk3k3"),m(n,"class","mode-control-group svelte-7qk3k3"),m(t,"class","mode-control-wrapper svelte-7qk3k3"),V(t,"tucked",e[0]),V(t,"triminprogress",e[2].triminprogress)},m(g,q){W(g,t,q),p(t,n),p(n,i),p(n,s),p(n,r),p(n,o),p(n,l),p(n,a),p(n,c),p(c,f),p(c,u),p(c,d),p(n,h),p(n,v),W(g,b,q),T&&T.m(g,q),W(g,w,q),k=!0,_||(E=[Y(i,"click",e[7]),Y(l,"keydown",e[6]),Y(l,"click",e[5]),Y(f,"keydown",e[9]),Y(f,"click",e[10]),Y(d,"keydown",e[11]),Y(d,"click",e[12]),Y(v,"click",e[8])],_=!0)},p(g,[q]){(!k||q&8)&&V(f,"active",g[3].mode==="whole"),(!k||q&8)&&V(d,"active",g[3].mode==="quadrant"),(!k||q&1)&&V(t,"tucked",g[0]),(!k||q&4)&&V(t,"triminprogress",g[2].triminprogress),g[1]?T?(T.p(g,q),q&2&&P(T,1)):(T=On(g),T.c(),P(T,1),T.m(w.parentNode,w)):T&&(De(),B(T,1,1,()=>{T=null}),Pe())},i(g){k||(P(T),k=!0)},o(g){B(T),k=!1},d(g){g&&F(t),g&&F(b),T&&T.d(g),g&&F(w),_=!1,he(E)}}}function ii(e,t,n){let i,s;j(e,Z,k=>n(2,i=k)),j(e,ye,k=>n(3,s=k));let r=!1,o=!1;const l=k=>{Z.update(_=>({..._,cancelTrim:!0})),k==="quadrant"&&(Z.update(_=>({..._,index:1})),ye.update(_=>({..._,mode:"quadrant"}))),k==="whole"&&(We.set(!1),Z.update(_=>({..._,index:0,expanded:!1})),ye.update(_=>({..._,mode:"whole"})))},a=()=>n(1,o=!0),c=k=>{k.key==="?"&&n(1,o=!0)},f=()=>{n(0,r=!0)},u=()=>{n(0,r=!1)},d=k=>k.key.toLowerCase()==="m"&&l("whole"),h=()=>l("whole"),v=k=>k.key.toLowerCase()==="m"&&l("quadrant"),b=()=>l("quadrant");function w(k){o=k,n(1,o)}return[r,o,i,s,l,a,c,f,u,d,h,v,b,w]}class li extends qe{constructor(t){super(),Te(this,t,ii,si,be,{})}}const ls=(e,t)=>{He.set(!1),We.update(n=>!n),t("expandaction")},os=()=>{Qt(He)?Z.update(e=>({...e,cancelTrim:!0})):He.set(!0)},oi=(e,t)=>{e===Qt(Z).index&&t("imageaction","download")},ri=(e,t)=>{e===Qt(Z).index&&t("imageaction","clipboard")},ai=()=>{const e=document.activeElement;return e instanceof HTMLElement&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"||e.tagName==="FORM"||e.contentEditable==="true")};function Nn(e,t,n){const i=e.slice();return i[39]=t[n],i}function Dn(e){let t,n,i,s=Math.floor(e[1].x*e[9])+"",r,o,l,a,c=Math.floor(e[1].y*e[9])+"",f,u,d,h,v=Math.floor(e[1].width*e[9])+"",b,w,k,_,E=Math.floor(e[1].height*e[9])+"",T;return{c(){t=z("div"),n=z("p"),i=z("span"),i.textContent="x:",r=ee(s),o=S(),l=z("p"),a=z("span"),a.textContent="y:",f=ee(c),u=S(),d=z("p"),h=z("span"),h.textContent="w:",b=ee(v),w=S(),k=z("p"),_=z("span"),_.textContent="h:",T=ee(E),m(i,"class","svelte-12d3pxi"),m(n,"class","svelte-12d3pxi"),m(a,"class","svelte-12d3pxi"),m(l,"class","svelte-12d3pxi"),m(h,"class","svelte-12d3pxi"),m(d,"class","svelte-12d3pxi"),m(_,"class","svelte-12d3pxi"),m(k,"class","svelte-12d3pxi"),m(t,"class","trim-stats svelte-12d3pxi")},m(g,q){W(g,t,q),p(t,n),p(n,i),p(n,r),p(t,o),p(t,l),p(l,a),p(l,f),p(t,u),p(t,d),p(d,h),p(d,b),p(t,w),p(t,k),p(k,_),p(k,T)},p(g,q){q[0]&2&&s!==(s=Math.floor(g[1].x*g[9])+"")&&nt(r,s),q[0]&2&&c!==(c=Math.floor(g[1].y*g[9])+"")&&nt(f,c),q[0]&2&&v!==(v=Math.floor(g[1].width*g[9])+"")&&nt(b,v),q[0]&2&&E!==(E=Math.floor(g[1].height*g[9])+"")&&nt(T,E)},d(g){g&&F(t)}}}function Pn(e){let t;return{c(){t=_e("rect"),m(t,"class","handle svelte-12d3pxi"),m(t,"id",e[39].id),m(t,"x","-100"),m(t,"y","-100"),m(t,"width",$t),m(t,"height",$t),Zn(t,"cursor",e[39].cursor),m(t,"rx",$t/2),m(t,"ry",$t/2)},m(n,i){W(n,t,i)},p:X,d(n){n&&F(t)}}}function ci(e){let t,n,i,s,r,o,l,a,c,f,u,d,h=(e[8]||e[5]||e[7]||e[6])&&Dn(e),v=e[10],b=[];for(let w=0;w<v.length;w+=1)b[w]=Pn(Nn(e,v,w));return{c(){t=z("div"),n=z("div"),h&&h.c(),i=S(),s=_e("svg"),r=_e("defs"),o=_e("rect"),l=_e("clipPath"),a=_e("use"),c=_e("use"),f=_e("use"),u=_e("path"),d=_e("rect");for(let w=0;w<b.length;w+=1)b[w].c();m(n,"class","trim-stats-container svelte-12d3pxi"),m(o,"vector-effect","non-scaling-stroke"),m(o,"shape-rendering","geometricPrecision"),m(o,"id","bbox"),m(o,"x","0"),m(o,"y","0"),m(o,"width","0"),m(o,"height","0"),jt(a,"xlink:href","#bbox"),m(l,"id","insideStrokeOnly"),jt(c,"xlink:href","#bbox"),m(c,"stroke-width","2px"),m(c,"stroke","white"),m(c,"fill","none"),m(c,"clip-path","url(#insideStrokeOnly)"),jt(f,"xlink:href","#bbox"),m(f,"stroke-width","2px"),m(f,"stroke-dasharray","2,2"),m(f,"stroke","#777"),m(f,"fill","none"),m(f,"clip-path","url(#insideStrokeOnly)"),m(u,"id",rs),m(u,"fill","#000"),m(u,"d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z"),m(u,"fill-rule","evenodd"),m(u,"opacity","0.5"),m(d,"id",as),m(d,"x","-100"),m(d,"y","-100"),m(d,"width","0"),m(d,"height","0"),Zn(d,"cursor","grab"),m(d,"fill","transparent"),m(s,"width","100%"),m(s,"height","100%"),m(s,"class","inactive svelte-12d3pxi"),m(t,"class","trim-stage svelte-12d3pxi")},m(w,k){W(w,t,k),p(t,n),h&&h.m(n,null),e[14](n),p(t,i),p(t,s),p(s,r),p(r,o),e[15](o),p(r,l),p(l,a),p(s,c),p(s,f),p(s,u),e[16](u),p(s,d);for(let _=0;_<b.length;_+=1)b[_]&&b[_].m(s,null);e[17](s)},p(w,k){if(w[8]||w[5]||w[7]||w[6]?h?h.p(w,k):(h=Dn(w),h.c(),h.m(n,null)):h&&(h.d(1),h=null),k[0]&1024){v=w[10];let _;for(_=0;_<v.length;_+=1){const E=Nn(w,v,_);b[_]?b[_].p(E,k):(b[_]=Pn(E),b[_].c(),b[_].m(s,null))}for(;_<b.length;_+=1)b[_].d(1);b.length=v.length}},i:X,o:X,d(w){w&&F(t),h&&h.d(),e[14](null),e[15](null),e[16](null),Qn(b,w),e[17](null)}}}const rs="focusOverlay",as="movehandle",$t=14;function ui(e,t,n){let i,s;j(e,yt,M=>n(26,i=M)),j(e,st,M=>n(1,s=M));let{frameSpecs:r}=t,o,l,a,c,f,u,d=r.width,h=r.height,v=r.x1,b=r.y1,w=r.factor,k=!1,_=!1,E=!1,T,g,q,H,L,G={x:v,y:b,width:d,height:h},Q=!1,U,O;const se=[{id:"top-left",cursor:"nw-resize"},{id:"top-right",cursor:"ne-resize"},{id:"bottom-left",cursor:"sw-resize"},{id:"bottom-right",cursor:"se-resize"}];zt(()=>{o.addEventListener("mousedown",A),o.addEventListener("mousemove",pe),o.addEventListener("mouseup",te),se.forEach(M=>{M.ref=document.querySelector(`svg #${M.id}`)}),u=document.querySelector(`svg #${as}`),n(2,a=document.querySelector(`svg #${rs}`)),a.addEventListener("click",me)});async function A(M){l=o.getBoundingClientRect(),H=l.left,L=l.top,console.log(H),M.target===o?(g=(M.clientX-H)/U,q=(M.clientY-L)/O,n(5,k=!0),o.classList.remove("inactive"),a.setAttribute("d",`M0,0H${l.width}V${l.height}H0Z`)):M.target.classList.contains("handle")?(g=M.clientX-H,q=M.clientY-L,n(6,_=!0),T=M.target):M.target.id==="movehandle"&&(g=M.clientX-H-s.x*U,q=M.clientY-L-s.y*O,n(7,E=!0)),Z.update($=>({...$,triminprogress:!0})),E||window.addEventListener("mousemove",ue)}function pe(M){let $,I,R,K;if(k)$=Math.min(g,(M.clientX-H)/U),I=Math.min(q,(M.clientY-L)/O),R=Math.abs(g-(M.clientX-H)/U),K=Math.abs(q-(M.clientY-L)/O);else if(_){const x=s;switch($=x.x,I=x.y,R=x.width,K=x.height,T.id){case"top-left":$=Math.min((M.clientX-H)/U,x.x+x.width),I=Math.min((M.clientY-L)/O,x.y+x.height),R=Math.abs(x.x+x.width-$),K=Math.abs(x.y+x.height-I);break;case"top-right":I=Math.min((M.clientY-L)/O,x.y+x.height),R=Math.abs(M.clientX-H-x.x*U)/U,K=Math.abs(x.y+x.height-I);break;case"bottom-left":$=Math.min((M.clientX-H)/U,x.x+x.width),R=Math.abs(x.x+x.width-$),K=Math.abs((M.clientY-L-x.y*O)/O);break;case"bottom-right":R=Math.abs((M.clientX-H-x.x*U)/U),K=Math.abs((M.clientY-L-x.y*O)/O);break}}else E&&($=Math.min(Math.max(0,(M.clientX-H-g)/U),d-s.width),I=Math.min(Math.max(0,(M.clientY-L-q)/O),h-s.height),R=s.width,K=s.height);(k||_||E)&&(oe($*U,I*O,R*U,K*O),le($*U,I*O,R*U,K*O),st.update(x=>({...x,x:$,y:I,width:R,height:K})))}function te(){E||window.removeEventListener("mousemove",ue),n(5,k=!1),n(6,_=!1),n(7,E=!1),n(8,Q=!!(s.width&&s.height)),Q&&Z.update(M=>({...M,...G})),Z.update(M=>({...M,isDefined:Q,triminprogress:!1}))}const ue=M=>{if(l=o.getBoundingClientRect(),M.buttons===1){let $=M.clientX<l.left?-1:M.clientX>l.right?1:0,I=M.clientY<l.top?-1:M.clientY>l.bottom?1:0;($||I)&&(de($,I),te())}},de=(M,$)=>{let{x:I,y:R,width:K,height:x}=s,ve=I,Se=R,Le=K,ke=x;M>0&&(Le=i.width-I),M<0&&(ve=0,Le=I+K),$>0&&(ke=i.height-R),$<0&&(Se=0,ke=R+x),st.update(y=>({...y,x:ve,y:Se,width:Le,height:ke,update:!0}))};function le(M,$,I,R){console.log("updateFrameArea",M,$,I,R),n(3,c.style.left=`${M+I/2}px`,c),n(3,c.style.top=`${$+R/2}px`,c)}function oe(M,$,I,R){f.setAttribute("x",M),f.setAttribute("y",$),f.setAttribute("width",I),f.setAttribute("height",R),u.setAttribute("x",M),u.setAttribute("y",$),u.setAttribute("width",I),u.setAttribute("height",R),se.forEach(K=>{const x=K.ref;switch(K.id){case"top-left":x.setAttribute("x",M),x.setAttribute("y",$);break;case"top-right":x.setAttribute("x",M+I),x.setAttribute("y",$);break;case"bottom-left":x.setAttribute("x",M),x.setAttribute("y",$+R);break;case"bottom-right":x.setAttribute("x",M+I),x.setAttribute("y",$+R);break}}),a.setAttribute("d",`M0,0H${l.width}V${l.height}H0ZM${M},${$}H${M+I}V${$+R}H${M}Z`)}function me(){n(8,Q=!1),Z.update(M=>({...M,isDefined:!1,cancelTrim:!0})),oe(-100,-100,0,0),se.forEach(M=>{M.ref.setAttribute("x",-100),M.ref.setAttribute("y",-100)}),a.setAttribute("d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z")}function we(M){Ae[M?"unshift":"push"](()=>{c=M,n(3,c)})}function Ce(M){Ae[M?"unshift":"push"](()=>{f=M,n(4,f)})}function Fe(M){Ae[M?"unshift":"push"](()=>{a=M,n(2,a)})}function Re(M){Ae[M?"unshift":"push"](()=>{o=M,n(0,o)})}return e.$$set=M=>{"frameSpecs"in M&&n(11,r=M.frameSpecs)},e.$$.update=()=>{if(e.$$.dirty[0]&1&&(n(12,U=o?o.clientWidth/d:1),n(13,O=o?o.clientHeight/h:1)),e.$$.dirty[0]&3&&o&&(G={x:Math.floor(s.x*w+v),y:Math.floor(s.y*w+b),width:Math.floor(s.width*w),height:Math.floor(s.height*w)}),e.$$.dirty[0]&12290&&s.update){let{x:M,y:$,width:I,height:R}=s;st.update(K=>({...K,update:!1})),le(M*U,$*O,I*U,R*O),oe(M*U,$*O,I*U,R*O),Z.update(K=>({...K,x:M*w+v,y:$*w+b,width:I*w,height:R*w}))}},[o,s,a,c,f,k,_,E,Q,w,se,r,U,O,we,Ce,Fe,Re]}class di extends qe{constructor(t){super(),Te(this,t,ui,ci,be,{frameSpecs:11},null,[-1,-1])}}function Fn(e){let t,n,i;return n=new di({props:{frameSpecs:e[1]}}),{c(){t=z("div"),fe(n.$$.fragment),m(t,"class","trim-action svelte-p4kpd7")},m(s,r){W(s,t,r),re(n,t,null),i=!0},p(s,r){const o={};r&2&&(o.frameSpecs=s[1]),n.$set(o)},i(s){i||(P(n.$$.fragment,s),i=!0)},o(s){B(n.$$.fragment,s),i=!1},d(s){s&&F(t),ae(n)}}}function Rn(e){let t,n,i,s;return{c(){t=z("button"),m(t,"tabindex","0"),m(t,"class",n=Ne(`isolate-control ${e[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-p4kpd7")},m(r,o){W(r,t,o),i||(s=Y(t,"click",e[20]),i=!0)},p(r,o){o&256&&n!==(n=Ne(`isolate-control ${r[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-p4kpd7")&&m(t,"class",n)},d(r){r&&F(t),i=!1,s()}}}function jn(e){let t,n,i,s;return{c(){t=z("button"),m(t,"tabindex","0"),m(t,"class",n=Ne(`isolate-control ${e[9]&&e[6]?"icon-shrink":"icon-expand"}`)+" svelte-p4kpd7")},m(r,o){W(r,t,o),i||(s=Y(t,"click",e[21]),i=!0)},p(r,o){o&576&&n!==(n=Ne(`isolate-control ${r[9]&&r[6]?"icon-shrink":"icon-expand"}`)+" svelte-p4kpd7")&&m(t,"class",n)},d(r){r&&F(t),i=!1,s()}}}function fi(e){let t,n,i,s,r,o,l,a,c,f,u,d,h,v,b,w,k,_=e[8]&&e[6]&&Fn(e),E=(e[7]!=="quadrant"||e[9])&&Rn(e),T=e[7]==="quadrant"&&jn(e);return{c(){t=z("div"),_&&_.c(),n=S(),i=z("div"),s=z("div"),r=z("div"),o=z("div"),l=ee(e[5]),a=S(),c=z("button"),f=S(),u=z("button"),d=S(),h=z("div"),E&&E.c(),v=S(),T&&T.c(),m(o,"class","filename-text svelte-p4kpd7"),m(o,"tabindex","-1"),m(o,"contenteditable",""),e[5]===void 0&&Ee(()=>e[17].call(o)),V(o,"editing",e[4]),m(c,"class","icon-download svelte-p4kpd7"),m(r,"class","filename-area svelte-p4kpd7"),m(r,"data-index",e[0]),m(u,"class","icon-clipboard svelte-p4kpd7"),m(s,"class","controls-wrapper svelte-p4kpd7"),m(h,"class","isolate-controls svelte-p4kpd7"),m(i,"class","image-action svelte-p4kpd7"),m(t,"class","svelte-p4kpd7"),V(t,"triminprogress",e[3].triminprogress)},m(g,q){W(g,t,q),_&&_.m(t,null),p(t,n),p(t,i),p(i,s),p(s,r),p(r,o),p(o,l),e[16](o),e[5]!==void 0&&(o.textContent=e[5]),p(r,a),p(r,c),p(s,f),p(s,u),p(i,d),p(i,h),E&&E.m(h,null),p(h,v),T&&T.m(h,null),b=!0,w||(k=[Y(o,"blur",e[12]),Y(o,"input",e[17]),Y(o,"click",ms(e[11])),Y(o,"keydown",e[14]),Y(c,"click",e[18]),Y(u,"click",e[19]),Y(t,"blur",e[13])],w=!0)},p(g,[q]){g[8]&&g[6]?_?(_.p(g,q),q&320&&P(_,1)):(_=Fn(g),_.c(),P(_,1),_.m(t,n)):_&&(De(),B(_,1,1,()=>{_=null}),Pe()),(!b||q&32)&&gs(l,g[5]),q&32&&g[5]!==o.textContent&&(o.textContent=g[5]),(!b||q&16)&&V(o,"editing",g[4]),(!b||q&1)&&m(r,"data-index",g[0]),g[7]!=="quadrant"||g[9]?E?E.p(g,q):(E=Rn(g),E.c(),E.m(h,v)):E&&(E.d(1),E=null),g[7]==="quadrant"?T?T.p(g,q):(T=jn(g),T.c(),T.m(h,null)):T&&(T.d(1),T=null),(!b||q&8)&&V(t,"triminprogress",g[3].triminprogress)},i(g){b||(P(_),b=!0)},o(g){B(_),b=!1},d(g){g&&F(t),_&&_.d(),e[16](null),E&&E.d(),T&&T.d(),w=!1,he(k)}}}function pi(e,t,n){let i,s,r,o,l,a,c,f,u;j(e,nn,A=>n(23,r=A)),j(e,ot,A=>n(24,o=A)),j(e,Z,A=>n(3,l=A)),j(e,ye,A=>n(15,a=A)),j(e,Ot,A=>n(4,c=A)),j(e,He,A=>n(8,f=A)),j(e,We,A=>n(9,u=A));let{index:d}=t,{frameSpecs:h}=t,v,b;const w=Jt(),k=()=>{b=o[d],Gs.set(v),Ot.set(!0)},_=()=>{let A=v.innerText;if(!A||A.length===0){n(5,E=b.trim());return}g(A),Ot.set(!1),v.blur()};let E=o[d];const T=A=>{He.set(!1),We.set(!1)},g=A=>{let te=o.slice();if(d===0){let ue=Array.from({length:4},(de,le)=>`${o[0]}${r}${le+1}`);te[d]=A,te.forEach((de,le)=>{if(le>0){let oe=ue[le-1];oe&&de===oe&&(te[le]=`${A}${r}${le}`)}})}else te[d]=A;ot.set(te)},q=A=>{},H=A=>{A.key==="Enter"&&v.blur(),A.key==="Escape"&&(n(2,v.innerText=b,v),v.blur())};function L(A){Ae[A?"unshift":"push"](()=>{v=A,n(2,v)})}function G(){E=this.textContent,n(5,E)}const Q=()=>oi(d,w),U=()=>ri(d,w),O=()=>os(),se=()=>ls(d,w);return e.$$set=A=>{"index"in A&&n(0,d=A.index),"frameSpecs"in A&&n(1,h=A.frameSpecs)},e.$$.update=()=>{e.$$.dirty&20&&c&&Ms().then(()=>q()),e.$$.dirty&8&&l.cancelTrim&&(He.set(!1),Z.update(A=>({...A,cancelTrim:!1,isDefined:!1,triminprogress:!1}))),e.$$.dirty&32768&&n(7,i=a.mode),e.$$.dirty&9&&n(6,s=l.index===d)},[d,h,v,l,c,E,s,i,f,u,w,k,_,T,H,a,L,G,Q,U,O,se]}class cs extends qe{constructor(t){super(),Te(this,t,pi,fi,be,{index:0,frameSpecs:1})}}function mi(e,t,n){let i,s,r,o,l,a,c;j(e,yt,g=>n(2,s=g)),j(e,st,g=>n(3,r=g)),j(e,We,g=>n(4,g)),j(e,He,g=>n(5,o=g)),j(e,Ot,g=>n(6,l=g)),j(e,ye,g=>n(7,a=g)),j(e,ot,g=>n(8,g)),j(e,Z,g=>n(0,c=g));const f=Jt(),u=g=>{a.mode!=="quadrant"&&(Z.update(q=>({...q,index:g,cancelTrim:!0})),ye.update(q=>({...q,mode:"quadrant"}))),f("switchquadrant",{index:g})},d=()=>{Z.update(g=>({...g,cancelTrim:!0})),a.mode==="whole"?h():v()},h=()=>{ye.update(g=>({...g,mode:"quadrant"})),Z.update(g=>({...g,index:1,isDefined:!1}))},v=()=>{He.set(!1),ye.update(g=>({...g,mode:"whole"})),Z.update(g=>({...g,index:0,expanded:!1,isDefined:!1,triminprogress:!1})),We.set(!1)},b=g=>{f("copytoclipboard",{index:i})},w=g=>{f("downloadfile",{index:i})},k=g=>{l||o||f("downloadall")},_=()=>{const g=document.activeElement;if(g&&g instanceof HTMLElement){g.blur(),event.preventDefault();return}},E=(g,q,H)=>{let{x:L,y:G,width:Q,height:U}=r,O=H.shiftKey?10:1,se=H.ctrlKey?O:0,A=L+g*(g<0?2:1)*O-se*g,pe=G+q*(q<0?2:1)*O-se*q,te=Q+se*Math.abs(g),ue=U+se*Math.abs(q);A<0&&(A=0,te=L+Q),pe<0&&(pe=0,ue=G+U),A+te>s.width&&(se>0?te=s.width-A:A=s.width-te),pe+ue>s.height&&(se>0?ue=s.height-pe:pe=s.height-ue),st.update(de=>({...de,x:A,y:pe,width:te,height:ue,update:!0}))},T=g=>{if(g.metaKey||g.altKey||ai())return;const H={1:()=>u(1),2:()=>u(2),3:()=>u(3),4:()=>u(4),c:()=>b(),t:()=>os(),f:()=>ls(i,f),D:()=>k(),d:()=>w(),m:()=>d(),ArrowLeft:L=>E(-1,0,L),ArrowUp:L=>E(0,-1,L),ArrowRight:L=>E(1,0,L),ArrowDown:L=>E(0,1,L),Escape:()=>{_(),Z.update(L=>({...L,cancelTrim:!0}))}}[g.key];H&&(g.preventDefault(),H(g))};return zt(()=>document.addEventListener("keydown",T)),Gt(()=>document.removeEventListener("keydown",T)),e.$$.update=()=>{e.$$.dirty&1&&(i=c.index),e.$$.dirty&1&&c.cancelTrim&&(He.set(!1),Z.update(g=>({...g,cancelTrim:!1,isDefined:!1,triminprogress:!1})))},[c]}class hi extends qe{constructor(t){super(),Te(this,t,mi,null,be,{})}}function Un(e,t,n){const i=e.slice();return i[10]=t[n],i}function gi(e){let t;return{c(){t=z("div"),t.innerHTML="<p>Error loading image dimensions.</p>"},m(n,i){W(n,t,i)},p:X,i:X,o:X,d(n){n&&F(t)}}}function vi(e){let t,n,i,s,r,o,l;const a=[bi,yi],c=[];function f(u,d){return u[9]==="quadrant"?0:1}return s=f(e),r=c[s]=a[s](e),{c(){t=z("div"),n=z("div"),i=z("div"),r.c(),m(i,"class","image-tracker svelte-1mpwltm"),V(i,"expanded",e[6]),V(i,"quadrants",e[9]==="quadrant"),m(n,"class","image-shim svelte-1mpwltm"),m(n,"style",o=`${e[7]}`),V(n,"quadrant-padding",e[9]==="quadrant"),m(t,"class","image-base")},m(u,d){W(u,t,d),p(t,n),p(n,i),c[s].m(i,null),l=!0},p(u,d){let h=s;s=f(u),s===h?c[s].p(u,d):(De(),B(c[h],1,1,()=>{c[h]=null}),Pe(),r=c[s],r?r.p(u,d):(r=c[s]=a[s](u),r.c()),P(r,1),r.m(i,null)),(!l||d[0]&64)&&V(i,"expanded",u[6]),(!l||d[0]&512)&&V(i,"quadrants",u[9]==="quadrant"),(!l||d[0]&128&&o!==(o=`${u[7]}`))&&m(n,"style",o),(!l||d[0]&512)&&V(n,"quadrant-padding",u[9]==="quadrant")},i(u){l||(P(r),l=!0)},o(u){B(r),l=!1},d(u){u&&F(t),c[s].d()}}}function _i(e){let t;return{c(){t=z("div"),t.innerHTML='<div class="spinner svelte-1mpwltm">Loading...</div>',m(t,"class","spinner-container svelte-1mpwltm")},m(n,i){W(n,t,i)},p:X,i:X,o:X,d(n){n&&F(t)}}}function yi(e){let t,n,i,s,r,o;return n=new cs({props:{index:e[10],frameSpecs:e[8]}}),n.$on("imageaction",e[30]),{c(){t=z("div"),fe(n.$$.fragment),m(t,"class","whole active svelte-1mpwltm"),m(t,"style",i=`background-image:url(${e[1]});${e[7]}`)},m(l,a){W(l,t,a),re(n,t,null),s=!0,r||(o=Y(t,"mouseenter",e[31]),r=!0)},p(l,a){const c={};a[0]&1024&&(c.index=l[10]),a[0]&256&&(c.frameSpecs=l[8]),n.$set(c),(!s||a[0]&130&&i!==(i=`background-image:url(${l[1]});${l[7]}`))&&m(t,"style",i)},i(l){s||(P(n.$$.fragment,l),s=!0)},o(l){B(n.$$.fragment,l),s=!1},d(l){l&&F(t),ae(n),r=!1,o()}}}function bi(e){let t,n,i=[1,2,3,4],s=[];for(let o=0;o<4;o+=1)s[o]=Wn(Un(e,i,o));const r=o=>B(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<4;o+=1)s[o].c();t=kt()},m(o,l){for(let a=0;a<4;a+=1)s[a]&&s[a].m(o,l);W(o,t,l),n=!0},p(o,l){if(l[0]&228259){i=[1,2,3,4];let a;for(a=0;a<4;a+=1){const c=Un(o,i,a);s[a]?(s[a].p(c,l),P(s[a],1)):(s[a]=Wn(c),s[a].c(),P(s[a],1),s[a].m(t.parentNode,t))}for(De(),a=4;a<4;a+=1)r(a);Pe()}},i(o){if(!n){for(let l=0;l<4;l+=1)P(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<4;l+=1)B(s[l]);n=!1},d(o){Qn(s,o),o&&F(t)}}}function Wn(e){let t,n,i,s,r,o,l,a,c,f;s=new cs({props:{index:e[10],frameSpecs:{...e[8],...e[14](e[10]),factor:.5}}}),s.$on("expandaction",e[27]),s.$on("imageaction",e[28]);function u(){return e[29](e[10])}return{c(){t=z("div"),n=z("div"),i=S(),fe(s.$$.fragment),r=S(),m(t,"style",o=`background-image:url(${e[1]});${e[7]}`),m(t,"class",l=Ne(`${e[9]} quadrant-${e[10]}`)+" svelte-1mpwltm"),V(t,"active",e[0]===e[10])},m(d,h){W(d,t,h),p(t,n),e[26](n),p(t,i),re(s,t,null),p(t,r),a=!0,c||(f=[Y(t,"mouseenter",u),Y(t,"transitionstart",e[11]),Y(t,"transitionend",e[12])],c=!0)},p(d,h){e=d;const v={};h[0]&256&&(v.frameSpecs={...e[8],...e[14](e[10]),factor:.5}),s.$set(v),(!a||h[0]&130&&o!==(o=`background-image:url(${e[1]});${e[7]}`))&&m(t,"style",o),(!a||h[0]&512&&l!==(l=Ne(`${e[9]} quadrant-${e[10]}`)+" svelte-1mpwltm"))&&m(t,"class",l),(!a||h[0]&513)&&V(t,"active",e[0]===e[10])},i(d){a||(P(s.$$.fragment,d),a=!0)},o(d){B(s.$$.fragment,d),a=!1},d(d){d&&F(t),e[26](null),ae(s),c=!1,he(f)}}}function wi(e){let t,n,i,s,r,o;t=new hi({}),t.$on("downloadfile",e[20]),t.$on("downloadall",e[21]),t.$on("copytoclipboard",e[19]),t.$on("switchquadrant",e[18]),t.$on("expandaction",e[25]);const l=[_i,vi,gi],a=[];function c(f,u){return f[2]?0:f[3]&&f[4]?1:2}return i=c(e),s=a[i]=l[i](e),{c(){fe(t.$$.fragment),n=S(),s.c(),r=kt()},m(f,u){re(t,f,u),W(f,n,u),a[i].m(f,u),W(f,r,u),o=!0},p(f,u){let d=i;i=c(f),i===d?a[i].p(f,u):(De(),B(a[d],1,1,()=>{a[d]=null}),Pe(),s=a[i],s?s.p(f,u):(s=a[i]=l[i](f),s.c()),P(s,1),s.m(r.parentNode,r))},i(f){o||(P(t.$$.fragment,f),P(s),o=!0)},o(f){B(t.$$.fragment,f),B(s),o=!1},d(f){ae(t,f),f&&F(n),a[i].d(f),f&&F(r)}}}function ki(e,t,n){let i,s,r,o,l,a,c,f,u;j(e,Xt,y=>n(34,o=y)),j(e,Z,y=>n(22,l=y)),j(e,ot,y=>n(35,a=y)),j(e,In,y=>n(36,c=y)),j(e,ye,y=>n(23,f=y)),j(e,yt,y=>n(24,u=y));let{imageUrl:d}=t,{currentIndex:h}=t,v=!0,b,w,k,_,E=!1,T="",g;zt(async()=>{const y=await G(d);yt.update(C=>({...C,width:y.width,height:y.height})),n(8,g={width:y.width,height:y.height,x1:0,y1:0,factor:1}),n(3,b=y.width),n(4,w=y.height),k=y.canvas,n(7,T=U(b,w))}),zs(()=>{k&&_&&s==="whole"&&_.appendChild(k)});const q=y=>{y.target===y.currentTarget&&Xt.set(!0)},H=y=>{y.target===y.currentTarget&&(Xt.set(!1),c&&c!==h&&we(c))},L=async y=>{const C=new Image;return C.crossOrigin="anonymous",C.src=y,await C.decode(),C},G=async y=>{n(2,v=!0);let C,N,D;try{const J=performance.now(),ie=await L(y),ge=((performance.now()-J)/1e3).toFixed(2);return C=ie.width,N=ie.height,D=O(ie,0,0,C,N),{width:C,height:N,canvas:D}}catch(J){console.error("Error getting image dimensions:",J)}finally{n(2,v=!1)}},Q=Jt(),U=(y,C)=>{const N=(ze,ge)=>ge===0?ze:N(ge,ze%ge),D=N(y,C),J=y/D,ie=C/D;return`aspect-ratio: ${J} / ${ie};`},O=(y,C,N,D,J)=>{const ie=document.createElement("canvas"),ze=ie.getContext("2d");return ie.width=D,ie.height=J,ze.drawImage(y,0,0,D,J),ie},se=(y,C,N)=>{let D,J;switch(y){case 1:D=0,J=0;break;case 2:D=C,J=0;break;case 3:D=0,J=N;break;case 4:D=C,J=N;break;default:D=0,J=0}return{sx:D,sy:J}},A=(y="download",C)=>{const N=parseInt(C)===0?b:b/2,D=parseInt(C)===0?w:w/2,J=document.createElement("canvas"),ie=J.getContext("2d");J.width=N,J.height=D;let{sx:ze,sy:ge}=se(C,N,D);ie.drawImage(k,ze,ge,N,D,0,0,N,D);const xe=J.toDataURL("image/png");switch(y){case"download":te(xe,a[C],i),Q("toastNotice",`Quadrant ${C} downloading.`);break;case"clipboard":de(xe);break;case"background":return xe;default:console.error('Invalid action specified. Please use a valid action such as "download", "clipboard", or "background".');break}},pe=(y,C,N)=>{const D=y.toDataURL(`image/${N}`,.95);te(D,C,N)},te=(y,C,N)=>{const D=document.createElement("a");D.href=y,D.download=`${C}${N}`,D.click()},ue=y=>{y.toBlob(C=>{const N=new ClipboardItem({"image/png":C});return navigator.clipboard.write([N])})},de=y=>{fetch(y).then(C=>C.blob()).then(C=>{const N=new ClipboardItem({"image/png":C});return Q("toastNotice",`Quadrant ${h} copied to clipboard.`),navigator.clipboard.write([N])}).then(()=>{console.log("Quadrant of image copied to clipboard successfully.")}).catch(C=>{console.error("Failed to copy quadrant of image to clipboard:",C)})},le=(y,C)=>{const N=document.createElement("canvas"),D=N.getContext("2d");return N.width=C.width,N.height=C.height,D.drawImage(y,C.x,C.y,C.width,C.height,0,0,C.width,C.height),N},oe=y=>{if(y==="downloadall"){[4,3,2,1].forEach(C=>A("download",C));return}if(s==="quadrant"&&!l.isDefined)A(y,l.index);else{const C=l.isDefined?le(k,l):k;y==="download"?(pe(C,a[h],i),Q("toastNotice",l.isDefined?"Trim area downloading.":"Full image downloading.")):y==="clipboard"&&(ue(C),Q("toastNotice",l.isDefined?"Trim area copied to clipboard":"Full image copied to clipboard."))}},me=y=>{const C=parseInt(y)===1||parseInt(y)===3?0:b/2,N=parseInt(y)===1||parseInt(y)===2?0:w/2;return{x1:C,y1:N}},we=y=>{E||(n(0,h=y),Z.update(C=>({...C,index:y})))},Ce=()=>{Z.update(y=>({...y,expanded:!y.expanded}))},Fe=y=>{o?In.set(y):we(y)},Re=y=>we(y.detail.index),M=y=>oe("clipboard"),$=y=>oe("download"),I=y=>oe("downloadall"),R=()=>Ce();function K(y){Ae[y?"unshift":"push"](()=>{_=y,n(5,_)})}const x=()=>Ce(),ve=y=>oe(y.detail),Se=y=>Fe(y),Le=y=>oe(y.detail),ke=()=>we(r);return e.$$set=y=>{"imageUrl"in y&&n(1,d=y.imageUrl),"currentIndex"in y&&n(0,h=y.currentIndex)},e.$$.update=()=>{e.$$.dirty[0]&16777216&&(i=u.extension),e.$$.dirty[0]&8388608&&n(9,s=f.mode),e.$$.dirty[0]&4194304&&n(10,r=l.index),e.$$.dirty[0]&4194304&&n(6,E=l.expanded)},[h,d,v,b,w,_,E,T,g,s,r,q,H,oe,me,we,Ce,Fe,Re,M,$,I,l,f,u,R,K,x,ve,Se,Le,ke]}class zi extends qe{constructor(t){super(),Te(this,t,ki,wi,be,{imageUrl:1,currentIndex:0},null,[-1,-1])}}function Mi(e){let t,n,i,s,r,o,l,a,c;return s=new zi({props:{imageUrl:e[0],currentIndex:e[3]}}),s.$on("toastNotice",e[2]),o=new li({}),a=new Zs({}),{c(){t=z("main"),n=z("div"),i=z("div"),fe(s.$$.fragment),r=S(),fe(o.$$.fragment),l=S(),fe(a.$$.fragment),m(i,"class","image-stage svelte-1wix96r"),V(i,"fullscreen",e[1]),m(n,"class","image-wrapper svelte-1wix96r")},m(f,u){W(f,t,u),p(t,n),p(n,i),re(s,i,null),p(t,r),re(o,t,null),W(f,l,u),re(a,f,u),c=!0},p(f,[u]){const d={};u&1&&(d.imageUrl=f[0]),s.$set(d),(!c||u&2)&&V(i,"fullscreen",f[1])},i(f){c||(P(s.$$.fragment,f),P(o.$$.fragment,f),P(a.$$.fragment,f),c=!0)},o(f){B(s.$$.fragment,f),B(o.$$.fragment,f),B(a.$$.fragment,f),c=!1},d(f){f&&F(t),ae(s),ae(o),f&&F(l),ae(a,f)}}}function Ei(e,t,n){let i,s,r,o;j(e,ot,k=>n(6,i=k)),j(e,nn,k=>n(7,s=k)),j(e,ye,k=>n(8,r=k)),j(e,We,k=>n(1,o=k));let l,a;window.location.search&&(a=new URLSearchParams(window.location.search)),l=(a==null?void 0:a.get("image"))||"https://media.discordapp.net/attachments/1060231236733382769/1126296883850137600/sidewaysdesign_greyscale_city_skyline_multicolour_equalizer_gra_11365019-942e-4970-9a45-b109a2fe7c08.png";const c={duration:1500,intro:{x:256}},f=k=>Pt.push(k.detail,c),u=k=>{const _=k.split("/").pop(),[E,T,g]=_.match(/(.+)(\.\w+)$/)??[];return{rootname:T??_,imageExtension:g??""}},{rootname:d,imageExtension:h}=u(l);yt.update(k=>({...k,url:l,extension:h}));let{mode:v}=r,b={currentMode:v,currentName:d,currentIndex:v==="quadrant"?1:0,filenames:[d,...Array.from([1,2,3,4],(k,_)=>`${d}${s}${_+1}`)]};ds(ot,i=b.filenames,i);let w=b.currentIndex;return b.currentIndex=w,[l,o,f,w]}class Ti extends qe{constructor(t){super(),Te(this,t,Ei,Mi,be,{})}}new Ti({target:document.getElementById("app")});
