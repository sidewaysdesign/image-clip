(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function W(){}const Ue=e=>e;function Vt(e,t){for(const n in t)e[n]=t[n];return e}function Kn(e){return e()}function An(){return Object.create(null)}function he(e){e.forEach(Kn)}function at(e){return typeof e=="function"}function we(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ps(e){return Object.keys(e).length===0}function Vn(e,...t){if(e==null)return W;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Gt(e){let t;return Vn(e,n=>t=n)(),t}function R(e,t,n){e.$$.on_destroy.push(Vn(t,n))}function Ie(e){return e??""}function ms(e,t,n){return e.set(n),t}function Cn(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Qn=typeof window<"u";let kt=Qn?()=>window.performance.now():()=>Date.now(),Jt=Qn?e=>requestAnimationFrame(e):W;const it=new Set;function Zn(e){it.forEach(t=>{t.c(e)||(it.delete(t),t.f())}),it.size!==0&&Jt(Zn)}function jt(e){let t;return it.size===0&&Jt(Zn),{promise:new Promise(n=>{it.add(t={c:e,f:n})}),abort(){it.delete(t)}}}function f(e,t){e.appendChild(t)}function Gn(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function hs(e){const t=k("style");return gs(Gn(e),t),t.sheet}function gs(e,t){return f(e.head||e,t),t.sheet}function Y(e,t,n){e.insertBefore(t,n||null)}function X(e){e.parentNode&&e.parentNode.removeChild(e)}function Jn(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function ve(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ne(e){return document.createTextNode(e)}function H(){return ne(" ")}function Mt(){return ne("")}function B(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function vs(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Yt(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function _s(e){return Array.from(e.childNodes)}function nt(e,t){t=""+t,e.data!==t&&(e.data=t)}function ws(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function es(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Z(e,t,n){e.classList[n?"add":"remove"](t)}function ts(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,i,t),s}class bs{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=ve(n.nodeName):this.e=k(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)Y(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(X)}}function Sn(e,t){return new e(t)}const Ft=new Map;let Rt=0;function ys(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function ks(e,t){const n={stylesheet:hs(t),rules:{}};return Ft.set(e,n),n}function _t(e,t,n,i,s,r,o,l=0){const a=16.666/i;let c=`{
`;for(let g=0;g<=1;g+=a){const y=t+(n-t)*r(g);c+=g*100+`%{${o(y,1-y)}}
`}const p=c+`100% {${o(n,1-n)}}
}`,u=`__svelte_${ys(p)}_${l}`,d=Gn(e),{stylesheet:h,rules:v}=Ft.get(d)||ks(d,e);v[u]||(v[u]=!0,h.insertRule(`@keyframes ${u} ${p}`,h.cssRules.length));const w=e.style.animation||"";return e.style.animation=`${w?`${w}, `:""}${u} ${i}ms linear ${s}ms 1 both`,Rt+=1,u}function wt(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=n.length-i.length;s&&(e.style.animation=i.join(", "),Rt-=s,Rt||js())}function js(){Jt(()=>{Rt||(Ft.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&X(t)}),Ft.clear())})}function Ms(e,t,n,i){if(!t)return W;const s=e.getBoundingClientRect();if(t.left===s.left&&t.right===s.right&&t.top===s.top&&t.bottom===s.bottom)return W;const{delay:r=0,duration:o=300,easing:l=Ue,start:a=kt()+r,end:c=a+o,tick:p=W,css:u}=n(e,{from:t,to:s},i);let d=!0,h=!1,v;function w(){u&&(v=_t(e,0,1,o,r,l,u)),r||(h=!0)}function g(){u&&wt(e,v),d=!1}return jt(y=>{if(!h&&y>=a&&(h=!0),h&&y>=c&&(p(1,0),g()),!d)return!1;if(h){const b=y-a,A=0+1*l(b/o);p(A,1-A)}return!0}),w(),p(0,1),g}function Es(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,s=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,ns(e,s)}}function ns(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform;e.style.transform=`${s} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let bt;function vt(e){bt=e}function Ut(){if(!bt)throw new Error("Function called outside component initialization");return bt}function Et(e){Ut().$$.on_mount.push(e)}function Ts(e){Ut().$$.after_update.push(e)}function en(e){Ut().$$.on_destroy.push(e)}function tn(){const e=Ut();return(t,n,{cancelable:i=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=ts(t,n,{cancelable:i});return s.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}const tt=[],$e=[];let lt=[];const Hn=[],ss=Promise.resolve();let Qt=!1;function is(){Qt||(Qt=!0,ss.then(ls))}function As(){return is(),ss}function Me(e){lt.push(e)}const Wt=new Set;let Je=0;function ls(){if(Je!==0)return;const e=bt;do{try{for(;Je<tt.length;){const t=tt[Je];Je++,vt(t),Cs(t.$$)}}catch(t){throw tt.length=0,Je=0,t}for(vt(null),tt.length=0,Je=0;$e.length;)$e.pop()();for(let t=0;t<lt.length;t+=1){const n=lt[t];Wt.has(n)||(Wt.add(n),n())}lt.length=0}while(tt.length);for(;Hn.length;)Hn.pop()();Qt=!1,Wt.clear(),vt(e)}function Cs(e){if(e.fragment!==null){e.update(),he(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Me)}}function Ss(e){const t=[],n=[];lt.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),lt=t}let ht;function nn(){return ht||(ht=Promise.resolve(),ht.then(()=>{ht=null})),ht}function Re(e,t,n){e.dispatchEvent(ts(`${t?"intro":"outro"}${n}`))}const Dt=new Set;let je;function Ne(){je={r:0,c:[],p:je}}function Oe(){je.r||he(je.c),je=je.p}function U(e,t){e&&e.i&&(Dt.delete(e),e.i(t))}function K(e,t,n,i){if(e&&e.o){if(Dt.has(e))return;Dt.add(e),je.c.push(()=>{Dt.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const sn={duration:0};function Hs(e,t,n){const i={direction:"in"};let s=t(e,n,i),r=!1,o,l,a=0;function c(){o&&wt(e,o)}function p(){const{delay:d=0,duration:h=300,easing:v=Ue,tick:w=W,css:g}=s||sn;g&&(o=_t(e,0,1,h,d,v,g,a++)),w(0,1);const y=kt()+d,b=y+h;l&&l.abort(),r=!0,Me(()=>Re(e,!0,"start")),l=jt(A=>{if(r){if(A>=b)return w(1,0),Re(e,!0,"end"),c(),r=!1;if(A>=y){const T=v((A-y)/h);w(T,1-T)}}return r})}let u=!1;return{start(){u||(u=!0,wt(e),at(s)?(s=s(i),nn().then(p)):p())},invalidate(){u=!1},end(){r&&(c(),r=!1)}}}function qs(e,t,n){const i={direction:"out"};let s=t(e,n,i),r=!0,o;const l=je;l.r+=1;function a(){const{delay:c=0,duration:p=300,easing:u=Ue,tick:d=W,css:h}=s||sn;h&&(o=_t(e,1,0,p,c,u,h));const v=kt()+c,w=v+p;Me(()=>Re(e,!1,"start")),jt(g=>{if(r){if(g>=w)return d(0,1),Re(e,!1,"end"),--l.r||he(l.c),!1;if(g>=v){const y=u((g-v)/p);d(1-y,y)}}return r})}return at(s)?nn().then(()=>{s=s(i),a()}):a(),{end(c){c&&s.tick&&s.tick(1,0),r&&(o&&wt(e,o),r=!1)}}}function It(e,t,n,i){const s={direction:"both"};let r=t(e,n,s),o=i?0:1,l=null,a=null,c=null;function p(){c&&wt(e,c)}function u(h,v){const w=h.b-o;return v*=Math.abs(w),{a:o,b:h.b,d:w,duration:v,start:h.start,end:h.start+v,group:h.group}}function d(h){const{delay:v=0,duration:w=300,easing:g=Ue,tick:y=W,css:b}=r||sn,A={start:kt()+v,b:h};h||(A.group=je,je.r+=1),l||a?a=A:(b&&(p(),c=_t(e,o,h,w,v,g,b)),h&&y(0,1),l=u(A,w),Me(()=>Re(e,h,"start")),jt(T=>{if(a&&T>a.start&&(l=u(a,w),a=null,Re(e,l.b,"start"),b&&(p(),c=_t(e,o,l.b,l.duration,0,g,r.css))),l){if(T>=l.end)y(o=l.b,1-o),Re(e,l.b,"end"),a||(l.b?p():--l.group.r||he(l.group.c)),l=null;else if(T>=l.start){const E=T-l.start;o=l.a+l.d*g(E/l.duration),y(o,1-o)}}return!!(l||a)}))}return{run(h){at(r)?nn().then(()=>{r=r(s),d(h)}):d(h)},end(){p(),l=a=null}}}function xs(e,t){K(e,1,1,()=>{t.delete(e.key)})}function Ls(e,t){e.f(),xs(e,t)}function $s(e,t,n,i,s,r,o,l,a,c,p,u){let d=e.length,h=r.length,v=d;const w={};for(;v--;)w[e[v].key]=v;const g=[],y=new Map,b=new Map,A=[];for(v=h;v--;){const M=u(s,r,v),$=n(M);let Q=o.get($);Q?i&&A.push(()=>Q.p(M,t)):(Q=c($,M),Q.c()),y.set($,g[v]=Q),$ in w&&b.set($,Math.abs(v-w[$]))}const T=new Set,E=new Set;function q(M){U(M,1),M.m(l,p),o.set(M.key,M),p=M.first,h--}for(;d&&h;){const M=g[h-1],$=e[d-1],Q=M.key,D=$.key;M===$?(p=M.first,d--,h--):y.has(D)?!o.has(Q)||T.has(Q)?q(M):E.has(D)?d--:b.get(Q)>b.get(D)?(E.add(Q),q(M)):(T.add(D),d--):(a($,o),d--)}for(;d--;){const M=e[d];y.has(M.key)||a(M,o)}for(;h;)q(g[h-1]);return he(A),g}function Is(e,t){const n={},i={},s={$$scope:1};let r=e.length;for(;r--;){const o=e[r],l=t[r];if(l){for(const a in o)a in l||(i[a]=1);for(const a in l)s[a]||(n[a]=l[a],s[a]=1);e[r]=l}else for(const a in o)s[a]=1}for(const o in i)o in n||(n[o]=void 0);return n}function Ns(e){return typeof e=="object"&&e!==null?e:{}}const Os=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...Os];function pe(e){e&&e.c()}function ue(e,t,n,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,n),i||Me(()=>{const o=e.$$.on_mount.map(Kn).filter(at);e.$$.on_destroy?e.$$.on_destroy.push(...o):he(o),e.$$.on_mount=[]}),r.forEach(Me)}function de(e,t){const n=e.$$;n.fragment!==null&&(Ss(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ds(e,t){e.$$.dirty[0]===-1&&(tt.push(e),is(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ee(e,t,n,i,s,r,o,l=[-1]){const a=bt;vt(e);const c=e.$$={fragment:null,ctx:[],props:r,update:W,not_equal:s,bound:An(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:An(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};o&&o(c.root);let p=!1;if(c.ctx=n?n(e,t.props||{},(u,d,...h)=>{const v=h.length?h[0]:d;return c.ctx&&s(c.ctx[u],c.ctx[u]=v)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](v),p&&Ds(e,u)),d}):[],c.update(),p=!0,he(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const u=_s(t.target);c.fragment&&c.fragment.l(u),u.forEach(X)}else c.fragment&&c.fragment.c();t.intro&&U(e.$$.fragment),ue(e,t.target,t.anchor,t.customElement),ls()}vt(a)}class Te{$destroy(){de(this,1),this.$destroy=W}$on(t,n){if(!at(n))return W;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!ps(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function rs(e){const t=e-1;return t*t*t+1}function gt(e,{delay:t=0,duration:n=400,easing:i=Ue}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:r=>`opacity: ${r*s}`}}function Ps(e,{delay:t=0,duration:n=400,easing:i=rs,x:s=0,y:r=0,opacity:o=0}={}){const l=getComputedStyle(e),a=+l.opacity,c=l.transform==="none"?"":l.transform,p=a*(1-o),[u,d]=Cn(s),[h,v]=Cn(r);return{delay:t,duration:n,easing:i,css:(w,g)=>`
			transform: ${c} translate(${(1-w)*u}${d}, ${(1-w)*h}${v});
			opacity: ${a-p*g}`}}function Fs(e,{from:t,to:n},i={}){const s=getComputedStyle(e),r=s.transform==="none"?"":s.transform,[o,l]=s.transformOrigin.split(" ").map(parseFloat),a=t.left+t.width*o/n.width-(n.left+o),c=t.top+t.height*l/n.height-(n.top+l),{delay:p=0,duration:u=h=>Math.sqrt(h)*120,easing:d=rs}=i;return{delay:p,duration:at(u)?u(Math.sqrt(a*a+c*c)):u,easing:d,css:(h,v)=>{const w=v*a,g=v*c,y=h+v*t.width/n.width,b=h+v*t.height/n.height;return`transform: ${r} translate(${w}px, ${g}px) scale(${y}, ${b});`}}}const et=[];function Rs(e,t){return{subscribe:oe(e,t).subscribe}}function oe(e,t=W){let n;const i=new Set;function s(l){if(we(e,l)&&(e=l,n)){const a=!et.length;for(const c of i)c[1](),et.push(c,e);if(a){for(let c=0;c<et.length;c+=2)et[c][0](et[c+1]);et.length=0}}}function r(l){s(l(e))}function o(l,a=W){const c=[l,a];return i.add(c),i.size===1&&(n=t(s)||W),l(e),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}const zs={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function Us(){const{subscribe:e,update:t}=oe(new Array),n={};let i=0;function s(c){return c instanceof Object}function r(c="default",p={}){return n[c]=p,n}function o(c,p){const u={target:"default",...s(c)?c:{...p,msg:c}},d=n[u.target]||{},h={...zs,...d,...u,theme:{...d.theme,...u.theme},classes:[...d.classes||[],...u.classes||[]],id:++i};return t(v=>h.reversed?[...v,h]:[h,...v]),i}function l(c){t(p=>{if(!p.length||c===0)return[];if(typeof c=="function")return p.filter(d=>c(d));if(s(c))return p.filter(d=>d.target!==c.target);const u=c||Math.max(...p.map(d=>d.id));return p.filter(d=>d.id!==u)})}function a(c,p){const u=s(c)?c:{...p,id:c};t(d=>{const h=d.findIndex(v=>v.id===u.id);return h>-1&&(d[h]={...d[h],...u}),d})}return{subscribe:e,push:o,pop:l,set:a,_init:r}}const zt=Us();function qn(e){return Object.prototype.toString.call(e)==="[object Date]"}function Zt(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((s,r)=>Zt(e[r],s));return s=>i.map(r=>r(s))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(qn(e)&&qn(t)){e=e.getTime(),t=t.getTime();const r=t-e;return o=>new Date(e+o*r)}const i=Object.keys(t),s={};return i.forEach(r=>{s[r]=Zt(e[r],t[r])}),r=>{const o={};return i.forEach(l=>{o[l]=s[l](r)}),o}}if(n==="number"){const i=t-e;return s=>e+s*i}throw new Error(`Cannot interpolate ${n} values`)}function Xs(e,t={}){const n=oe(e);let i,s=e;function r(o,l){if(e==null)return n.set(e=o),Promise.resolve();s=o;let a=i,c=!1,{delay:p=0,duration:u=400,easing:d=Ue,interpolate:h=Zt}=Vt(Vt({},t),l);if(u===0)return a&&(a.abort(),a=null),n.set(e=s),Promise.resolve();const v=kt()+p;let w;return i=jt(g=>{if(g<v)return!0;c||(w=h(e,o),typeof u=="function"&&(u=u(e,o)),c=!0),a&&(a.abort(),a=null);const y=g-v;return y>u?(n.set(e=o),!1):(n.set(e=w(d(y/u))),!0)}),i.promise}return{set:r,update:(o,l)=>r(o(s,e),l),subscribe:n.subscribe}}function Ys(e){let t,n=e[0].msg+"",i;return{c(){t=new bs(!1),i=Mt(),t.a=i},m(s,r){t.m(n,s,r),Y(s,i,r)},p(s,r){r&1&&n!==(n=s[0].msg+"")&&t.p(n)},i:W,o:W,d(s){s&&X(i),s&&t.d()}}}function Ws(e){let t,n,i;const s=[e[2]];var r=e[0].component.src;function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Vt(a,s[c]);return{props:a}}return r&&(t=Sn(r,o())),{c(){t&&pe(t.$$.fragment),n=Mt()},m(l,a){t&&ue(t,l,a),Y(l,n,a),i=!0},p(l,a){const c=a&4?Is(s,[Ns(l[2])]):{};if(a&1&&r!==(r=l[0].component.src)){if(t){Ne();const p=t;K(p.$$.fragment,1,0,()=>{de(p,1)}),Oe()}r?(t=Sn(r,o()),pe(t.$$.fragment),U(t.$$.fragment,1),ue(t,n.parentNode,n)):t=null}else r&&t.$set(c)},i(l){i||(t&&U(t.$$.fragment,l),i=!0)},o(l){t&&K(t.$$.fragment,l),i=!1},d(l){l&&X(n),t&&de(t,l)}}}function xn(e){let t,n,i;return{c(){t=k("div"),m(t,"class","_toastBtn pe svelte-95rq8t"),m(t,"role","button"),m(t,"tabindex","0")},m(s,r){Y(s,t,r),n||(i=[B(t,"click",e[4]),B(t,"keydown",e[8])],n=!0)},p:W,d(s){s&&X(t),n=!1,he(i)}}}function Bs(e){let t,n,i,s,r,o,l,a,c,p;const u=[Ws,Ys],d=[];function h(w,g){return w[0].component?0:1}i=h(e),s=d[i]=u[i](e);let v=e[0].dismissable&&xn(e);return{c(){t=k("div"),n=k("div"),s.c(),r=H(),v&&v.c(),o=H(),l=k("progress"),m(n,"role","status"),m(n,"class","_toastMsg svelte-95rq8t"),Z(n,"pe",e[0].component),m(l,"class","_toastBar svelte-95rq8t"),l.value=e[1],m(t,"class","_toastItem svelte-95rq8t"),Z(t,"pe",e[0].pausable)},m(w,g){Y(w,t,g),f(t,n),d[i].m(n,null),f(t,r),v&&v.m(t,null),f(t,o),f(t,l),a=!0,c||(p=[B(t,"mouseenter",e[9]),B(t,"mouseleave",e[6])],c=!0)},p(w,[g]){let y=i;i=h(w),i===y?d[i].p(w,g):(Ne(),K(d[y],1,1,()=>{d[y]=null}),Oe(),s=d[i],s?s.p(w,g):(s=d[i]=u[i](w),s.c()),U(s,1),s.m(n,null)),(!a||g&1)&&Z(n,"pe",w[0].component),w[0].dismissable?v?v.p(w,g):(v=xn(w),v.c(),v.m(t,o)):v&&(v.d(1),v=null),(!a||g&2)&&(l.value=w[1]),(!a||g&1)&&Z(t,"pe",w[0].pausable)},i(w){a||(U(s),a=!0)},o(w){K(s),a=!1},d(w){w&&X(t),d[i].d(),v&&v.d(),c=!1,he(p)}}}function Bt(e,t="undefined"){return typeof e===t}function Ks(e,t,n){let i,{item:s}=t,r=s.initial,o=r,l=!1,a={},c;const p=Xs(s.initial,{duration:s.duration,easing:Ue});R(e,p,b=>n(1,i=b));function u(){zt.pop(s.id)}function d(){(i===1||i===0)&&u()}function h(){!l&&i!==r&&(p.set(i,{duration:0}),l=!0)}function v(){if(l){const b=s.duration,A=b-b*((i-o)/(r-o));p.set(r,{duration:A}).then(d),l=!1}}function w(b=document){if(Bt(b.hidden))return;const A=()=>b.hidden?h():v(),T="visibilitychange";b.addEventListener(T,A),c=()=>b.removeEventListener(T,A),A()}Et(w),en(()=>{Bt(s.onpop,"function")&&s.onpop(s.id),c&&c()});const g=b=>{b instanceof KeyboardEvent&&["Enter"," "].includes(b.key)&&u()},y=()=>{s.pausable&&h()};return e.$$set=b=>{"item"in b&&n(0,s=b.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(Bt(s.progress)||n(0,s.next=s.progress,s)),e.$$.dirty&131&&r!==s.next&&(n(7,r=s.next),o=i,l=!1,p.set(r).then(d)),e.$$.dirty&1&&s.component){const{props:b={},sendIdTo:A}=s.component;n(2,a={...b,...A&&{[A]:s.id}})}},[s,i,a,p,u,h,v,r,g,y]}class Vs extends Te{constructor(t){super(),Ee(this,t,Ks,Bs,we,{item:0})}}function Ln(e,t,n){const i=e.slice();return i[4]=t[n],i}function $n(e,t){let n,i,s,r,o,l,a,c,p=W,u;return i=new Vs({props:{item:t[4]}}),{key:e,first:null,c(){var d;n=k("li"),pe(i.$$.fragment),s=H(),m(n,"class",r=Ie((d=t[4].classes)==null?void 0:d.join(" "))+" svelte-1u812xz"),m(n,"style",o=In(t[4].theme)),this.first=n},m(d,h){Y(d,n,h),ue(i,n,null),f(n,s),u=!0},p(d,h){var w;t=d;const v={};h&1&&(v.item=t[4]),i.$set(v),(!u||h&1&&r!==(r=Ie((w=t[4].classes)==null?void 0:w.join(" "))+" svelte-1u812xz"))&&m(n,"class",r),(!u||h&1&&o!==(o=In(t[4].theme)))&&m(n,"style",o)},r(){c=n.getBoundingClientRect()},f(){Es(n),p(),ns(n,c)},a(){p(),p=Ms(n,c,Fs,{duration:200})},i(d){u||(U(i.$$.fragment,d),Me(()=>{u&&(a&&a.end(1),l=Hs(n,Ps,t[4].intro),l.start())}),u=!0)},o(d){K(i.$$.fragment,d),l&&l.invalidate(),a=qs(n,gt,{}),u=!1},d(d){d&&X(n),de(i),d&&a&&a.end()}}}function Qs(e){let t,n=[],i=new Map,s,r=e[0];const o=l=>l[4].id;for(let l=0;l<r.length;l+=1){let a=Ln(e,r,l),c=o(a);i.set(c,n[l]=$n(c,a))}return{c(){t=k("ul");for(let l=0;l<n.length;l+=1)n[l].c();m(t,"class","_toastContainer svelte-1u812xz")},m(l,a){Y(l,t,a);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);s=!0},p(l,[a]){if(a&1){r=l[0],Ne();for(let c=0;c<n.length;c+=1)n[c].r();n=$s(n,a,o,1,l,r,i,t,Ls,$n,null,Ln);for(let c=0;c<n.length;c+=1)n[c].a();Oe()}},i(l){if(!s){for(let a=0;a<r.length;a+=1)U(n[a]);s=!0}},o(l){for(let a=0;a<n.length;a+=1)K(n[a]);s=!1},d(l){l&&X(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function In(e){return e?Object.keys(e).reduce((t,n)=>`${t}${n}:${e[n]};`,""):void 0}function Zs(e,t,n){let i;R(e,zt,l=>n(3,i=l));let{options:s={}}=t,{target:r="default"}=t,o=[];return e.$$set=l=>{"options"in l&&n(1,s=l.options),"target"in l&&n(2,r=l.target)},e.$$.update=()=>{e.$$.dirty&6&&zt._init(r,s),e.$$.dirty&12&&n(0,o=i.filter(l=>l.target===r))},[o,s,r,i]}class Gs extends Te{constructor(t){super(),Ee(this,t,Zs,Qs,we,{options:1,target:2})}}const os="colorMixerParams",Nn=localStorage.getItem(os),On={mode:"whole"},ot=oe([]),G=oe({triminprogress:!1,isDefined:!1,cancelTrim:!1,index:0,x:0,y:0,width:0,height:0,mode:"whole",expanded:!1}),st=oe({x:0,y:0,width:0,height:0,update:!1}),yt=oe({width:0,height:0,url:"",extension:""}),Ce=oe(!1),rt=oe(!1),Pt=oe(!1);oe(null);const ze=oe(!1),Kt=oe(!1),Dn=oe(null);oe("");const Js=oe(null),_e=oe(Nn?{...On,...JSON.parse(Nn)}:On),ln=Rs("_quad");_e.subscribe(e=>{localStorage.setItem(os,JSON.stringify(e))});function ei(e){let t;return{c(){t=k("div"),t.innerHTML=`<svg id="a" xmlns="http://www.w3.org/2000/svg" width="65.454" height="42.886" viewBox="0 0 65.454 42.886" class="svelte-bpckiz"><defs><style>.b {
          fill: none;
          stroke: #fff;
          stroke-linecap: round;
          stroke-linejoin: round;
        }
      </style></defs><polyline class="b" points="36.725 9.196 32.727 5.198 28.729 9.196"></polyline><line class="b" x1="32.727" y1="5.198" x2="32.727" y2="16.615"></line><path class="b" d="m39.92.5h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464V2.964c0-1.358-1.105-2.464-2.464-2.464Z"></path><polyline class="b" points="36.725 33.688 32.727 37.686 28.729 33.688"></polyline><line class="b" x1="32.727" y1="37.686" x2="32.727" y2="27.019"></line><path class="b" d="m42.383,39.92v-14.385c0-1.358-1.105-2.464-2.464-2.464h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464Z"></path><polyline class="b" points="9.196 28.732 5.198 32.73 9.196 36.728"></polyline><line class="b" x1="5.198" y1="32.73" x2="15.865" y2="32.73"></line><path class="b" d="m.5,25.537v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464v-14.385c0-1.358-1.105-2.464-2.464-2.464H2.964c-1.358,0-2.464,1.105-2.464,2.464Z"></path><polyline class="b" points="56.259 28.732 60.257 32.73 56.259 36.728"></polyline><line class="b" x1="60.257" y1="32.73" x2="49.59" y2="32.73"></line><path class="b" d="m62.491,23.074h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464v-14.385c0-1.358-1.105-2.464-2.464-2.464Z"></path></svg>`,m(t,"class","icon")},m(n,i){Y(n,t,i)},p:W,i:W,o:W,d(n){n&&X(t)}}}class Nt extends Te{constructor(t){super(),Ee(this,t,null,ei,we,{})}}function ti(e){let t,n,i,s,r,o,l,a,c,p,u,d,h,v,w,g,y,b,A,T,E,q,M,$,Q,D,P,O,fe,x,me,J,ae,ie,ee,le,ce,Se,He,be,De,Xe,j,L,I,N,V,C,Ae,Pe,ye,_,S,F,z,te,re,ke,ge,Ye,ct,Tt,We,rn,on,ut,Be,At,an,Ke,cn,un,dt,Ve,Ct,dn,Qe,fn,pn,ft,qe,St,mn,Ht,hn,Ze,gn,vn,qt,_n,xt,wn,Lt,bn,$t,yn,Fe,kn,jn,Mn,pt,En,mt,xe,Le,Xt,Tn;return We=new Nt({}),Ke=new Nt({}),Qe=new Nt({}),Ze=new Nt({}),{c(){t=k("div"),i=H(),s=k("div"),r=k("div"),o=H(),l=k("h3"),l.textContent="Quickly trim, save and copy to the clipboard images opened directly in a browser window.",a=H(),c=k("p"),c.textContent="Works with PNG, WebP and JPEG formats.",p=H(),u=k("div"),d=k("div"),d.innerHTML=`<div class="icon-row svelte-p38jwu"><div class="icon-unit svelte-p38jwu"><div id="icon-mode-whole" class="icon-mode-whole svelte-p38jwu"></div> 
          <label for="icon-mode-whole" class="svelte-p38jwu"><span class="svelte-p38jwu">Whole</span></label></div> 
        <div class="icon-unit svelte-p38jwu"><div id="icon-mode-quadrant" class="icon-mode-quadrant svelte-p38jwu"></div> 
          <label for="icon-mode-quadrant" class="svelte-p38jwu"><span class="svelte-p38jwu">Quadrant</span></label></div></div>`,h=H(),v=k("div"),v.innerHTML=`<h4 class="svelte-p38jwu">Modes</h4> 
      <p class="svelte-p38jwu">Whole mode is based on the entire image. Quadrant mode splits the image into four equal quadrants. In quadrant mode, hover over individual quadrant to activate.</p>`,w=H(),g=k("div"),g.innerHTML=`<div class="icon-group svelte-p38jwu"><div class="icon-row svelte-p38jwu"><div class="icon-unit svelte-p38jwu"><div id="icon-expand" class="icon-expand svelte-p38jwu"></div> 
            <label for="icon-expand" class="svelte-p38jwu"><span class="svelte-p38jwu">Expand</span></label></div> 
          <div class="icon-unit svelte-p38jwu"><div id="icon-shrink" class="icon-shrink svelte-p38jwu"></div> 
            <label for="icon-shrink" class="svelte-p38jwu"><span class="svelte-p38jwu">Shrink</span></label></div></div></div>`,y=H(),b=k("div"),b.innerHTML=`<h4 class="svelte-p38jwu">Expand/Shrink</h4> 
      <p class="svelte-p38jwu">Expand quadrant to fill screen/shrink return to 4 quadrants.</p>`,A=H(),T=k("div"),T.innerHTML='<div class="icon-unit svelte-p38jwu"><div class="icon-triminactive svelte-p38jwu"></div></div>',E=H(),q=k("div"),q.innerHTML=`<h4 class="svelte-p38jwu">Trim</h4> 
      <p class="svelte-p38jwu">Draw a rectangular trim area to save or copy part of an image. Click-drag within trim area to move. Drag handles to adjust size. Click outside trim area to reset. Trim tool is only available in a quadrant when expanded.</p>`,M=H(),$=k("div"),$.innerHTML='<div class="icon-unit svelte-p38jwu"><div class="icon-clipboard svelte-p38jwu"></div></div>',Q=H(),D=k("div"),D.innerHTML=`<h4 class="svelte-p38jwu">Copy</h4> 
      <p class="svelte-p38jwu">Copies the image to the clipboard.</p>`,P=H(),O=k("div"),O.innerHTML='<div class="icon-unit svelte-p38jwu"><div class="icon-download svelte-p38jwu"></div></div>',fe=H(),x=k("div"),x.innerHTML=`<h4 class="svelte-p38jwu">Download</h4> 
      <p class="svelte-p38jwu">Saves the image to the browser download directory.</p>`,me=H(),J=k("div"),J.innerHTML='<div class="icon-unit svelte-p38jwu"></div>',ae=H(),ie=k("div"),ee=k("h4"),ee.textContent="Filename",le=H(),ce=k("p"),Se=ne('Click on filename area to edit. Quadrants are suffixed with "'),He=ne(e[0]),be=ne('1", "'),De=ne(e[0]),Xe=ne('2" '),j=k("em"),j.textContent="etc.",L=ne(" unless manually edited."),I=H(),N=k("div"),V=H(),C=k("div"),Ae=k("h4"),Ae.textContent="Keyboard Shortcuts",Pe=H(),ye=k("div"),_=k("ul"),S=k("li"),S.innerHTML='<span class="keycap svelte-p38jwu">M</span> Toggle between whole and quadrant modes',F=H(),z=k("li"),z.innerHTML=`<div class="combo svelte-p38jwu"><span class="keycap svelte-p38jwu">1</span> <span class="keycap svelte-p38jwu">2</span> <span class="keycap svelte-p38jwu">3</span> <span class="keycap svelte-p38jwu">4</span></div>
            Switch focus to specific quadrant`,te=H(),re=k("li"),re.innerHTML='<span class="keycap svelte-p38jwu">F</span> Toggle fullscreen mode (in quadrant mode)',ke=H(),ge=k("li"),ge.innerHTML='<span class="keycap svelte-p38jwu">T</span> Activate trim tool',Ye=H(),ct=k("li"),Tt=k("div"),pe(We.$$.fragment),rn=ne(`
            Nudge trim frame`),on=H(),ut=k("li"),Be=k("div"),At=k("span"),At.textContent="Shift",an=ne("+ "),pe(Ke.$$.fragment),cn=ne(`
            Nudge trim frame by 10`),un=H(),dt=k("li"),Ve=k("div"),Ct=k("span"),Ct.textContent="Ctrl",dn=ne("+ "),pe(Qe.$$.fragment),fn=ne(`
            Extend trim frame`),pn=H(),ft=k("li"),qe=k("div"),St=k("span"),St.textContent="Shift",mn=ne(" + "),Ht=k("span"),Ht.textContent="Ctrl",hn=ne(" + "),pe(Ze.$$.fragment),gn=ne(`
            Extend trim frame by 10`),vn=H(),qt=k("li"),qt.innerHTML='<span class="keycap svelte-p38jwu">D</span> Download full image or trim area.',_n=H(),xt=k("li"),xt.innerHTML=`<div class="combo svelte-p38jwu"><span class="keycap svelte-p38jwu">Shift</span>+ <span class="keycap svelte-p38jwu">D</span></div>
            Download all quadrants at once.`,wn=H(),Lt=k("li"),Lt.innerHTML='<span class="keycap svelte-p38jwu">C</span> Copy full image or trim area to clipboard',bn=H(),$t=k("li"),$t.innerHTML='<span class="keycap svelte-p38jwu">Esc</span> Exit actions or tools',yn=H(),Fe=k("p"),kn=ne("@"),jn=ne(e[1]),Mn=H(),pt=k("a"),pt.textContent="Sideways Design",En=H(),mt=k("div"),m(t,"class","help-page-overlay svelte-p38jwu"),m(r,"class","wordmark svelte-p38jwu"),m(l,"class","svelte-p38jwu"),m(c,"class","center svelte-p38jwu"),m(d,"class","icon-group svelte-p38jwu"),m(v,"class","help-text svelte-p38jwu"),m(g,"class","icon-group svelte-p38jwu"),m(b,"class","help-text svelte-p38jwu"),m(T,"class","icon-group svelte-p38jwu"),m(q,"class","help-text svelte-p38jwu"),m($,"class","icon-group svelte-p38jwu"),m(D,"class","help-text svelte-p38jwu"),m(O,"class","icon-group svelte-p38jwu"),m(x,"class","help-text svelte-p38jwu"),m(J,"class","icon-group svelte-p38jwu"),m(ee,"class","svelte-p38jwu"),m(ce,"class","svelte-p38jwu"),m(ie,"class","help-text svelte-p38jwu"),m(N,"class","svelte-p38jwu"),m(Ae,"class","sm-center gap-top svelte-p38jwu"),m(S,"class","svelte-p38jwu"),m(z,"class","svelte-p38jwu"),m(re,"class","svelte-p38jwu"),m(ge,"class","svelte-p38jwu"),m(Tt,"class","combo svelte-p38jwu"),m(ct,"class","svelte-p38jwu"),m(At,"class","keycap svelte-p38jwu"),m(Be,"class","combo svelte-p38jwu"),m(ut,"class","svelte-p38jwu"),m(Ct,"class","keycap svelte-p38jwu"),m(Ve,"class","combo svelte-p38jwu"),m(dt,"class","svelte-p38jwu"),m(St,"class","keycap svelte-p38jwu"),m(Ht,"class","keycap svelte-p38jwu"),m(qe,"class","combo svelte-p38jwu"),m(ft,"class","svelte-p38jwu"),m(qt,"class","svelte-p38jwu"),m(xt,"class","svelte-p38jwu"),m(Lt,"class","svelte-p38jwu"),m($t,"class","svelte-p38jwu"),m(_,"class","nobullets shortcut-list svelte-p38jwu"),m(ye,"class","shortcuts-section svelte-p38jwu"),m(C,"class","help-text svelte-p38jwu"),m(u,"class","help-grid svelte-p38jwu"),m(pt,"href","https://sidewaysdesign.com/"),m(pt,"class","svelte-p38jwu"),m(Fe,"class","year svelte-p38jwu"),m(mt,"class","icon-close svelte-p38jwu"),m(s,"class","help-page-wrapper svelte-p38jwu")},m(se,Ge){Y(se,t,Ge),Y(se,i,Ge),Y(se,s,Ge),f(s,r),f(s,o),f(s,l),f(s,a),f(s,c),f(s,p),f(s,u),f(u,d),f(u,h),f(u,v),f(u,w),f(u,g),f(u,y),f(u,b),f(u,A),f(u,T),f(u,E),f(u,q),f(u,M),f(u,$),f(u,Q),f(u,D),f(u,P),f(u,O),f(u,fe),f(u,x),f(u,me),f(u,J),f(u,ae),f(u,ie),f(ie,ee),f(ie,le),f(ie,ce),f(ce,Se),f(ce,He),f(ce,be),f(ce,De),f(ce,Xe),f(ce,j),f(ce,L),f(u,I),f(u,N),f(u,V),f(u,C),f(C,Ae),f(C,Pe),f(C,ye),f(ye,_),f(_,S),f(_,F),f(_,z),f(_,te),f(_,re),f(_,ke),f(_,ge),f(_,Ye),f(_,ct),f(ct,Tt),ue(We,Tt,null),f(ct,rn),f(_,on),f(_,ut),f(ut,Be),f(Be,At),f(Be,an),ue(Ke,Be,null),f(ut,cn),f(_,un),f(_,dt),f(dt,Ve),f(Ve,Ct),f(Ve,dn),ue(Qe,Ve,null),f(dt,fn),f(_,pn),f(_,ft),f(ft,qe),f(qe,St),f(qe,mn),f(qe,Ht),f(qe,hn),ue(Ze,qe,null),f(ft,gn),f(_,vn),f(_,qt),f(_,_n),f(_,xt),f(_,wn),f(_,Lt),f(_,bn),f(_,$t),f(s,yn),f(s,Fe),f(Fe,kn),f(Fe,jn),f(Fe,Mn),f(Fe,pt),f(s,En),f(s,mt),Le=!0,Xt||(Tn=[B(t,"click",e[3]),B(t,"keydown",e[2]),B(mt,"keydown",e[2]),B(mt,"click",e[3])],Xt=!0)},p(se,[Ge]){(!Le||Ge&1)&&nt(He,se[0]),(!Le||Ge&1)&&nt(De,se[0])},i(se){Le||(Me(()=>{Le&&(n||(n=It(t,gt,{duration:250},!0)),n.run(1))}),U(We.$$.fragment,se),U(Ke.$$.fragment,se),U(Qe.$$.fragment,se),U(Ze.$$.fragment,se),Me(()=>{Le&&(xe||(xe=It(s,gt,{duration:375},!0)),xe.run(1))}),Le=!0)},o(se){n||(n=It(t,gt,{duration:250},!1)),n.run(0),K(We.$$.fragment,se),K(Ke.$$.fragment,se),K(Qe.$$.fragment,se),K(Ze.$$.fragment,se),xe||(xe=It(s,gt,{duration:375},!1)),xe.run(0),Le=!1},d(se){se&&X(t),se&&n&&n.end(),se&&X(i),se&&X(s),de(We),de(Ke),de(Qe),de(Ze),se&&xe&&xe.end(),Xt=!1,he(Tn)}}}function ni(e,t,n){let i;R(e,ln,l=>n(0,i=l));const s=new Date().getFullYear();Et(()=>document.addEventListener("keydown",r)),en(()=>document.removeEventListener("keydown",r));function r(l){const c={Escape:o()}[l.key];c&&c(l)}const o=()=>rt.set(!1);return[i,s,r,o]}class si extends Te{constructor(t){super(),Ee(this,t,ni,ti,we,{})}}function Pn(e){let t,n;return t=new si({}),{c(){pe(t.$$.fragment)},m(i,s){ue(t,i,s),n=!0},i(i){n||(U(t.$$.fragment,i),n=!0)},o(i){K(t.$$.fragment,i),n=!1},d(i){de(t,i)}}}function ii(e){let t,n,i,s,r,o,l,a,c,p,u,d,h,v,w,g,y,b,A,T=e[3]&&Pn();return{c(){t=k("div"),n=k("div"),i=k("div"),s=H(),r=k("div"),r.innerHTML=`<div class="wordmark svelte-1330dlb"></div> 
      <p class="byline svelte-1330dlb"><a href="https://sidewaysdesign.com" target="blank" class="svelte-1330dlb">by Sideways Design</a></p>`,o=H(),l=k("div"),a=H(),c=k("div"),p=k("div"),p.innerHTML='<span class="tooltip svelte-1330dlb">Whole Image</span>',u=H(),d=k("div"),d.innerHTML='<span class="tooltip svelte-1330dlb">Quadrants</span>',h=H(),v=k("div"),w=H(),T&&T.c(),g=Mt(),m(i,"class","mode-control-hide1 svelte-1330dlb"),m(i,"aria-hidden","true"),m(l,"class","mode-control-info svelte-1330dlb"),m(p,"class","mode-control mode-control-whole svelte-1330dlb"),m(p,"aria-label","Whole Image"),m(p,"tabindex","-2"),Z(p,"active",e[2].mode==="whole"),m(d,"class","mode-control mode-control-quadrant svelte-1330dlb"),m(d,"aria-label","Quadrant"),m(d,"tabindex","-1"),Z(d,"active",e[2].mode==="quadrant"),m(c,"class","mode-control-container svelte-1330dlb"),m(v,"aria-hidden","true"),m(v,"class","mode-control-hide2 svelte-1330dlb"),m(n,"class","mode-control-group svelte-1330dlb"),m(t,"class","mode-control-wrapper svelte-1330dlb"),Z(t,"tucked",e[0]),Z(t,"triminprogress",e[1].triminprogress)},m(E,q){Y(E,t,q),f(t,n),f(n,i),f(n,s),f(n,r),f(n,o),f(n,l),f(n,a),f(n,c),f(c,p),f(c,u),f(c,d),f(n,h),f(n,v),Y(E,w,q),T&&T.m(E,q),Y(E,g,q),y=!0,b||(A=[B(i,"click",e[7]),B(l,"keydown",e[6]),B(l,"click",e[5]),B(p,"keydown",e[9]),B(p,"click",e[10]),B(d,"keydown",e[11]),B(d,"click",e[12]),B(v,"click",e[8])],b=!0)},p(E,[q]){(!y||q&4)&&Z(p,"active",E[2].mode==="whole"),(!y||q&4)&&Z(d,"active",E[2].mode==="quadrant"),(!y||q&1)&&Z(t,"tucked",E[0]),(!y||q&2)&&Z(t,"triminprogress",E[1].triminprogress),E[3]?T?q&8&&U(T,1):(T=Pn(),T.c(),U(T,1),T.m(g.parentNode,g)):T&&(Ne(),K(T,1,1,()=>{T=null}),Oe())},i(E){y||(U(T),y=!0)},o(E){K(T),y=!1},d(E){E&&X(t),E&&X(w),T&&T.d(E),E&&X(g),b=!1,he(A)}}}function li(e,t,n){let i,s,r;R(e,G,g=>n(1,i=g)),R(e,_e,g=>n(2,s=g)),R(e,rt,g=>n(3,r=g));let o=!1;const l=g=>{G.update(y=>({...y,cancelTrim:!0})),g==="quadrant"&&(G.update(y=>({...y,index:1})),_e.update(y=>({...y,mode:"quadrant"}))),g==="whole"&&(ze.set(!1),G.update(y=>({...y,index:0,expanded:!1})),_e.update(y=>({...y,mode:"whole"})))};return[o,i,s,r,l,()=>rt.set(!0),g=>{g.key==="?"&&rt.set(!0)},()=>{n(0,o=!0)},()=>{n(0,o=!1)},g=>g.key.toLowerCase()==="m"&&l("whole"),()=>l("whole"),g=>g.key.toLowerCase()==="m"&&l("quadrant"),()=>l("quadrant")]}class ri extends Te{constructor(t){super(),Ee(this,t,li,ii,we,{})}}const as=(e,t)=>{Ce.set(!1),ze.update(n=>!n),t("expandaction")},cs=()=>{Gt(Ce)?G.update(e=>({...e,cancelTrim:!0})):Ce.set(!0)},oi=(e,t)=>{e===Gt(G).index&&t("imageaction","download")},ai=(e,t)=>{e===Gt(G).index&&t("imageaction","clipboard")},ci=()=>{const e=document.activeElement;return e instanceof HTMLElement&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"||e.tagName==="FORM"||e.contentEditable==="true")};function Fn(e,t,n){const i=e.slice();return i[40]=t[n],i}function Rn(e){let t,n,i,s=Math.floor(e[1].x*e[9])+"",r,o,l,a,c=Math.floor(e[1].y*e[9])+"",p,u,d,h,v=Math.floor(e[1].width*e[9])+"",w,g,y,b,A=Math.floor(e[1].height*e[9])+"",T;return{c(){t=k("div"),n=k("p"),i=k("span"),i.textContent="x:",r=ne(s),o=H(),l=k("p"),a=k("span"),a.textContent="y:",p=ne(c),u=H(),d=k("p"),h=k("span"),h.textContent="w:",w=ne(v),g=H(),y=k("p"),b=k("span"),b.textContent="h:",T=ne(A),m(i,"class","svelte-19pxt85"),m(n,"class","svelte-19pxt85"),m(a,"class","svelte-19pxt85"),m(l,"class","svelte-19pxt85"),m(h,"class","svelte-19pxt85"),m(d,"class","svelte-19pxt85"),m(b,"class","svelte-19pxt85"),m(y,"class","svelte-19pxt85"),m(t,"class","trim-stats svelte-19pxt85")},m(E,q){Y(E,t,q),f(t,n),f(n,i),f(n,r),f(t,o),f(t,l),f(l,a),f(l,p),f(t,u),f(t,d),f(d,h),f(d,w),f(t,g),f(t,y),f(y,b),f(y,T)},p(E,q){q[0]&2&&s!==(s=Math.floor(E[1].x*E[9])+"")&&nt(r,s),q[0]&2&&c!==(c=Math.floor(E[1].y*E[9])+"")&&nt(p,c),q[0]&2&&v!==(v=Math.floor(E[1].width*E[9])+"")&&nt(w,v),q[0]&2&&A!==(A=Math.floor(E[1].height*E[9])+"")&&nt(T,A)},d(E){E&&X(t)}}}function zn(e){let t;return{c(){t=ve("rect"),m(t,"class","handle svelte-19pxt85"),m(t,"id",e[40].id),m(t,"x","-100"),m(t,"y","-100"),m(t,"width",Ot),m(t,"height",Ot),es(t,"cursor",e[40].cursor),m(t,"rx",Ot/2),m(t,"ry",Ot/2)},m(n,i){Y(n,t,i)},p:W,d(n){n&&X(t)}}}function ui(e){let t,n,i,s,r,o,l,a,c,p,u,d,h=(e[8]||e[5]||e[7]||e[6])&&Rn(e),v=e[10],w=[];for(let g=0;g<v.length;g+=1)w[g]=zn(Fn(e,v,g));return{c(){t=k("div"),n=k("div"),h&&h.c(),i=H(),s=ve("svg"),r=ve("defs"),o=ve("rect"),l=ve("clipPath"),a=ve("use"),c=ve("use"),p=ve("use"),u=ve("path"),d=ve("rect");for(let g=0;g<w.length;g+=1)w[g].c();m(n,"class","trim-stats-container svelte-19pxt85"),m(o,"vector-effect","non-scaling-stroke"),m(o,"shape-rendering","geometricPrecision"),m(o,"id","bbox"),m(o,"x","0"),m(o,"y","0"),m(o,"width","0"),m(o,"height","0"),Yt(a,"xlink:href","#bbox"),m(l,"id","insideStrokeOnly"),Yt(c,"xlink:href","#bbox"),m(c,"stroke-width","2px"),m(c,"stroke","white"),m(c,"fill","none"),m(c,"clip-path","url(#insideStrokeOnly)"),Yt(p,"xlink:href","#bbox"),m(p,"stroke-width","2px"),m(p,"stroke-dasharray","2,2"),m(p,"stroke","#777"),m(p,"fill","none"),m(p,"clip-path","url(#insideStrokeOnly)"),m(u,"id",us),m(u,"fill","#000"),m(u,"d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z"),m(u,"fill-rule","evenodd"),m(u,"opacity","0.5"),m(d,"id",ds),m(d,"x","-100"),m(d,"y","-100"),m(d,"width","0"),m(d,"height","0"),es(d,"cursor","grab"),m(d,"fill","transparent"),m(s,"width","100%"),m(s,"height","100%"),m(s,"class","inactive svelte-19pxt85"),m(t,"class","trim-stage svelte-19pxt85")},m(g,y){Y(g,t,y),f(t,n),h&&h.m(n,null),e[14](n),f(t,i),f(t,s),f(s,r),f(r,o),e[15](o),f(r,l),f(l,a),f(s,c),f(s,p),f(s,u),e[16](u),f(s,d);for(let b=0;b<w.length;b+=1)w[b]&&w[b].m(s,null);e[17](s)},p(g,y){if(g[8]||g[5]||g[7]||g[6]?h?h.p(g,y):(h=Rn(g),h.c(),h.m(n,null)):h&&(h.d(1),h=null),y[0]&1024){v=g[10];let b;for(b=0;b<v.length;b+=1){const A=Fn(g,v,b);w[b]?w[b].p(A,y):(w[b]=zn(A),w[b].c(),w[b].m(s,null))}for(;b<w.length;b+=1)w[b].d(1);w.length=v.length}},i:W,o:W,d(g){g&&X(t),h&&h.d(),e[14](null),e[15](null),e[16](null),Jn(w,g),e[17](null)}}}const us="focusOverlay",ds="movehandle",Ot=14;function di(e,t,n){let i,s;R(e,yt,j=>n(26,i=j)),R(e,st,j=>n(1,s=j));let{frameSpecs:r}=t,o,l,a,c,p,u,d=r.width,h=r.height,v=r.x1,w=r.y1,g=r.factor,y=!1,b=!1,A=!1,T,E,q,M,$,Q={x:v,y:w,width:d,height:h},D=!1,P,O;const fe=[{id:"top-left",cursor:"nw-resize"},{id:"top-right",cursor:"ne-resize"},{id:"bottom-left",cursor:"sw-resize"},{id:"bottom-right",cursor:"se-resize"},{id:"top-middle",cursor:"ns-resize"},{id:"bottom-middle",cursor:"ns-resize"},{id:"left-middle",cursor:"ew-resize"},{id:"right-middle",cursor:"ew-resize"}];Et(()=>{o.addEventListener("mousedown",x),o.addEventListener("mousemove",me),o.addEventListener("mouseup",J),fe.forEach(j=>{j.ref=document.querySelector(`svg #${j.id}`)}),u=document.querySelector(`svg #${ds}`),n(2,a=document.querySelector(`svg #${us}`)),a.addEventListener("click",Se)});async function x(j){l=o.getBoundingClientRect(),M=l.left,$=l.top,j.target===o?(E=(j.clientX-M)/P,q=(j.clientY-$)/O,n(5,y=!0),o.classList.remove("inactive"),a.setAttribute("d",`M0,0H${l.width}V${l.height}H0Z`)):j.target.classList.contains("handle")?(E=j.clientX-M,q=j.clientY-$,n(6,b=!0),T=j.target,T=j.target,ee(!0)):j.target.id==="movehandle"&&(E=j.clientX-M-s.x*P,q=j.clientY-$-s.y*O,n(7,A=!0)),G.update(L=>({...L,triminprogress:!0})),A||window.addEventListener("mousemove",ae)}function me(j){let L,I,N,V;if(y)L=Math.min(E,(j.clientX-M)/P),I=Math.min(q,(j.clientY-$)/O),N=Math.abs(E-(j.clientX-M)/P),V=Math.abs(q-(j.clientY-$)/O);else if(b){const C=s;switch(L=C.x,I=C.y,N=C.width,V=C.height,T.id){case"top-left":L=Math.min((j.clientX-M)/P,C.x+C.width),I=Math.min((j.clientY-$)/O,C.y+C.height),N=Math.abs(C.x+C.width-L),V=Math.abs(C.y+C.height-I);break;case"top-right":I=Math.min((j.clientY-$)/O,C.y+C.height),N=Math.abs(j.clientX-M-C.x*P)/P,V=Math.abs(C.y+C.height-I);break;case"bottom-left":L=Math.min((j.clientX-M)/P,C.x+C.width),N=Math.abs(C.x+C.width-L),V=Math.abs((j.clientY-$-C.y*O)/O);break;case"bottom-right":N=Math.abs((j.clientX-M-C.x*P)/P),V=Math.abs((j.clientY-$-C.y*O)/O);break;case"top-middle":I=Math.min((j.clientY-$)/O,C.y+C.height),V=Math.abs(C.y+C.height-I);break;case"bottom-middle":V=Math.abs((j.clientY-$-C.y*O)/O);break;case"left-middle":L=Math.min((j.clientX-M)/P,C.x+C.width),N=Math.abs(C.x+C.width-L);break;case"right-middle":N=Math.abs((j.clientX-M-C.x*P)/P);break}ee(!0)}else A&&(L=Math.min(Math.max(0,(j.clientX-M-E)/P),d-s.width),I=Math.min(Math.max(0,(j.clientY-$-q)/O),h-s.height),N=s.width,V=s.height);(y||b||A)&&(ce(L*P,I*O,N*P,V*O),le(L*P,I*O,N*P,V*O),st.update(C=>({...C,x:L,y:I,width:N,height:V})))}function J(){A||window.removeEventListener("mousemove",ae),n(5,y=!1),n(6,b=!1),n(7,A=!1),n(8,D=!!(s.width&&s.height)),D&&G.update(j=>({...j,...Q})),G.update(j=>({...j,isDefined:D,triminprogress:!1})),ee(!1)}const ae=j=>{if(l=o.getBoundingClientRect(),j.buttons===1){let L=j.clientX<l.left?-1:j.clientX>l.right?1:0,I=j.clientY<l.top?-1:j.clientY>l.bottom?1:0;(L||I)&&(ie(L,I),J())}},ie=(j,L)=>{let{x:I,y:N,width:V,height:C}=s,Ae=I,Pe=N,ye=V,_=C;j>0&&(ye=i.width-I),j<0&&(Ae=0,ye=I+V),L>0&&(_=i.height-N),L<0&&(Pe=0,_=N+C),st.update(S=>({...S,x:Ae,y:Pe,width:ye,height:_,update:!0}))};function ee(j){fe.forEach(L=>{L.ref&&L.ref.classList.remove("active")}),j&&T.classList.add("active")}function le(j,L,I,N){n(3,c.style.left=`${j+I/2}px`,c),n(3,c.style.top=`${L+N/2}px`,c)}function ce(j,L,I,N){p.setAttribute("x",j),p.setAttribute("y",L),p.setAttribute("width",I),p.setAttribute("height",N),u.setAttribute("x",j),u.setAttribute("y",L),u.setAttribute("width",I),u.setAttribute("height",N),fe.forEach(V=>{const C=V.ref;switch(V.id){case"top-left":C.setAttribute("x",j),C.setAttribute("y",L);break;case"top-right":C.setAttribute("x",j+I),C.setAttribute("y",L);break;case"bottom-left":C.setAttribute("x",j),C.setAttribute("y",L+N);break;case"bottom-right":C.setAttribute("x",j+I),C.setAttribute("y",L+N);break;case"top-middle":C.setAttribute("x",j+I/2),C.setAttribute("y",L);break;case"bottom-middle":C.setAttribute("x",j+I/2),C.setAttribute("y",L+N);break;case"left-middle":C.setAttribute("x",j),C.setAttribute("y",L+N/2);break;case"right-middle":C.setAttribute("x",j+I),C.setAttribute("y",L+N/2);break}}),a.setAttribute("d",`M0,0H${l.width}V${l.height}H0ZM${j},${L}H${j+I}V${L+N}H${j}Z`)}function Se(){n(8,D=!1),G.update(j=>({...j,isDefined:!1,cancelTrim:!0})),ce(-100,-100,0,0),fe.forEach(j=>{j.ref.setAttribute("x",-100),j.ref.setAttribute("y",-100)}),a.setAttribute("d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z")}function He(j){$e[j?"unshift":"push"](()=>{c=j,n(3,c)})}function be(j){$e[j?"unshift":"push"](()=>{p=j,n(4,p)})}function De(j){$e[j?"unshift":"push"](()=>{a=j,n(2,a)})}function Xe(j){$e[j?"unshift":"push"](()=>{o=j,n(0,o)})}return e.$$set=j=>{"frameSpecs"in j&&n(11,r=j.frameSpecs)},e.$$.update=()=>{if(e.$$.dirty[0]&1&&(n(12,P=o?o.clientWidth/d:1),n(13,O=o?o.clientHeight/h:1)),e.$$.dirty[0]&3&&o&&(Q={x:Math.floor(s.x*g+v),y:Math.floor(s.y*g+w),width:Math.floor(s.width*g),height:Math.floor(s.height*g)}),e.$$.dirty[0]&12290&&s.update){let{x:j,y:L,width:I,height:N}=s;st.update(V=>({...V,update:!1})),le(j*P,L*O,I*P,N*O),ce(j*P,L*O,I*P,N*O),G.update(V=>({...V,x:j*g+v,y:L*g+w,width:I*g,height:N*g}))}},[o,s,a,c,p,y,b,A,D,g,fe,r,P,O,He,be,De,Xe]}class fi extends Te{constructor(t){super(),Ee(this,t,di,ui,we,{frameSpecs:11},null,[-1,-1])}}function Un(e){let t,n,i;return n=new fi({props:{frameSpecs:e[1]}}),{c(){t=k("div"),pe(n.$$.fragment),m(t,"class","trim-action svelte-kmld97")},m(s,r){Y(s,t,r),ue(n,t,null),i=!0},p(s,r){const o={};r&2&&(o.frameSpecs=s[1]),n.$set(o)},i(s){i||(U(n.$$.fragment,s),i=!0)},o(s){K(n.$$.fragment,s),i=!1},d(s){s&&X(t),de(n)}}}function Xn(e){let t,n,i,s;return{c(){t=k("button"),m(t,"tabindex","0"),m(t,"class",n=Ie(`isolate-control ${e[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-kmld97")},m(r,o){Y(r,t,o),i||(s=B(t,"click",e[20]),i=!0)},p(r,o){o&256&&n!==(n=Ie(`isolate-control ${r[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-kmld97")&&m(t,"class",n)},d(r){r&&X(t),i=!1,s()}}}function Yn(e){let t,n,i,s;return{c(){t=k("button"),m(t,"tabindex","0"),m(t,"class",n=Ie(`isolate-control ${e[9]&&e[6]?"icon-shrink":"icon-expand"}`)+" svelte-kmld97")},m(r,o){Y(r,t,o),i||(s=B(t,"click",e[21]),i=!0)},p(r,o){o&576&&n!==(n=Ie(`isolate-control ${r[9]&&r[6]?"icon-shrink":"icon-expand"}`)+" svelte-kmld97")&&m(t,"class",n)},d(r){r&&X(t),i=!1,s()}}}function pi(e){let t,n,i,s,r,o,l,a,c,p,u,d,h,v,w,g,y,b=e[8]&&e[6]&&Un(e),A=(e[7]!=="quadrant"||e[9])&&Xn(e),T=e[7]==="quadrant"&&Yn(e);return{c(){t=k("div"),b&&b.c(),n=H(),i=k("div"),s=k("div"),r=k("div"),o=k("div"),l=ne(e[5]),a=H(),c=k("button"),p=H(),u=k("button"),d=H(),h=k("div"),A&&A.c(),v=H(),T&&T.c(),m(o,"class","filename-text svelte-kmld97"),m(o,"tabindex","-1"),m(o,"contenteditable",""),e[5]===void 0&&Me(()=>e[17].call(o)),Z(o,"editing",e[4]),m(c,"class","icon-download svelte-kmld97"),m(r,"class","filename-area svelte-kmld97"),m(r,"data-index",e[0]),m(u,"class","icon-clipboard svelte-kmld97"),m(s,"class","controls-wrapper svelte-kmld97"),m(h,"class","isolate-controls svelte-kmld97"),m(i,"class","image-action svelte-kmld97"),m(t,"class","svelte-kmld97"),Z(t,"triminprogress",e[3].triminprogress)},m(E,q){Y(E,t,q),b&&b.m(t,null),f(t,n),f(t,i),f(i,s),f(s,r),f(r,o),f(o,l),e[16](o),e[5]!==void 0&&(o.textContent=e[5]),f(r,a),f(r,c),f(s,p),f(s,u),f(i,d),f(i,h),A&&A.m(h,null),f(h,v),T&&T.m(h,null),w=!0,g||(y=[B(o,"blur",e[12]),B(o,"input",e[17]),B(o,"click",vs(e[11])),B(o,"keydown",e[14]),B(c,"click",e[18]),B(u,"click",e[19]),B(t,"blur",e[13])],g=!0)},p(E,[q]){E[8]&&E[6]?b?(b.p(E,q),q&320&&U(b,1)):(b=Un(E),b.c(),U(b,1),b.m(t,n)):b&&(Ne(),K(b,1,1,()=>{b=null}),Oe()),(!w||q&32)&&ws(l,E[5]),q&32&&E[5]!==o.textContent&&(o.textContent=E[5]),(!w||q&16)&&Z(o,"editing",E[4]),(!w||q&1)&&m(r,"data-index",E[0]),E[7]!=="quadrant"||E[9]?A?A.p(E,q):(A=Xn(E),A.c(),A.m(h,v)):A&&(A.d(1),A=null),E[7]==="quadrant"?T?T.p(E,q):(T=Yn(E),T.c(),T.m(h,null)):T&&(T.d(1),T=null),(!w||q&8)&&Z(t,"triminprogress",E[3].triminprogress)},i(E){w||(U(b),w=!0)},o(E){K(b),w=!1},d(E){E&&X(t),b&&b.d(),e[16](null),A&&A.d(),T&&T.d(),g=!1,he(y)}}}function mi(e,t,n){let i,s,r,o,l,a,c,p,u;R(e,ln,x=>n(23,r=x)),R(e,ot,x=>n(24,o=x)),R(e,G,x=>n(3,l=x)),R(e,_e,x=>n(15,a=x)),R(e,Pt,x=>n(4,c=x)),R(e,Ce,x=>n(8,p=x)),R(e,ze,x=>n(9,u=x));let{index:d}=t,{frameSpecs:h}=t,v,w;const g=tn(),y=()=>{w=o[d],Js.set(v),Pt.set(!0)},b=()=>{let x=v.innerText;if(!x||x.length===0){n(5,A=w.trim());return}E(x),Pt.set(!1),v.blur()};let A=o[d];const T=x=>{Ce.set(!1),ze.set(!1)},E=x=>{let J=o.slice();if(d===0){let ae=Array.from({length:4},(ie,ee)=>`${o[0]}${r}${ee+1}`);J[d]=x,J.forEach((ie,ee)=>{if(ee>0){let le=ae[ee-1];le&&ie===le&&(J[ee]=`${x}${r}${ee}`)}})}else J[d]=x;ot.set(J)},q=x=>{},M=x=>{x.key==="Enter"&&v.blur(),x.key==="Escape"&&(n(2,v.innerText=w,v),v.blur())};function $(x){$e[x?"unshift":"push"](()=>{v=x,n(2,v)})}function Q(){A=this.textContent,n(5,A)}const D=()=>oi(d,g),P=()=>ai(d,g),O=()=>cs(),fe=()=>as(d,g);return e.$$set=x=>{"index"in x&&n(0,d=x.index),"frameSpecs"in x&&n(1,h=x.frameSpecs)},e.$$.update=()=>{e.$$.dirty&20&&c&&As().then(()=>q()),e.$$.dirty&8&&l.cancelTrim&&(Ce.set(!1),G.update(x=>({...x,cancelTrim:!1,isDefined:!1,triminprogress:!1}))),e.$$.dirty&32768&&n(7,i=a.mode),e.$$.dirty&9&&n(6,s=l.index===d)},[d,h,v,l,c,A,s,i,p,u,g,y,b,T,M,a,$,Q,D,P,O,fe]}class fs extends Te{constructor(t){super(),Ee(this,t,mi,pi,we,{index:0,frameSpecs:1})}}function hi(e,t,n){let i,s,r,o,l,a,c,p;R(e,rt,M=>n(2,s=M)),R(e,yt,M=>n(3,r=M)),R(e,st,M=>n(4,o=M)),R(e,ze,M=>n(5,M)),R(e,Ce,M=>n(6,l=M)),R(e,Pt,M=>n(7,a=M)),R(e,_e,M=>n(8,c=M)),R(e,ot,M=>n(9,M)),R(e,G,M=>n(0,p=M));const u=tn(),d=M=>{c.mode!=="quadrant"&&(G.update($=>({...$,index:M,cancelTrim:!0})),_e.update($=>({...$,mode:"quadrant"}))),u("switchquadrant",{index:M})},h=()=>{G.update(M=>({...M,cancelTrim:!0})),c.mode==="whole"?v():w()},v=()=>{_e.update(M=>({...M,mode:"quadrant"})),G.update(M=>({...M,index:1,isDefined:!1}))},w=()=>{Ce.set(!1),_e.update(M=>({...M,mode:"whole"})),G.update(M=>({...M,index:0,expanded:!1,isDefined:!1,triminprogress:!1})),ze.set(!1)},g=M=>{u("copytoclipboard",{index:i})},y=M=>{u("downloadfile",{index:i})},b=M=>{a||l||u("downloadall")},A=()=>{const M=document.activeElement;if(M&&M instanceof HTMLElement){M.blur(),event.preventDefault();return}},T=(M,$,Q)=>{let{x:D,y:P,width:O,height:fe}=o,x=Q.shiftKey?10:1,me=Q.ctrlKey?x:0,J=D+M*(M<0?2:1)*x-me*M,ae=P+$*($<0?2:1)*x-me*$,ie=O+me*Math.abs(M),ee=fe+me*Math.abs($);J<0&&(J=0,ie=D+O),ae<0&&(ae=0,ee=P+fe),J+ie>r.width&&(me>0?ie=r.width-J:J=r.width-ie),ae+ee>r.height&&(me>0?ee=r.height-ae:ae=r.height-ee),st.update(le=>({...le,x:J,y:ae,width:ie,height:ee,update:!0}))},E=()=>{rt.set(!s)},q=M=>{if(M.metaKey||M.altKey||ci())return;const Q={1:()=>d(1),2:()=>d(2),3:()=>d(3),4:()=>d(4),c:()=>g(),t:()=>cs(),f:()=>as(i,u),D:()=>b(),d:()=>y(),m:()=>h(),"?":()=>E(),ArrowLeft:D=>T(-1,0,D),ArrowUp:D=>T(0,-1,D),ArrowRight:D=>T(1,0,D),ArrowDown:D=>T(0,1,D),Escape:()=>{A(),G.update(D=>({...D,cancelTrim:!0}))}}[M.key];Q&&(M.preventDefault(),Q(M))};return Et(()=>document.addEventListener("keydown",q)),en(()=>document.removeEventListener("keydown",q)),e.$$.update=()=>{e.$$.dirty&1&&(i=p.index),e.$$.dirty&1&&p.cancelTrim&&(Ce.set(!1),G.update(M=>({...M,cancelTrim:!1,isDefined:!1,triminprogress:!1})))},[p]}class gi extends Te{constructor(t){super(),Ee(this,t,hi,null,we,{})}}function Wn(e,t,n){const i=e.slice();return i[10]=t[n],i}function vi(e){let t;return{c(){t=k("div"),t.innerHTML="<p>Error loading image dimensions.</p>"},m(n,i){Y(n,t,i)},p:W,i:W,o:W,d(n){n&&X(t)}}}function _i(e){let t,n,i,s,r,o,l;const a=[yi,bi],c=[];function p(u,d){return u[9]==="quadrant"?0:1}return s=p(e),r=c[s]=a[s](e),{c(){t=k("div"),n=k("div"),i=k("div"),r.c(),m(i,"class","image-tracker svelte-rtgkln"),Z(i,"expanded",e[6]),Z(i,"quadrants",e[9]==="quadrant"),m(n,"class","image-shim svelte-rtgkln"),m(n,"style",o=`${e[7]}`),Z(n,"quadrant-padding",e[9]==="quadrant"),m(t,"class","image-base")},m(u,d){Y(u,t,d),f(t,n),f(n,i),c[s].m(i,null),l=!0},p(u,d){let h=s;s=p(u),s===h?c[s].p(u,d):(Ne(),K(c[h],1,1,()=>{c[h]=null}),Oe(),r=c[s],r?r.p(u,d):(r=c[s]=a[s](u),r.c()),U(r,1),r.m(i,null)),(!l||d[0]&64)&&Z(i,"expanded",u[6]),(!l||d[0]&512)&&Z(i,"quadrants",u[9]==="quadrant"),(!l||d[0]&128&&o!==(o=`${u[7]}`))&&m(n,"style",o),(!l||d[0]&512)&&Z(n,"quadrant-padding",u[9]==="quadrant")},i(u){l||(U(r),l=!0)},o(u){K(r),l=!1},d(u){u&&X(t),c[s].d()}}}function wi(e){let t;return{c(){t=k("div"),t.innerHTML='<div class="spinner svelte-rtgkln">Loading...</div>',m(t,"class","spinner-container svelte-rtgkln")},m(n,i){Y(n,t,i)},p:W,i:W,o:W,d(n){n&&X(t)}}}function bi(e){let t,n,i,s,r,o;return n=new fs({props:{index:e[10],frameSpecs:e[8]}}),n.$on("imageaction",e[30]),{c(){t=k("div"),pe(n.$$.fragment),m(t,"class","whole active svelte-rtgkln"),m(t,"style",i=`background-image:url(${e[1]});${e[7]}`)},m(l,a){Y(l,t,a),ue(n,t,null),s=!0,r||(o=B(t,"mouseenter",e[31]),r=!0)},p(l,a){const c={};a[0]&1024&&(c.index=l[10]),a[0]&256&&(c.frameSpecs=l[8]),n.$set(c),(!s||a[0]&130&&i!==(i=`background-image:url(${l[1]});${l[7]}`))&&m(t,"style",i)},i(l){s||(U(n.$$.fragment,l),s=!0)},o(l){K(n.$$.fragment,l),s=!1},d(l){l&&X(t),de(n),r=!1,o()}}}function yi(e){let t,n,i=[1,2,3,4],s=[];for(let o=0;o<4;o+=1)s[o]=Bn(Wn(e,i,o));const r=o=>K(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<4;o+=1)s[o].c();t=Mt()},m(o,l){for(let a=0;a<4;a+=1)s[a]&&s[a].m(o,l);Y(o,t,l),n=!0},p(o,l){if(l[0]&129955){i=[1,2,3,4];let a;for(a=0;a<4;a+=1){const c=Wn(o,i,a);s[a]?(s[a].p(c,l),U(s[a],1)):(s[a]=Bn(c),s[a].c(),U(s[a],1),s[a].m(t.parentNode,t))}for(Ne(),a=4;a<4;a+=1)r(a);Oe()}},i(o){if(!n){for(let l=0;l<4;l+=1)U(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<4;l+=1)K(s[l]);n=!1},d(o){Jn(s,o),o&&X(t)}}}function Bn(e){let t,n,i,s,r,o,l,a,c,p;s=new fs({props:{index:e[10],frameSpecs:{...e[8],...e[14](e[10]),factor:.5}}}),s.$on("expandaction",e[27]),s.$on("imageaction",e[28]);function u(){return e[29](e[10])}return{c(){t=k("div"),n=k("div"),i=H(),pe(s.$$.fragment),r=H(),m(t,"style",o=`background-image:url(${e[1]});${e[7]}`),m(t,"class",l=Ie(`${e[9]} quadrant-${e[10]}`)+" svelte-rtgkln"),Z(t,"active",e[0]===e[10])},m(d,h){Y(d,t,h),f(t,n),e[26](n),f(t,i),ue(s,t,null),f(t,r),a=!0,c||(p=[B(t,"mouseenter",u),B(t,"transitionstart",e[11]),B(t,"transitionend",e[12])],c=!0)},p(d,h){e=d;const v={};h[0]&256&&(v.frameSpecs={...e[8],...e[14](e[10]),factor:.5}),s.$set(v),(!a||h[0]&130&&o!==(o=`background-image:url(${e[1]});${e[7]}`))&&m(t,"style",o),(!a||h[0]&512&&l!==(l=Ie(`${e[9]} quadrant-${e[10]}`)+" svelte-rtgkln"))&&m(t,"class",l),(!a||h[0]&513)&&Z(t,"active",e[0]===e[10])},i(d){a||(U(s.$$.fragment,d),a=!0)},o(d){K(s.$$.fragment,d),a=!1},d(d){d&&X(t),e[26](null),de(s),c=!1,he(p)}}}function ki(e){let t,n,i,s,r,o;t=new gi({}),t.$on("downloadfile",e[20]),t.$on("downloadall",e[21]),t.$on("copytoclipboard",e[19]),t.$on("switchquadrant",e[18]),t.$on("expandaction",e[25]);const l=[wi,_i,vi],a=[];function c(p,u){return p[2]?0:p[3]&&p[4]?1:2}return i=c(e),s=a[i]=l[i](e),{c(){pe(t.$$.fragment),n=H(),s.c(),r=Mt()},m(p,u){ue(t,p,u),Y(p,n,u),a[i].m(p,u),Y(p,r,u),o=!0},p(p,u){let d=i;i=c(p),i===d?a[i].p(p,u):(Ne(),K(a[d],1,1,()=>{a[d]=null}),Oe(),s=a[i],s?s.p(p,u):(s=a[i]=l[i](p),s.c()),U(s,1),s.m(r.parentNode,r))},i(p){o||(U(t.$$.fragment,p),U(s),o=!0)},o(p){K(t.$$.fragment,p),K(s),o=!1},d(p){de(t,p),p&&X(n),a[i].d(p),p&&X(r)}}}function ji(e,t,n){let i,s,r,o,l,a,c,p,u;R(e,Kt,_=>n(34,o=_)),R(e,G,_=>n(22,l=_)),R(e,ot,_=>n(35,a=_)),R(e,Dn,_=>n(36,c=_)),R(e,_e,_=>n(23,p=_)),R(e,yt,_=>n(24,u=_));let{imageUrl:d}=t,{currentIndex:h}=t,v=!0,w,g,y,b,A=!1,T="",E;Et(async()=>{const _=await Q(d);yt.update(S=>({...S,width:_.width,height:_.height})),n(8,E={width:_.width,height:_.height,x1:0,y1:0,factor:1}),n(3,w=_.width),n(4,g=_.height),y=_.canvas,n(7,T=P(w,g))}),Ts(()=>{y&&b&&s==="whole"&&b.appendChild(y)});const q=_=>{_.target===_.currentTarget&&Kt.set(!0)},M=_=>{_.target===_.currentTarget&&(Kt.set(!1),c&&c!==h&&be(c))},$=async _=>{const S=new Image;return S.crossOrigin="anonymous",S.src=_,await S.decode(),S},Q=async _=>{n(2,v=!0);let S,F,z;try{const te=performance.now(),re=await $(_),ge=((performance.now()-te)/1e3).toFixed(2);return S=re.width,F=re.height,z=O(re,0,0,S,F),{width:S,height:F,canvas:z}}catch(te){console.error("Error getting image dimensions:",te)}finally{n(2,v=!1)}},D=tn(),P=(_,S)=>{const F=(ke,ge)=>ge===0?ke:F(ge,ke%ge),z=F(_,S),te=_/z,re=S/z;return`aspect-ratio: ${te} / ${re};`},O=(_,S,F,z,te)=>{const re=document.createElement("canvas"),ke=re.getContext("2d");return re.width=z,re.height=te,ke.drawImage(_,0,0,z,te),re},fe=(_,S,F)=>{let z,te;switch(_){case 1:z=0,te=0;break;case 2:z=S,te=0;break;case 3:z=0,te=F;break;case 4:z=S,te=F;break;default:z=0,te=0}return{sx:z,sy:te}},x=(_="download",S)=>{const F=parseInt(S)===0?w:w/2,z=parseInt(S)===0?g:g/2,te=document.createElement("canvas"),re=te.getContext("2d");te.width=F,te.height=z;let{sx:ke,sy:ge}=fe(S,F,z);re.drawImage(y,ke,ge,F,z,0,0,F,z);const Ye=te.toDataURL("image/png");switch(_){case"download":J(Ye,a[S],i),D("toastNotice",`Quadrant ${S} downloading.`);break;case"clipboard":ie(Ye);break;case"background":return Ye;default:console.error('Invalid action specified. Please use a valid action such as "download", "clipboard", or "background".');break}},me=(_,S,F)=>{const z=_.toDataURL(`image/${F}`,.95);J(z,S,F)},J=(_,S,F)=>{const z=document.createElement("a");z.href=_,z.download=`${S}${F}`,z.click()},ae=_=>{_.toBlob(S=>{const F=new ClipboardItem({"image/png":S});return navigator.clipboard.write([F])})},ie=_=>{fetch(_).then(S=>S.blob()).then(S=>{const F=new ClipboardItem({"image/png":S});return D("toastNotice",`Quadrant ${h} copied to clipboard.`),navigator.clipboard.write([F])}).then(()=>{console.log("Quadrant of image copied to clipboard successfully.")}).catch(S=>{console.error("Failed to copy quadrant of image to clipboard:",S)})},ee=(_,S)=>{const F=document.createElement("canvas"),z=F.getContext("2d");return F.width=S.width,F.height=S.height,z.drawImage(_,S.x,S.y,S.width,S.height,0,0,S.width,S.height),F},le=_=>{if(_==="downloadall"){[4,3,2,1].forEach(S=>x("download",S));return}if(s==="quadrant"&&!l.isDefined)x(_,l.index);else{const S=l.isDefined?ee(y,l):y;_==="download"?(me(S,a[h],i),D("toastNotice",l.isDefined?"Trim area downloading.":"Full image downloading.")):_==="clipboard"&&(ae(S),D("toastNotice",l.isDefined?"Trim area copied to clipboard":"Full image copied to clipboard."))}},ce=_=>{const S=parseInt(_)===1||parseInt(_)===3?0:w/2,F=parseInt(_)===1||parseInt(_)===2?0:g/2;return{x1:S,y1:F}},Se=()=>{G.update(_=>({..._,expanded:!_.expanded}))},He=_=>{o?Dn.set(_):be(_)},be=_=>{A||(n(0,h=_),G.update(S=>({...S,index:_})))},De=_=>be(_.detail.index),Xe=_=>le("clipboard"),j=_=>le("download"),L=_=>le("downloadall"),I=()=>Se();function N(_){$e[_?"unshift":"push"](()=>{b=_,n(5,b)})}const V=()=>Se(),C=_=>le(_.detail),Ae=_=>He(_),Pe=_=>le(_.detail),ye=()=>be(r);return e.$$set=_=>{"imageUrl"in _&&n(1,d=_.imageUrl),"currentIndex"in _&&n(0,h=_.currentIndex)},e.$$.update=()=>{e.$$.dirty[0]&16777216&&(i=u.extension),e.$$.dirty[0]&8388608&&n(9,s=p.mode),e.$$.dirty[0]&4194304&&n(10,r=l.index),e.$$.dirty[0]&4194304&&n(6,A=l.expanded)},[h,d,v,w,g,b,A,T,E,s,r,q,M,le,ce,Se,He,be,De,Xe,j,L,l,p,u,I,N,V,C,Ae,Pe,ye]}class Mi extends Te{constructor(t){super(),Ee(this,t,ji,ki,we,{imageUrl:1,currentIndex:0},null,[-1,-1])}}function Ei(e){let t,n,i,s,r,o,l,a,c;return s=new Mi({props:{imageUrl:e[0],currentIndex:e[3]}}),s.$on("toastNotice",e[2]),o=new ri({}),a=new Gs({}),{c(){t=k("main"),n=k("div"),i=k("div"),pe(s.$$.fragment),r=H(),pe(o.$$.fragment),l=H(),pe(a.$$.fragment),m(i,"class","image-stage svelte-1wix96r"),Z(i,"fullscreen",e[1]),m(n,"class","image-wrapper svelte-1wix96r")},m(p,u){Y(p,t,u),f(t,n),f(n,i),ue(s,i,null),f(t,r),ue(o,t,null),Y(p,l,u),ue(a,p,u),c=!0},p(p,[u]){const d={};u&1&&(d.imageUrl=p[0]),s.$set(d),(!c||u&2)&&Z(i,"fullscreen",p[1])},i(p){c||(U(s.$$.fragment,p),U(o.$$.fragment,p),U(a.$$.fragment,p),c=!0)},o(p){K(s.$$.fragment,p),K(o.$$.fragment,p),K(a.$$.fragment,p),c=!1},d(p){p&&X(t),de(s),de(o),p&&X(l),de(a,p)}}}function Ti(e,t,n){let i,s,r,o;R(e,ot,y=>n(6,i=y)),R(e,ln,y=>n(7,s=y)),R(e,_e,y=>n(8,r=y)),R(e,ze,y=>n(1,o=y));let l,a;window.location.search&&(a=new URLSearchParams(window.location.search)),l=(a==null?void 0:a.get("image"))||"https://media.discordapp.net/attachments/1060231236733382769/1126296883850137600/sidewaysdesign_greyscale_city_skyline_multicolour_equalizer_gra_11365019-942e-4970-9a45-b109a2fe7c08.png";const c={duration:1500,intro:{x:256}},p=y=>zt.push(y.detail,c),u=y=>{const b=y.split("/").pop(),[A,T,E]=b.match(/(.+)(\.\w+)$/)??[];return{rootname:T??b,imageExtension:E??""}},{rootname:d,imageExtension:h}=u(l);yt.update(y=>({...y,url:l,extension:h}));let{mode:v}=r,w={currentMode:v,currentName:d,currentIndex:v==="quadrant"?1:0,filenames:[d,...Array.from([1,2,3,4],(y,b)=>`${d}${s}${b+1}`)]};ms(ot,i=w.filenames,i);let g=w.currentIndex;return w.currentIndex=g,[l,o,p,g]}class Ai extends Te{constructor(t){super(),Ee(this,t,Ti,Ei,we,{})}}new Ai({target:document.getElementById("app")});
