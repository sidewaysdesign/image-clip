(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Q(){}const Re=e=>e;function Zt(e,t){for(const n in t)e[n]=t[n];return e}function Gn(e){return e()}function Ln(){return Object.create(null)}function he(e){e.forEach(Gn)}function ct(e){return typeof e=="function"}function be(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function vs(e){return Object.keys(e).length===0}function Jn(e,...t){if(e==null)return Q;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function en(e){let t;return Jn(e,n=>t=n)(),t}function U(e,t,n){e.$$.on_destroy.push(Jn(t,n))}function Ne(e){return e??""}function _s(e,t,n){return e.set(n),t}function qn(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const es=typeof window<"u";let kt=es?()=>window.performance.now():()=>Date.now(),tn=es?e=>requestAnimationFrame(e):Q;const it=new Set;function ts(e){it.forEach(t=>{t.c(e)||(it.delete(t),t.f())}),it.size!==0&&tn(ts)}function xt(e){let t;return it.size===0&&tn(ts),{promise:new Promise(n=>{it.add(t={c:e,f:n})}),abort(){it.delete(t)}}}function d(e,t){e.appendChild(t)}function ns(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function bs(e){const t=y("style");return ys(ns(e),t),t.sheet}function ys(e,t){return d(e.head||e,t),t.sheet}function K(e,t,n){e.insertBefore(t,n||null)}function W(e){e.parentNode&&e.parentNode.removeChild(e)}function ss(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function ve(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ne(e){return document.createTextNode(e)}function L(){return ne(" ")}function Mt(){return ne("")}function B(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function ws(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function f(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Bt(e,t,n){e.setAttributeNS("http://www.w3.org/1999/xlink",t,n)}function ks(e){return Array.from(e.childNodes)}function nt(e,t){t=""+t,e.data!==t&&(e.data=t)}function xs(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function is(e,t,n,i){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function G(e,t,n){e.classList[n?"add":"remove"](t)}function ls(e,t,{bubbles:n=!1,cancelable:i=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,i,t),s}class Ms{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=ve(n.nodeName):this.e=y(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)K(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(W)}}function $n(e,t){return new e(t)}const jt=new Map;let Rt=0;function Es(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function Ts(e,t){const n={stylesheet:bs(t),rules:{}};return jt.set(e,n),n}function bt(e,t,n,i,s,r,o,l=0){const a=16.666/i;let c=`{
`;for(let b=0;b<=1;b+=a){const T=t+(n-t)*r(b);c+=b*100+`%{${o(T,1-T)}}
`}const m=c+`100% {${o(n,1-n)}}
}`,u=`__svelte_${Es(m)}_${l}`,p=ns(e),{stylesheet:h,rules:g}=jt.get(p)||Ts(p,e);g[u]||(g[u]=!0,h.insertRule(`@keyframes ${u} ${m}`,h.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${u} ${i}ms linear ${s}ms 1 both`,Rt+=1,u}function yt(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=n.length-i.length;s&&(e.style.animation=i.join(", "),Rt-=s,Rt||As())}function As(){tn(()=>{Rt||(jt.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&W(t)}),jt.clear())})}function Hs(e,t,n,i){if(!t)return Q;const s=e.getBoundingClientRect();if(t.left===s.left&&t.right===s.right&&t.top===s.top&&t.bottom===s.bottom)return Q;const{delay:r=0,duration:o=300,easing:l=Re,start:a=kt()+r,end:c=a+o,tick:m=Q,css:u}=n(e,{from:t,to:s},i);let p=!0,h=!1,g;function v(){u&&(g=bt(e,0,1,o,r,l,u)),r||(h=!0)}function b(){u&&yt(e,g),p=!1}return xt(T=>{if(!h&&T>=a&&(h=!0),h&&T>=c&&(m(1,0),b()),!p)return!1;if(h){const w=T-a,M=0+1*l(w/o);m(M,1-M)}return!0}),v(),m(0,1),b}function Cs(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:i}=t,s=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=i,rs(e,s)}}function rs(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const i=getComputedStyle(e),s=i.transform==="none"?"":i.transform;e.style.transform=`${s} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let wt;function _t(e){wt=e}function Yt(){if(!wt)throw new Error("Function called outside component initialization");return wt}function Et(e){Yt().$$.on_mount.push(e)}function Ss(e){Yt().$$.after_update.push(e)}function nn(e){Yt().$$.on_destroy.push(e)}function sn(){const e=Yt();return(t,n,{cancelable:i=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=ls(t,n,{cancelable:i});return s.slice().forEach(o=>{o.call(e,r)}),!r.defaultPrevented}return!0}}const tt=[],Ie=[];let lt=[];const In=[],os=Promise.resolve();let Gt=!1;function as(){Gt||(Gt=!0,os.then(cs))}function Ls(){return as(),os}function xe(e){lt.push(e)}const Kt=new Set;let Je=0;function cs(){if(Je!==0)return;const e=wt;do{try{for(;Je<tt.length;){const t=tt[Je];Je++,_t(t),qs(t.$$)}}catch(t){throw tt.length=0,Je=0,t}for(_t(null),tt.length=0,Je=0;Ie.length;)Ie.pop()();for(let t=0;t<lt.length;t+=1){const n=lt[t];Kt.has(n)||(Kt.add(n),n())}lt.length=0}while(tt.length);for(;In.length;)In.pop()();Gt=!1,Kt.clear(),_t(e)}function qs(e){if(e.fragment!==null){e.update(),he(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(xe)}}function $s(e){const t=[],n=[];lt.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),lt=t}let gt;function ln(){return gt||(gt=Promise.resolve(),gt.then(()=>{gt=null})),gt}function Ue(e,t,n){e.dispatchEvent(ls(`${t?"intro":"outro"}${n}`))}const Ft=new Set;let ke;function Oe(){ke={r:0,c:[],p:ke}}function De(){ke.r||he(ke.c),ke=ke.p}function Y(e,t){e&&e.i&&(Ft.delete(e),e.i(t))}function V(e,t,n,i){if(e&&e.o){if(Ft.has(e))return;Ft.add(e),ke.c.push(()=>{Ft.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const rn={duration:0};function Is(e,t,n){const i={direction:"in"};let s=t(e,n,i),r=!1,o,l,a=0;function c(){o&&yt(e,o)}function m(){const{delay:p=0,duration:h=300,easing:g=Re,tick:v=Q,css:b}=s||rn;b&&(o=bt(e,0,1,h,p,g,b,a++)),v(0,1);const T=kt()+p,w=T+h;l&&l.abort(),r=!0,xe(()=>Ue(e,!0,"start")),l=xt(M=>{if(r){if(M>=w)return v(1,0),Ue(e,!0,"end"),c(),r=!1;if(M>=T){const E=g((M-T)/h);v(E,1-E)}}return r})}let u=!1;return{start(){u||(u=!0,yt(e),ct(s)?(s=s(i),ln().then(m)):m())},invalidate(){u=!1},end(){r&&(c(),r=!1)}}}function Ns(e,t,n){const i={direction:"out"};let s=t(e,n,i),r=!0,o;const l=ke;l.r+=1;function a(){const{delay:c=0,duration:m=300,easing:u=Re,tick:p=Q,css:h}=s||rn;h&&(o=bt(e,1,0,m,c,u,h));const g=kt()+c,v=g+m;xe(()=>Ue(e,!1,"start")),xt(b=>{if(r){if(b>=v)return p(0,1),Ue(e,!1,"end"),--l.r||he(l.c),!1;if(b>=g){const T=u((b-g)/m);p(1-T,T)}}return r})}return ct(s)?ln().then(()=>{s=s(i),a()}):a(),{end(c){c&&s.tick&&s.tick(1,0),r&&(o&&yt(e,o),r=!1)}}}function Dt(e,t,n,i){const s={direction:"both"};let r=t(e,n,s),o=i?0:1,l=null,a=null,c=null;function m(){c&&yt(e,c)}function u(h,g){const v=h.b-o;return g*=Math.abs(v),{a:o,b:h.b,d:v,duration:g,start:h.start,end:h.start+g,group:h.group}}function p(h){const{delay:g=0,duration:v=300,easing:b=Re,tick:T=Q,css:w}=r||rn,M={start:kt()+g,b:h};h||(M.group=ke,ke.r+=1),l||a?a=M:(w&&(m(),c=bt(e,o,h,v,g,b,w)),h&&T(0,1),l=u(M,v),xe(()=>Ue(e,h,"start")),xt(E=>{if(a&&E>a.start&&(l=u(a,v),a=null,Ue(e,l.b,"start"),w&&(m(),c=bt(e,o,l.b,l.duration,0,b,r.css))),l){if(E>=l.end)T(o=l.b,1-o),Ue(e,l.b,"end"),a||(l.b?m():--l.group.r||he(l.group.c)),l=null;else if(E>=l.start){const A=E-l.start;o=l.a+l.d*b(A/l.duration),T(o,1-o)}}return!!(l||a)}))}return{run(h){ct(r)?ln().then(()=>{r=r(s),p(h)}):p(h)},end(){m(),l=a=null}}}function Os(e,t){V(e,1,1,()=>{t.delete(e.key)})}function Ds(e,t){e.f(),Os(e,t)}function zs(e,t,n,i,s,r,o,l,a,c,m,u){let p=e.length,h=r.length,g=p;const v={};for(;g--;)v[e[g].key]=g;const b=[],T=new Map,w=new Map,M=[];for(g=h;g--;){const _=u(s,r,g),H=n(_);let O=o.get(H);O?i&&M.push(()=>O.p(_,t)):(O=c(H,_),O.c()),T.set(H,b[g]=O),H in v&&w.set(H,Math.abs(g-v[H]))}const E=new Set,A=new Set;function $(_){Y(_,1),_.m(l,m),o.set(_.key,_),m=_.first,h--}for(;p&&h;){const _=b[h-1],H=e[p-1],O=_.key,F=H.key;_===H?(m=_.first,p--,h--):T.has(F)?!o.has(O)||E.has(O)?$(_):A.has(F)?p--:w.get(O)>w.get(F)?(A.add(O),$(_)):(E.add(F),p--):(a(H,o),p--)}for(;p--;){const _=e[p];T.has(_.key)||a(_,o)}for(;h;)$(b[h-1]);return he(M),b}function Ps(e,t){const n={},i={},s={$$scope:1};let r=e.length;for(;r--;){const o=e[r],l=t[r];if(l){for(const a in o)a in l||(i[a]=1);for(const a in l)s[a]||(n[a]=l[a],s[a]=1);e[r]=l}else for(const a in o)s[a]=1}for(const o in i)o in n||(n[o]=void 0);return n}function Fs(e){return typeof e=="object"&&e!==null?e:{}}const Us=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...Us];function pe(e){e&&e.c()}function ue(e,t,n,i){const{fragment:s,after_update:r}=e.$$;s&&s.m(t,n),i||xe(()=>{const o=e.$$.on_mount.map(Gn).filter(ct);e.$$.on_destroy?e.$$.on_destroy.push(...o):he(o),e.$$.on_mount=[]}),r.forEach(xe)}function de(e,t){const n=e.$$;n.fragment!==null&&($s(n.after_update),he(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function js(e,t){e.$$.dirty[0]===-1&&(tt.push(e),as(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Me(e,t,n,i,s,r,o,l=[-1]){const a=wt;_t(e);const c=e.$$={fragment:null,ctx:[],props:r,update:Q,not_equal:s,bound:Ln(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:Ln(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};o&&o(c.root);let m=!1;if(c.ctx=n?n(e,t.props||{},(u,p,...h)=>{const g=h.length?h[0]:p;return c.ctx&&s(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),m&&js(e,u)),p}):[],c.update(),m=!0,he(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const u=ks(t.target);c.fragment&&c.fragment.l(u),u.forEach(W)}else c.fragment&&c.fragment.c();t.intro&&Y(e.$$.fragment),ue(e,t.target,t.anchor,t.customElement),cs()}_t(a)}class Ee{$destroy(){de(this,1),this.$destroy=Q}$on(t,n){if(!ct(n))return Q;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!vs(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function us(e){const t=e-1;return t*t*t+1}function vt(e,{delay:t=0,duration:n=400,easing:i=Re}={}){const s=+getComputedStyle(e).opacity;return{delay:t,duration:n,easing:i,css:r=>`opacity: ${r*s}`}}function Rs(e,{delay:t=0,duration:n=400,easing:i=us,x:s=0,y:r=0,opacity:o=0}={}){const l=getComputedStyle(e),a=+l.opacity,c=l.transform==="none"?"":l.transform,m=a*(1-o),[u,p]=qn(s),[h,g]=qn(r);return{delay:t,duration:n,easing:i,css:(v,b)=>`
			transform: ${c} translate(${(1-v)*u}${p}, ${(1-v)*h}${g});
			opacity: ${a-m*b}`}}function Xs(e,{from:t,to:n},i={}){const s=getComputedStyle(e),r=s.transform==="none"?"":s.transform,[o,l]=s.transformOrigin.split(" ").map(parseFloat),a=t.left+t.width*o/n.width-(n.left+o),c=t.top+t.height*l/n.height-(n.top+l),{delay:m=0,duration:u=h=>Math.sqrt(h)*120,easing:p=us}=i;return{delay:m,duration:ct(u)?u(Math.sqrt(a*a+c*c)):u,easing:p,css:(h,g)=>{const v=g*a,b=g*c,T=h+g*t.width/n.width,w=h+g*t.height/n.height;return`transform: ${r} translate(${v}px, ${b}px) scale(${T}, ${w});`}}}const et=[];function Ys(e,t){return{subscribe:oe(e,t).subscribe}}function oe(e,t=Q){let n;const i=new Set;function s(l){if(be(e,l)&&(e=l,n)){const a=!et.length;for(const c of i)c[1](),et.push(c,e);if(a){for(let c=0;c<et.length;c+=2)et[c][0](et[c+1]);et.length=0}}}function r(l){s(l(e))}function o(l,a=Q){const c=[l,a];return i.add(c),i.size===1&&(n=t(s)||Q),l(e),()=>{i.delete(c),i.size===0&&n&&(n(),n=null)}}return{set:s,update:r,subscribe:o}}const Ws={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}};function Bs(){const{subscribe:e,update:t}=oe(new Array),n={};let i=0;function s(c){return c instanceof Object}function r(c="default",m={}){return n[c]=m,n}function o(c,m){const u={target:"default",...s(c)?c:{...m,msg:c}},p=n[u.target]||{},h={...Ws,...p,...u,theme:{...p.theme,...u.theme},classes:[...p.classes||[],...u.classes||[]],id:++i};return t(g=>h.reversed?[...g,h]:[h,...g]),i}function l(c){t(m=>{if(!m.length||c===0)return[];if(typeof c=="function")return m.filter(p=>c(p));if(s(c))return m.filter(p=>p.target!==c.target);const u=c||Math.max(...m.map(p=>p.id));return m.filter(p=>p.id!==u)})}function a(c,m){const u=s(c)?c:{...m,id:c};t(p=>{const h=p.findIndex(g=>g.id===u.id);return h>-1&&(p[h]={...p[h],...u}),p})}return{subscribe:e,push:o,pop:l,set:a,_init:r}}const Xt=Bs();function Nn(e){return Object.prototype.toString.call(e)==="[object Date]"}function Jt(e,t){if(e===t||e!==e)return()=>e;const n=typeof e;if(n!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const i=t.map((s,r)=>Jt(e[r],s));return s=>i.map(r=>r(s))}if(n==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Nn(e)&&Nn(t)){e=e.getTime(),t=t.getTime();const r=t-e;return o=>new Date(e+o*r)}const i=Object.keys(t),s={};return i.forEach(r=>{s[r]=Jt(e[r],t[r])}),r=>{const o={};return i.forEach(l=>{o[l]=s[l](r)}),o}}if(n==="number"){const i=t-e;return s=>e+s*i}throw new Error(`Cannot interpolate ${n} values`)}function Ks(e,t={}){const n=oe(e);let i,s=e;function r(o,l){if(e==null)return n.set(e=o),Promise.resolve();s=o;let a=i,c=!1,{delay:m=0,duration:u=400,easing:p=Re,interpolate:h=Jt}=Zt(Zt({},t),l);if(u===0)return a&&(a.abort(),a=null),n.set(e=s),Promise.resolve();const g=kt()+m;let v;return i=xt(b=>{if(b<g)return!0;c||(v=h(e,o),typeof u=="function"&&(u=u(e,o)),c=!0),a&&(a.abort(),a=null);const T=b-g;return T>u?(n.set(e=o),!1):(n.set(e=v(p(T/u))),!0)}),i.promise}return{set:r,update:(o,l)=>r(o(s,e),l),subscribe:n.subscribe}}function Qs(e){let t,n=e[0].msg+"",i;return{c(){t=new Ms(!1),i=Mt(),t.a=i},m(s,r){t.m(n,s,r),K(s,i,r)},p(s,r){r&1&&n!==(n=s[0].msg+"")&&t.p(n)},i:Q,o:Q,d(s){s&&W(i),s&&t.d()}}}function Vs(e){let t,n,i;const s=[e[2]];var r=e[0].component.src;function o(l){let a={};for(let c=0;c<s.length;c+=1)a=Zt(a,s[c]);return{props:a}}return r&&(t=$n(r,o())),{c(){t&&pe(t.$$.fragment),n=Mt()},m(l,a){t&&ue(t,l,a),K(l,n,a),i=!0},p(l,a){const c=a&4?Ps(s,[Fs(l[2])]):{};if(a&1&&r!==(r=l[0].component.src)){if(t){Oe();const m=t;V(m.$$.fragment,1,0,()=>{de(m,1)}),De()}r?(t=$n(r,o()),pe(t.$$.fragment),Y(t.$$.fragment,1),ue(t,n.parentNode,n)):t=null}else r&&t.$set(c)},i(l){i||(t&&Y(t.$$.fragment,l),i=!0)},o(l){t&&V(t.$$.fragment,l),i=!1},d(l){l&&W(n),t&&de(t,l)}}}function On(e){let t,n,i;return{c(){t=y("div"),f(t,"class","_toastBtn pe svelte-95rq8t"),f(t,"role","button"),f(t,"tabindex","0")},m(s,r){K(s,t,r),n||(i=[B(t,"click",e[4]),B(t,"keydown",e[8])],n=!0)},p:Q,d(s){s&&W(t),n=!1,he(i)}}}function Zs(e){let t,n,i,s,r,o,l,a,c,m;const u=[Vs,Qs],p=[];function h(v,b){return v[0].component?0:1}i=h(e),s=p[i]=u[i](e);let g=e[0].dismissable&&On(e);return{c(){t=y("div"),n=y("div"),s.c(),r=L(),g&&g.c(),o=L(),l=y("progress"),f(n,"role","status"),f(n,"class","_toastMsg svelte-95rq8t"),G(n,"pe",e[0].component),f(l,"class","_toastBar svelte-95rq8t"),l.value=e[1],f(t,"class","_toastItem svelte-95rq8t"),G(t,"pe",e[0].pausable)},m(v,b){K(v,t,b),d(t,n),p[i].m(n,null),d(t,r),g&&g.m(t,null),d(t,o),d(t,l),a=!0,c||(m=[B(t,"mouseenter",e[9]),B(t,"mouseleave",e[6])],c=!0)},p(v,[b]){let T=i;i=h(v),i===T?p[i].p(v,b):(Oe(),V(p[T],1,1,()=>{p[T]=null}),De(),s=p[i],s?s.p(v,b):(s=p[i]=u[i](v),s.c()),Y(s,1),s.m(n,null)),(!a||b&1)&&G(n,"pe",v[0].component),v[0].dismissable?g?g.p(v,b):(g=On(v),g.c(),g.m(t,o)):g&&(g.d(1),g=null),(!a||b&2)&&(l.value=v[1]),(!a||b&1)&&G(t,"pe",v[0].pausable)},i(v){a||(Y(s),a=!0)},o(v){V(s),a=!1},d(v){v&&W(t),p[i].d(),g&&g.d(),c=!1,he(m)}}}function Qt(e,t="undefined"){return typeof e===t}function Gs(e,t,n){let i,{item:s}=t,r=s.initial,o=r,l=!1,a={},c;const m=Ks(s.initial,{duration:s.duration,easing:Re});U(e,m,w=>n(1,i=w));function u(){Xt.pop(s.id)}function p(){(i===1||i===0)&&u()}function h(){!l&&i!==r&&(m.set(i,{duration:0}),l=!0)}function g(){if(l){const w=s.duration,M=w-w*((i-o)/(r-o));m.set(r,{duration:M}).then(p),l=!1}}function v(w=document){if(Qt(w.hidden))return;const M=()=>w.hidden?h():g(),E="visibilitychange";w.addEventListener(E,M),c=()=>w.removeEventListener(E,M),M()}Et(v),nn(()=>{Qt(s.onpop,"function")&&s.onpop(s.id),c&&c()});const b=w=>{w instanceof KeyboardEvent&&["Enter"," "].includes(w.key)&&u()},T=()=>{s.pausable&&h()};return e.$$set=w=>{"item"in w&&n(0,s=w.item)},e.$$.update=()=>{if(e.$$.dirty&1&&(Qt(s.progress)||n(0,s.next=s.progress,s)),e.$$.dirty&131&&r!==s.next&&(n(7,r=s.next),o=i,l=!1,m.set(r).then(p)),e.$$.dirty&1&&s.component){const{props:w={},sendIdTo:M}=s.component;n(2,a={...w,...M&&{[M]:s.id}})}},[s,i,a,m,u,h,g,r,b,T]}class Js extends Ee{constructor(t){super(),Me(this,t,Gs,Zs,be,{item:0})}}function Dn(e,t,n){const i=e.slice();return i[4]=t[n],i}function zn(e,t){let n,i,s,r,o,l,a,c,m=Q,u;return i=new Js({props:{item:t[4]}}),{key:e,first:null,c(){var p;n=y("li"),pe(i.$$.fragment),s=L(),f(n,"class",r=Ne((p=t[4].classes)==null?void 0:p.join(" "))+" svelte-1u812xz"),f(n,"style",o=Pn(t[4].theme)),this.first=n},m(p,h){K(p,n,h),ue(i,n,null),d(n,s),u=!0},p(p,h){var v;t=p;const g={};h&1&&(g.item=t[4]),i.$set(g),(!u||h&1&&r!==(r=Ne((v=t[4].classes)==null?void 0:v.join(" "))+" svelte-1u812xz"))&&f(n,"class",r),(!u||h&1&&o!==(o=Pn(t[4].theme)))&&f(n,"style",o)},r(){c=n.getBoundingClientRect()},f(){Cs(n),m(),rs(n,c)},a(){m(),m=Hs(n,c,Xs,{duration:200})},i(p){u||(Y(i.$$.fragment,p),xe(()=>{u&&(a&&a.end(1),l=Is(n,Rs,t[4].intro),l.start())}),u=!0)},o(p){V(i.$$.fragment,p),l&&l.invalidate(),a=Ns(n,vt,{}),u=!1},d(p){p&&W(n),de(i),p&&a&&a.end()}}}function ei(e){let t,n=[],i=new Map,s,r=e[0];const o=l=>l[4].id;for(let l=0;l<r.length;l+=1){let a=Dn(e,r,l),c=o(a);i.set(c,n[l]=zn(c,a))}return{c(){t=y("ul");for(let l=0;l<n.length;l+=1)n[l].c();f(t,"class","_toastContainer svelte-1u812xz")},m(l,a){K(l,t,a);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(t,null);s=!0},p(l,[a]){if(a&1){r=l[0],Oe();for(let c=0;c<n.length;c+=1)n[c].r();n=zs(n,a,o,1,l,r,i,t,Ds,zn,null,Dn);for(let c=0;c<n.length;c+=1)n[c].a();De()}},i(l){if(!s){for(let a=0;a<r.length;a+=1)Y(n[a]);s=!0}},o(l){for(let a=0;a<n.length;a+=1)V(n[a]);s=!1},d(l){l&&W(t);for(let a=0;a<n.length;a+=1)n[a].d()}}}function Pn(e){return e?Object.keys(e).reduce((t,n)=>`${t}${n}:${e[n]};`,""):void 0}function ti(e,t,n){let i;U(e,Xt,l=>n(3,i=l));let{options:s={}}=t,{target:r="default"}=t,o=[];return e.$$set=l=>{"options"in l&&n(1,s=l.options),"target"in l&&n(2,r=l.target)},e.$$.update=()=>{e.$$.dirty&6&&Xt._init(r,s),e.$$.dirty&12&&n(0,o=i.filter(l=>l.target===r))},[o,s,r,i]}class ni extends Ee{constructor(t){super(),Me(this,t,ti,ei,be,{options:1,target:2})}}const ds="colorMixerParams",Fn=localStorage.getItem(ds),Un={mode:"whole"},ot=oe([]),J=oe({triminprogress:!1,isDefined:!1,cancelTrim:!1,index:0,x:0,y:0,width:0,height:0,mode:"whole",expanded:!1}),st=oe({x:0,y:0,width:0,height:0,update:!1}),at=oe({width:0,height:0,originalUrl:"",url:"",extension:""}),Te=oe(!1),rt=oe(!1),Ut=oe(!1);oe(null);const je=oe(!1),Vt=oe(!1),jn=oe(null);oe("");const si=oe(null),_e=oe(Fn?{...Un,...JSON.parse(Fn)}:Un),on=Ys("_quad");_e.subscribe(e=>{localStorage.setItem(ds,JSON.stringify(e))});function ii(e){let t;return{c(){t=y("div"),t.innerHTML=`<svg id="a" xmlns="http://www.w3.org/2000/svg" width="65.454" height="42.886" viewBox="0 0 65.454 42.886" class="svelte-bpckiz"><defs><style>.b {
          fill: none;
          stroke: #fff;
          stroke-linecap: round;
          stroke-linejoin: round;
        }
      </style></defs><polyline class="b" points="36.725 9.196 32.727 5.198 28.729 9.196"></polyline><line class="b" x1="32.727" y1="5.198" x2="32.727" y2="16.615"></line><path class="b" d="m39.92.5h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464V2.964c0-1.358-1.105-2.464-2.464-2.464Z"></path><polyline class="b" points="36.725 33.688 32.727 37.686 28.729 33.688"></polyline><line class="b" x1="32.727" y1="37.686" x2="32.727" y2="27.019"></line><path class="b" d="m42.383,39.92v-14.385c0-1.358-1.105-2.464-2.464-2.464h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464Z"></path><polyline class="b" points="9.196 28.732 5.198 32.73 9.196 36.728"></polyline><line class="b" x1="5.198" y1="32.73" x2="15.865" y2="32.73"></line><path class="b" d="m.5,25.537v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464v-14.385c0-1.358-1.105-2.464-2.464-2.464H2.964c-1.358,0-2.464,1.105-2.464,2.464Z"></path><polyline class="b" points="56.259 28.732 60.257 32.73 56.259 36.728"></polyline><line class="b" x1="60.257" y1="32.73" x2="49.59" y2="32.73"></line><path class="b" d="m62.491,23.074h-14.385c-1.358,0-2.464,1.105-2.464,2.464v14.385c0,1.358,1.105,2.464,2.464,2.464h14.385c1.358,0,2.464-1.105,2.464-2.464v-14.385c0-1.358-1.105-2.464-2.464-2.464Z"></path></svg>`,f(t,"class","icon")},m(n,i){K(n,t,i)},p:Q,i:Q,o:Q,d(n){n&&W(t)}}}class zt extends Ee{constructor(t){super(),Me(this,t,null,ii,be,{})}}function li(e){let t,n,i,s,r,o,l,a,c,m,u,p,h,g,v,b,T,w,M,E,A,$,_,H,O,F,j,P,fe,q,me,ee,ae,ie,te,le,ce,Ae,He,ye,ze,Xe,k,I,D,z,Z,C,Pe,Ce,Se,x,S,R,X,N,re,we,ge,Ye,Tt,an,At,cn,ut,Ht,We,un,dn,dt,Be,Ct,fn,Ke,pn,mn,ft,Qe,St,hn,Ve,gn,vn,pt,Le,Lt,_n,qt,bn,Ze,yn,wn,$t,kn,It,xn,Nt,Mn,Ot,En,Fe,Tn,An,Hn,mt,Cn,ht,qe,$e,Wt,Sn;return We=new zt({}),Ke=new zt({}),Ve=new zt({}),Ze=new zt({}),{c(){t=y("div"),i=L(),s=y("div"),r=y("div"),o=L(),l=y("h3"),l.textContent="Quickly trim, save and copy to the clipboard images opened directly in a browser tab.",a=L(),c=y("p"),c.textContent="Works with PNG, WebP and JPEG formats.",m=L(),u=y("div"),p=y("div"),p.innerHTML=`<div class="icon-row svelte-964x62"><div class="icon-unit svelte-964x62"><div id="icon-mode-whole" class="icon-mode-whole svelte-964x62"></div> 
          <label for="icon-mode-whole" class="svelte-964x62"><span class="svelte-964x62">Whole</span></label></div> 
        <div class="icon-unit svelte-964x62"><div id="icon-mode-quadrant" class="icon-mode-quadrant svelte-964x62"></div> 
          <label for="icon-mode-quadrant" class="svelte-964x62"><span class="svelte-964x62">Quadrant</span></label></div></div>`,h=L(),g=y("div"),g.innerHTML=`<h4 class="svelte-964x62">Modes</h4> 
      <p class="svelte-964x62">Whole mode is based on the entire image. Quadrant mode splits the image into four equal quadrants. In quadrant mode, hover over individual quadrant to activate.</p>`,v=L(),b=y("div"),b.innerHTML=`<div class="icon-group svelte-964x62"><div class="icon-row svelte-964x62"><div class="icon-unit svelte-964x62"><div id="icon-expand" class="icon-expand svelte-964x62"></div> 
            <label for="icon-expand" class="svelte-964x62"><span class="svelte-964x62">Expand</span></label></div> 
          <div class="icon-unit svelte-964x62"><div id="icon-shrink" class="icon-shrink svelte-964x62"></div> 
            <label for="icon-shrink" class="svelte-964x62"><span class="svelte-964x62">Shrink</span></label></div></div></div>`,T=L(),w=y("div"),w.innerHTML=`<h4 class="svelte-964x62">Expand/Shrink</h4> 
      <p class="svelte-964x62">Expand quadrant to fill screen/shrink return to 4 quadrants.</p>`,M=L(),E=y("div"),E.innerHTML='<div class="icon-unit svelte-964x62"><div class="icon-triminactive svelte-964x62"></div></div>',A=L(),$=y("div"),$.innerHTML=`<h4 class="svelte-964x62">Trim</h4> 
      <p class="svelte-964x62">Draw a rectangular trim area to save or copy part of an image. Click-drag within trim area to move. Drag handles to adjust size. Click outside trim area to reset. Trim tool is only available in a quadrant when expanded.</p>`,_=L(),H=y("div"),H.innerHTML='<div class="icon-unit svelte-964x62"><div class="icon-clipboard svelte-964x62"></div></div>',O=L(),F=y("div"),F.innerHTML=`<h4 class="svelte-964x62">Copy</h4> 
      <p class="svelte-964x62">Copies the image to the clipboard.</p>`,j=L(),P=y("div"),P.innerHTML='<div class="icon-unit svelte-964x62"><div class="icon-download svelte-964x62"></div></div>',fe=L(),q=y("div"),q.innerHTML=`<h4 class="svelte-964x62">Download</h4> 
      <p class="svelte-964x62">Saves the image to the browser download directory.</p>`,me=L(),ee=y("div"),ee.innerHTML='<div class="icon-unit svelte-964x62"></div>',ae=L(),ie=y("div"),te=y("h4"),te.textContent="Filename",le=L(),ce=y("p"),Ae=ne('Click on filename area to edit. Quadrants are suffixed with "'),He=ne(e[0]),ye=ne('1", "'),ze=ne(e[0]),Xe=ne('2" '),k=y("em"),k.textContent="etc.",I=ne(" unless manually edited."),D=L(),z=y("div"),z.innerHTML='<div class="icon-unit svelte-964x62"><div class="icon-exit svelte-964x62"></div></div>',Z=L(),C=y("div"),C.innerHTML=`<h4 class="svelte-964x62">Exit</h4> 
      <p class="svelte-964x62">Exits QuickTrim and reloads the image in the browser tab.</p>`,Pe=L(),Ce=y("div"),Se=L(),x=y("div"),S=y("h4"),S.textContent="Keyboard Shortcuts",R=L(),X=y("div"),N=y("ul"),re=y("li"),re.innerHTML='<span class="keycap svelte-964x62">M</span> Toggle between whole and quadrant modes',we=L(),ge=y("li"),ge.innerHTML=`<div class="combo svelte-964x62"><span class="keycap svelte-964x62">1</span> <span class="keycap svelte-964x62">2</span> <span class="keycap svelte-964x62">3</span> <span class="keycap svelte-964x62">4</span></div>
            Switch focus to specific quadrant`,Ye=L(),Tt=y("li"),Tt.innerHTML='<span class="keycap svelte-964x62">F</span> Toggle fullscreen mode (in quadrant mode)',an=L(),At=y("li"),At.innerHTML='<span class="keycap svelte-964x62">T</span> Activate trim tool',cn=L(),ut=y("li"),Ht=y("div"),pe(We.$$.fragment),un=ne(`
            Nudge trim frame`),dn=L(),dt=y("li"),Be=y("div"),Ct=y("span"),Ct.textContent="Shift",fn=ne("+ "),pe(Ke.$$.fragment),pn=ne(`
            Nudge trim frame by 10`),mn=L(),ft=y("li"),Qe=y("div"),St=y("span"),St.textContent="Ctrl",hn=ne("+ "),pe(Ve.$$.fragment),gn=ne(`
            Extend trim frame`),vn=L(),pt=y("li"),Le=y("div"),Lt=y("span"),Lt.textContent="Shift",_n=ne(" + "),qt=y("span"),qt.textContent="Ctrl",bn=ne(" + "),pe(Ze.$$.fragment),yn=ne(`
            Extend trim frame by 10`),wn=L(),$t=y("li"),$t.innerHTML='<span class="keycap svelte-964x62">D</span> Download full image or trim area.',kn=L(),It=y("li"),It.innerHTML=`<div class="combo svelte-964x62"><span class="keycap svelte-964x62">Shift</span>+ <span class="keycap svelte-964x62">D</span></div>
            Download all quadrants at once.`,xn=L(),Nt=y("li"),Nt.innerHTML='<span class="keycap svelte-964x62">C</span> Copy full image or trim area to clipboard',Mn=L(),Ot=y("li"),Ot.innerHTML='<span class="keycap svelte-964x62">Esc</span> Exit actions or tools',En=L(),Fe=y("p"),Tn=ne("@"),An=ne(e[1]),Hn=L(),mt=y("a"),mt.textContent="Sideways Design",Cn=L(),ht=y("div"),f(t,"class","help-page-overlay svelte-964x62"),f(r,"class","wordmark svelte-964x62"),f(l,"class","svelte-964x62"),f(c,"class","center svelte-964x62"),f(p,"class","icon-group svelte-964x62"),f(g,"class","help-text svelte-964x62"),f(b,"class","icon-group svelte-964x62"),f(w,"class","help-text svelte-964x62"),f(E,"class","icon-group svelte-964x62"),f($,"class","help-text svelte-964x62"),f(H,"class","icon-group svelte-964x62"),f(F,"class","help-text svelte-964x62"),f(P,"class","icon-group svelte-964x62"),f(q,"class","help-text svelte-964x62"),f(ee,"class","icon-group svelte-964x62"),f(te,"class","svelte-964x62"),f(ce,"class","svelte-964x62"),f(ie,"class","help-text svelte-964x62"),f(z,"class","icon-group svelte-964x62"),f(C,"class","help-text svelte-964x62"),f(Ce,"class","svelte-964x62"),f(S,"class","sm-center gap-top svelte-964x62"),f(re,"class","svelte-964x62"),f(ge,"class","svelte-964x62"),f(Tt,"class","svelte-964x62"),f(At,"class","svelte-964x62"),f(Ht,"class","combo svelte-964x62"),f(ut,"class","svelte-964x62"),f(Ct,"class","keycap svelte-964x62"),f(Be,"class","combo svelte-964x62"),f(dt,"class","svelte-964x62"),f(St,"class","keycap svelte-964x62"),f(Qe,"class","combo svelte-964x62"),f(ft,"class","svelte-964x62"),f(Lt,"class","keycap svelte-964x62"),f(qt,"class","keycap svelte-964x62"),f(Le,"class","combo svelte-964x62"),f(pt,"class","svelte-964x62"),f($t,"class","svelte-964x62"),f(It,"class","svelte-964x62"),f(Nt,"class","svelte-964x62"),f(Ot,"class","svelte-964x62"),f(N,"class","nobullets shortcut-list svelte-964x62"),f(X,"class","shortcuts-section svelte-964x62"),f(x,"class","help-text svelte-964x62"),f(u,"class","help-grid svelte-964x62"),f(mt,"href","https://sidewaysdesign.com/"),f(mt,"class","svelte-964x62"),f(Fe,"class","year svelte-964x62"),f(ht,"class","icon-close svelte-964x62"),f(s,"class","help-page-wrapper svelte-964x62")},m(se,Ge){K(se,t,Ge),K(se,i,Ge),K(se,s,Ge),d(s,r),d(s,o),d(s,l),d(s,a),d(s,c),d(s,m),d(s,u),d(u,p),d(u,h),d(u,g),d(u,v),d(u,b),d(u,T),d(u,w),d(u,M),d(u,E),d(u,A),d(u,$),d(u,_),d(u,H),d(u,O),d(u,F),d(u,j),d(u,P),d(u,fe),d(u,q),d(u,me),d(u,ee),d(u,ae),d(u,ie),d(ie,te),d(ie,le),d(ie,ce),d(ce,Ae),d(ce,He),d(ce,ye),d(ce,ze),d(ce,Xe),d(ce,k),d(ce,I),d(u,D),d(u,z),d(u,Z),d(u,C),d(u,Pe),d(u,Ce),d(u,Se),d(u,x),d(x,S),d(x,R),d(x,X),d(X,N),d(N,re),d(N,we),d(N,ge),d(N,Ye),d(N,Tt),d(N,an),d(N,At),d(N,cn),d(N,ut),d(ut,Ht),ue(We,Ht,null),d(ut,un),d(N,dn),d(N,dt),d(dt,Be),d(Be,Ct),d(Be,fn),ue(Ke,Be,null),d(dt,pn),d(N,mn),d(N,ft),d(ft,Qe),d(Qe,St),d(Qe,hn),ue(Ve,Qe,null),d(ft,gn),d(N,vn),d(N,pt),d(pt,Le),d(Le,Lt),d(Le,_n),d(Le,qt),d(Le,bn),ue(Ze,Le,null),d(pt,yn),d(N,wn),d(N,$t),d(N,kn),d(N,It),d(N,xn),d(N,Nt),d(N,Mn),d(N,Ot),d(s,En),d(s,Fe),d(Fe,Tn),d(Fe,An),d(Fe,Hn),d(Fe,mt),d(s,Cn),d(s,ht),$e=!0,Wt||(Sn=[B(t,"click",e[3]),B(t,"keydown",e[2]),B(ht,"keydown",e[2]),B(ht,"click",e[3])],Wt=!0)},p(se,[Ge]){(!$e||Ge&1)&&nt(He,se[0]),(!$e||Ge&1)&&nt(ze,se[0])},i(se){$e||(xe(()=>{$e&&(n||(n=Dt(t,vt,{duration:250},!0)),n.run(1))}),Y(We.$$.fragment,se),Y(Ke.$$.fragment,se),Y(Ve.$$.fragment,se),Y(Ze.$$.fragment,se),xe(()=>{$e&&(qe||(qe=Dt(s,vt,{duration:375},!0)),qe.run(1))}),$e=!0)},o(se){n||(n=Dt(t,vt,{duration:250},!1)),n.run(0),V(We.$$.fragment,se),V(Ke.$$.fragment,se),V(Ve.$$.fragment,se),V(Ze.$$.fragment,se),qe||(qe=Dt(s,vt,{duration:375},!1)),qe.run(0),$e=!1},d(se){se&&W(t),se&&n&&n.end(),se&&W(i),se&&W(s),de(We),de(Ke),de(Ve),de(Ze),se&&qe&&qe.end(),Wt=!1,he(Sn)}}}function ri(e,t,n){let i;U(e,on,l=>n(0,i=l));const s=new Date().getFullYear();Et(()=>document.addEventListener("keydown",r)),nn(()=>document.removeEventListener("keydown",r));function r(l){const c={Escape:o()}[l.key];c&&c(l)}const o=()=>rt.set(!1);return[i,s,r,o]}class oi extends Ee{constructor(t){super(),Me(this,t,ri,li,be,{})}}function Rn(e){let t,n;return t=new oi({}),{c(){pe(t.$$.fragment)},m(i,s){ue(t,i,s),n=!0},i(i){n||(Y(t.$$.fragment,i),n=!0)},o(i){V(t.$$.fragment,i),n=!1},d(i){de(t,i)}}}function ai(e){let t,n,i,s,r,o,l,a,c,m,u,p,h,g,v,b,T,w,M,E,A,$,_=e[3]&&Rn();return{c(){t=y("div"),n=y("div"),i=y("div"),s=L(),r=y("div"),r.innerHTML=`<div class="wordmark svelte-6z8gpt"></div> 
      <p class="byline svelte-6z8gpt"><a href="https://sidewaysdesign.com" target="blank" class="svelte-6z8gpt">by Sideways Design</a></p>`,o=L(),l=y("div"),a=y("div"),a.innerHTML='<span class="tooltip svelte-6z8gpt">Whole</span>',c=L(),m=y("div"),m.innerHTML='<span class="tooltip svelte-6z8gpt">Quadrants</span>',u=L(),p=y("div"),h=y("div"),h.innerHTML='<span class="tooltip svelte-6z8gpt">Exit</span>',g=L(),v=y("div"),v.innerHTML='<span class="tooltip svelte-6z8gpt">Help</span>',b=L(),T=y("div"),w=L(),_&&_.c(),M=Mt(),f(i,"class","mode-control-hide1 svelte-6z8gpt"),f(i,"aria-hidden","true"),f(a,"class","mode-control mode-control-whole svelte-6z8gpt"),f(a,"aria-label","Whole Image"),f(a,"tabindex","-2"),G(a,"active",e[2].mode==="whole"),f(m,"class","mode-control mode-control-quadrant svelte-6z8gpt"),f(m,"aria-label","Quadrant"),f(m,"tabindex","-1"),G(m,"active",e[2].mode==="quadrant"),f(l,"class","mode-control-container svelte-6z8gpt"),f(h,"class","mode-control mode-control-exit svelte-6z8gpt"),f(v,"class","mode-control mode-control-info svelte-6z8gpt"),f(p,"class","mode-control-container svelte-6z8gpt"),f(T,"aria-hidden","true"),f(T,"class","mode-control-hide2 svelte-6z8gpt"),f(n,"class","mode-control-group svelte-6z8gpt"),f(t,"class","mode-control-wrapper svelte-6z8gpt"),G(t,"tucked",e[0]),G(t,"triminprogress",e[1].triminprogress)},m(H,O){K(H,t,O),d(t,n),d(n,i),d(n,s),d(n,r),d(n,o),d(n,l),d(l,a),d(l,c),d(l,m),d(n,u),d(n,p),d(p,h),d(p,g),d(p,v),d(n,b),d(n,T),K(H,w,O),_&&_.m(H,O),K(H,M,O),E=!0,A||($=[B(i,"click",e[7]),B(a,"keydown",e[11]),B(a,"click",e[12]),B(m,"keydown",e[13]),B(m,"click",e[14]),B(h,"keydown",e[10]),B(h,"click",e[9]),B(v,"keydown",e[6]),B(v,"click",e[5]),B(T,"click",e[8])],A=!0)},p(H,[O]){(!E||O&4)&&G(a,"active",H[2].mode==="whole"),(!E||O&4)&&G(m,"active",H[2].mode==="quadrant"),(!E||O&1)&&G(t,"tucked",H[0]),(!E||O&2)&&G(t,"triminprogress",H[1].triminprogress),H[3]?_?O&8&&Y(_,1):(_=Rn(),_.c(),Y(_,1),_.m(M.parentNode,M)):_&&(Oe(),V(_,1,1,()=>{_=null}),De())},i(H){E||(Y(_),E=!0)},o(H){V(_),E=!1},d(H){H&&W(t),H&&W(w),_&&_.d(H),H&&W(M),A=!1,he($)}}}function ci(e,t,n){let i,s,r,o;U(e,at,E=>n(15,i=E)),U(e,J,E=>n(1,s=E)),U(e,_e,E=>n(2,r=E)),U(e,rt,E=>n(3,o=E));let l=!1;const a=E=>{J.update(A=>({...A,cancelTrim:!0})),E==="quadrant"&&(J.update(A=>({...A,index:1})),_e.update(A=>({...A,mode:"quadrant"}))),E==="whole"&&(je.set(!1),J.update(A=>({...A,index:0,expanded:!1})),_e.update(A=>({...A,mode:"whole"})))},c=()=>rt.set(!0),m=E=>{E.key==="?"&&rt.set(!0)},u=()=>{n(0,l=!0)},p=()=>{n(0,l=!1)},h=()=>{v(i.originalUrl,i.width,i.height)};function g(E){E.key==="Escape"&&E.shiftKey&&h()}const v=(E,A,$)=>{document.body.innerHTML=`
    <img style="display: block;-webkit-user-select: none;margin: auto;background-color: hsl(0, 0%, 90%);transition: background-color 300ms;" src="${E}" width="${A}" height="${$}" style="object-fit: contain;">
    `,document.head.innerHTML=`
    <meta name="viewport" content="width=device-width, minimum-scale=0.1">
    <title>${E}</title>
    `,document.body.style.cssText="display:flex; margin: auto 0; background: #0e0e0e; height: 100%;",document.documentElement.style.cssText="height: 100%;"};return[l,s,r,o,a,c,m,u,p,h,g,E=>E.key.toLowerCase()==="m"&&a("whole"),()=>a("whole"),E=>E.key.toLowerCase()==="m"&&a("quadrant"),()=>a("quadrant")]}class ui extends Ee{constructor(t){super(),Me(this,t,ci,ai,be,{})}}const fs=(e,t)=>{Te.set(!1),je.update(n=>!n),t("expandaction")},ps=()=>{en(Te)?J.update(e=>({...e,cancelTrim:!0})):Te.set(!0)},di=(e,t)=>{e===en(J).index&&t("imageaction","download")},fi=(e,t)=>{e===en(J).index&&t("imageaction","clipboard")},pi=()=>{const e=document.activeElement;return e instanceof HTMLElement&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"||e.tagName==="FORM"||e.contentEditable==="true")};function Xn(e,t,n){const i=e.slice();return i[40]=t[n],i}function Yn(e){let t,n,i,s=Math.floor(e[1].x*e[9])+"",r,o,l,a,c=Math.floor(e[1].y*e[9])+"",m,u,p,h,g=Math.floor(e[1].width*e[9])+"",v,b,T,w,M=Math.floor(e[1].height*e[9])+"",E;return{c(){t=y("div"),n=y("p"),i=y("span"),i.textContent="x:",r=ne(s),o=L(),l=y("p"),a=y("span"),a.textContent="y:",m=ne(c),u=L(),p=y("p"),h=y("span"),h.textContent="w:",v=ne(g),b=L(),T=y("p"),w=y("span"),w.textContent="h:",E=ne(M),f(i,"class","svelte-19pxt85"),f(n,"class","svelte-19pxt85"),f(a,"class","svelte-19pxt85"),f(l,"class","svelte-19pxt85"),f(h,"class","svelte-19pxt85"),f(p,"class","svelte-19pxt85"),f(w,"class","svelte-19pxt85"),f(T,"class","svelte-19pxt85"),f(t,"class","trim-stats svelte-19pxt85")},m(A,$){K(A,t,$),d(t,n),d(n,i),d(n,r),d(t,o),d(t,l),d(l,a),d(l,m),d(t,u),d(t,p),d(p,h),d(p,v),d(t,b),d(t,T),d(T,w),d(T,E)},p(A,$){$[0]&2&&s!==(s=Math.floor(A[1].x*A[9])+"")&&nt(r,s),$[0]&2&&c!==(c=Math.floor(A[1].y*A[9])+"")&&nt(m,c),$[0]&2&&g!==(g=Math.floor(A[1].width*A[9])+"")&&nt(v,g),$[0]&2&&M!==(M=Math.floor(A[1].height*A[9])+"")&&nt(E,M)},d(A){A&&W(t)}}}function Wn(e){let t;return{c(){t=ve("rect"),f(t,"class","handle svelte-19pxt85"),f(t,"id",e[40].id),f(t,"x","-100"),f(t,"y","-100"),f(t,"width",Pt),f(t,"height",Pt),is(t,"cursor",e[40].cursor),f(t,"rx",Pt/2),f(t,"ry",Pt/2)},m(n,i){K(n,t,i)},p:Q,d(n){n&&W(t)}}}function mi(e){let t,n,i,s,r,o,l,a,c,m,u,p,h=(e[8]||e[5]||e[7]||e[6])&&Yn(e),g=e[10],v=[];for(let b=0;b<g.length;b+=1)v[b]=Wn(Xn(e,g,b));return{c(){t=y("div"),n=y("div"),h&&h.c(),i=L(),s=ve("svg"),r=ve("defs"),o=ve("rect"),l=ve("clipPath"),a=ve("use"),c=ve("use"),m=ve("use"),u=ve("path"),p=ve("rect");for(let b=0;b<v.length;b+=1)v[b].c();f(n,"class","trim-stats-container svelte-19pxt85"),f(o,"vector-effect","non-scaling-stroke"),f(o,"shape-rendering","geometricPrecision"),f(o,"id","bbox"),f(o,"x","0"),f(o,"y","0"),f(o,"width","0"),f(o,"height","0"),Bt(a,"xlink:href","#bbox"),f(l,"id","insideStrokeOnly"),Bt(c,"xlink:href","#bbox"),f(c,"stroke-width","2px"),f(c,"stroke","white"),f(c,"fill","none"),f(c,"clip-path","url(#insideStrokeOnly)"),Bt(m,"xlink:href","#bbox"),f(m,"stroke-width","2px"),f(m,"stroke-dasharray","2,2"),f(m,"stroke","#777"),f(m,"fill","none"),f(m,"clip-path","url(#insideStrokeOnly)"),f(u,"id",ms),f(u,"fill","#000"),f(u,"d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z"),f(u,"fill-rule","evenodd"),f(u,"opacity","0.5"),f(p,"id",hs),f(p,"x","-100"),f(p,"y","-100"),f(p,"width","0"),f(p,"height","0"),is(p,"cursor","grab"),f(p,"fill","transparent"),f(s,"width","100%"),f(s,"height","100%"),f(s,"class","inactive svelte-19pxt85"),f(t,"class","trim-stage svelte-19pxt85")},m(b,T){K(b,t,T),d(t,n),h&&h.m(n,null),e[14](n),d(t,i),d(t,s),d(s,r),d(r,o),e[15](o),d(r,l),d(l,a),d(s,c),d(s,m),d(s,u),e[16](u),d(s,p);for(let w=0;w<v.length;w+=1)v[w]&&v[w].m(s,null);e[17](s)},p(b,T){if(b[8]||b[5]||b[7]||b[6]?h?h.p(b,T):(h=Yn(b),h.c(),h.m(n,null)):h&&(h.d(1),h=null),T[0]&1024){g=b[10];let w;for(w=0;w<g.length;w+=1){const M=Xn(b,g,w);v[w]?v[w].p(M,T):(v[w]=Wn(M),v[w].c(),v[w].m(s,null))}for(;w<v.length;w+=1)v[w].d(1);v.length=g.length}},i:Q,o:Q,d(b){b&&W(t),h&&h.d(),e[14](null),e[15](null),e[16](null),ss(v,b),e[17](null)}}}const ms="focusOverlay",hs="movehandle",Pt=14;function hi(e,t,n){let i,s;U(e,at,k=>n(26,i=k)),U(e,st,k=>n(1,s=k));let{frameSpecs:r}=t,o,l,a,c,m,u,p=r.width,h=r.height,g=r.x1,v=r.y1,b=r.factor,T=!1,w=!1,M=!1,E,A,$,_,H,O={x:g,y:v,width:p,height:h},F=!1,j,P;const fe=[{id:"top-left",cursor:"nw-resize"},{id:"top-right",cursor:"ne-resize"},{id:"bottom-left",cursor:"sw-resize"},{id:"bottom-right",cursor:"se-resize"},{id:"top-middle",cursor:"ns-resize"},{id:"bottom-middle",cursor:"ns-resize"},{id:"left-middle",cursor:"ew-resize"},{id:"right-middle",cursor:"ew-resize"}];Et(()=>{o.addEventListener("mousedown",q),o.addEventListener("mousemove",me),o.addEventListener("mouseup",ee),fe.forEach(k=>{k.ref=document.querySelector(`svg #${k.id}`)}),u=document.querySelector(`svg #${hs}`),n(2,a=document.querySelector(`svg #${ms}`)),a.addEventListener("click",Ae)});async function q(k){l=o.getBoundingClientRect(),_=l.left,H=l.top,k.target===o?(A=(k.clientX-_)/j,$=(k.clientY-H)/P,n(5,T=!0),o.classList.remove("inactive"),a.setAttribute("d",`M0,0H${l.width}V${l.height}H0Z`)):k.target.classList.contains("handle")?(A=k.clientX-_,$=k.clientY-H,n(6,w=!0),E=k.target,E=k.target,te(!0)):k.target.id==="movehandle"&&(A=k.clientX-_-s.x*j,$=k.clientY-H-s.y*P,n(7,M=!0)),J.update(I=>({...I,triminprogress:!0})),M||window.addEventListener("mousemove",ae)}function me(k){let I,D,z,Z;if(T)I=Math.min(A,(k.clientX-_)/j),D=Math.min($,(k.clientY-H)/P),z=Math.abs(A-(k.clientX-_)/j),Z=Math.abs($-(k.clientY-H)/P);else if(w){const C=s;switch(I=C.x,D=C.y,z=C.width,Z=C.height,E.id){case"top-left":I=Math.min((k.clientX-_)/j,C.x+C.width),D=Math.min((k.clientY-H)/P,C.y+C.height),z=Math.abs(C.x+C.width-I),Z=Math.abs(C.y+C.height-D);break;case"top-right":D=Math.min((k.clientY-H)/P,C.y+C.height),z=Math.abs(k.clientX-_-C.x*j)/j,Z=Math.abs(C.y+C.height-D);break;case"bottom-left":I=Math.min((k.clientX-_)/j,C.x+C.width),z=Math.abs(C.x+C.width-I),Z=Math.abs((k.clientY-H-C.y*P)/P);break;case"bottom-right":z=Math.abs((k.clientX-_-C.x*j)/j),Z=Math.abs((k.clientY-H-C.y*P)/P);break;case"top-middle":D=Math.min((k.clientY-H)/P,C.y+C.height),Z=Math.abs(C.y+C.height-D);break;case"bottom-middle":Z=Math.abs((k.clientY-H-C.y*P)/P);break;case"left-middle":I=Math.min((k.clientX-_)/j,C.x+C.width),z=Math.abs(C.x+C.width-I);break;case"right-middle":z=Math.abs((k.clientX-_-C.x*j)/j);break}te(!0)}else M&&(I=Math.min(Math.max(0,(k.clientX-_-A)/j),p-s.width),D=Math.min(Math.max(0,(k.clientY-H-$)/P),h-s.height),z=s.width,Z=s.height);(T||w||M)&&(ce(I*j,D*P,z*j,Z*P),le(I*j,D*P,z*j,Z*P),st.update(C=>({...C,x:I,y:D,width:z,height:Z})))}function ee(){M||window.removeEventListener("mousemove",ae),n(5,T=!1),n(6,w=!1),n(7,M=!1),n(8,F=!!(s.width&&s.height)),F&&J.update(k=>({...k,...O})),J.update(k=>({...k,isDefined:F,triminprogress:!1})),te(!1)}const ae=k=>{if(l=o.getBoundingClientRect(),k.buttons===1){let I=k.clientX<l.left?-1:k.clientX>l.right?1:0,D=k.clientY<l.top?-1:k.clientY>l.bottom?1:0;(I||D)&&(ie(I,D),ee())}},ie=(k,I)=>{let{x:D,y:z,width:Z,height:C}=s,Pe=D,Ce=z,Se=Z,x=C;k>0&&(Se=i.width-D),k<0&&(Pe=0,Se=D+Z),I>0&&(x=i.height-z),I<0&&(Ce=0,x=z+C),st.update(S=>({...S,x:Pe,y:Ce,width:Se,height:x,update:!0}))};function te(k){fe.forEach(I=>{I.ref&&I.ref.classList.remove("active")}),k&&E.classList.add("active")}function le(k,I,D,z){n(3,c.style.left=`${k+D/2}px`,c),n(3,c.style.top=`${I+z/2}px`,c)}function ce(k,I,D,z){m.setAttribute("x",k),m.setAttribute("y",I),m.setAttribute("width",D),m.setAttribute("height",z),u.setAttribute("x",k),u.setAttribute("y",I),u.setAttribute("width",D),u.setAttribute("height",z),fe.forEach(Z=>{const C=Z.ref;switch(Z.id){case"top-left":C.setAttribute("x",k),C.setAttribute("y",I);break;case"top-right":C.setAttribute("x",k+D),C.setAttribute("y",I);break;case"bottom-left":C.setAttribute("x",k),C.setAttribute("y",I+z);break;case"bottom-right":C.setAttribute("x",k+D),C.setAttribute("y",I+z);break;case"top-middle":C.setAttribute("x",k+D/2),C.setAttribute("y",I);break;case"bottom-middle":C.setAttribute("x",k+D/2),C.setAttribute("y",I+z);break;case"left-middle":C.setAttribute("x",k),C.setAttribute("y",I+z/2);break;case"right-middle":C.setAttribute("x",k+D),C.setAttribute("y",I+z/2);break}}),a.setAttribute("d",`M0,0H${l.width}V${l.height}H0ZM${k},${I}H${k+D}V${I+z}H${k}Z`)}function Ae(){n(8,F=!1),J.update(k=>({...k,isDefined:!1,cancelTrim:!0})),ce(-100,-100,0,0),fe.forEach(k=>{k.ref.setAttribute("x",-100),k.ref.setAttribute("y",-100)}),a.setAttribute("d","M-100,-100H0V0H-100ZM-100,-100H0V0H-100Z")}function He(k){Ie[k?"unshift":"push"](()=>{c=k,n(3,c)})}function ye(k){Ie[k?"unshift":"push"](()=>{m=k,n(4,m)})}function ze(k){Ie[k?"unshift":"push"](()=>{a=k,n(2,a)})}function Xe(k){Ie[k?"unshift":"push"](()=>{o=k,n(0,o)})}return e.$$set=k=>{"frameSpecs"in k&&n(11,r=k.frameSpecs)},e.$$.update=()=>{if(e.$$.dirty[0]&1&&(n(12,j=o?o.clientWidth/p:1),n(13,P=o?o.clientHeight/h:1)),e.$$.dirty[0]&3&&o&&(O={x:Math.floor(s.x*b+g),y:Math.floor(s.y*b+v),width:Math.floor(s.width*b),height:Math.floor(s.height*b)}),e.$$.dirty[0]&12290&&s.update){let{x:k,y:I,width:D,height:z}=s;st.update(Z=>({...Z,update:!1})),le(k*j,I*P,D*j,z*P),ce(k*j,I*P,D*j,z*P),J.update(Z=>({...Z,x:k*b+g,y:I*b+v,width:D*b,height:z*b}))}},[o,s,a,c,m,T,w,M,F,b,fe,r,j,P,He,ye,ze,Xe]}class gi extends Ee{constructor(t){super(),Me(this,t,hi,mi,be,{frameSpecs:11},null,[-1,-1])}}function Bn(e){let t,n,i;return n=new gi({props:{frameSpecs:e[1]}}),{c(){t=y("div"),pe(n.$$.fragment),f(t,"class","trim-action svelte-639nhp")},m(s,r){K(s,t,r),ue(n,t,null),i=!0},p(s,r){const o={};r&2&&(o.frameSpecs=s[1]),n.$set(o)},i(s){i||(Y(n.$$.fragment,s),i=!0)},o(s){V(n.$$.fragment,s),i=!1},d(s){s&&W(t),de(n)}}}function Kn(e){let t,n,i,s;return{c(){t=y("button"),f(t,"tabindex","0"),f(t,"class",n=Ne(`isolate-control ${e[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-639nhp")},m(r,o){K(r,t,o),i||(s=B(t,"click",e[20]),i=!0)},p(r,o){o&256&&n!==(n=Ne(`isolate-control ${r[8]?"icon-trimactive":"icon-triminactive"}`)+" svelte-639nhp")&&f(t,"class",n)},d(r){r&&W(t),i=!1,s()}}}function Qn(e){let t,n,i,s;return{c(){t=y("button"),f(t,"tabindex","0"),f(t,"class",n=Ne(`isolate-control ${e[9]&&e[6]?"icon-shrink":"icon-expand"}`)+" svelte-639nhp")},m(r,o){K(r,t,o),i||(s=B(t,"click",e[21]),i=!0)},p(r,o){o&576&&n!==(n=Ne(`isolate-control ${r[9]&&r[6]?"icon-shrink":"icon-expand"}`)+" svelte-639nhp")&&f(t,"class",n)},d(r){r&&W(t),i=!1,s()}}}function vi(e){let t,n,i,s,r,o,l,a,c,m,u,p,h,g,v,b,T,w=e[8]&&e[6]&&Bn(e),M=(e[7]!=="quadrant"||e[9])&&Kn(e),E=e[7]==="quadrant"&&Qn(e);return{c(){t=y("div"),w&&w.c(),n=L(),i=y("div"),s=y("div"),r=y("div"),o=y("div"),l=ne(e[5]),a=L(),c=y("button"),m=L(),u=y("button"),p=L(),h=y("div"),M&&M.c(),g=L(),E&&E.c(),f(o,"class","filename-text svelte-639nhp"),f(o,"tabindex","-1"),f(o,"contenteditable",""),e[5]===void 0&&xe(()=>e[17].call(o)),G(o,"editing",e[4]),f(c,"class","icon-download svelte-639nhp"),f(r,"class","filename-area svelte-639nhp"),f(r,"data-index",e[0]),f(u,"class","icon-clipboard svelte-639nhp"),f(s,"class","controls-wrapper svelte-639nhp"),f(h,"class","isolate-controls svelte-639nhp"),f(i,"class","image-action svelte-639nhp"),f(t,"class","svelte-639nhp"),G(t,"triminprogress",e[3].triminprogress)},m(A,$){K(A,t,$),w&&w.m(t,null),d(t,n),d(t,i),d(i,s),d(s,r),d(r,o),d(o,l),e[16](o),e[5]!==void 0&&(o.textContent=e[5]),d(r,a),d(r,c),d(s,m),d(s,u),d(i,p),d(i,h),M&&M.m(h,null),d(h,g),E&&E.m(h,null),v=!0,b||(T=[B(o,"blur",e[12]),B(o,"input",e[17]),B(o,"click",ws(e[11])),B(o,"keydown",e[14]),B(c,"click",e[18]),B(u,"click",e[19]),B(t,"blur",e[13])],b=!0)},p(A,[$]){A[8]&&A[6]?w?(w.p(A,$),$&320&&Y(w,1)):(w=Bn(A),w.c(),Y(w,1),w.m(t,n)):w&&(Oe(),V(w,1,1,()=>{w=null}),De()),(!v||$&32)&&xs(l,A[5]),$&32&&A[5]!==o.textContent&&(o.textContent=A[5]),(!v||$&16)&&G(o,"editing",A[4]),(!v||$&1)&&f(r,"data-index",A[0]),A[7]!=="quadrant"||A[9]?M?M.p(A,$):(M=Kn(A),M.c(),M.m(h,g)):M&&(M.d(1),M=null),A[7]==="quadrant"?E?E.p(A,$):(E=Qn(A),E.c(),E.m(h,null)):E&&(E.d(1),E=null),(!v||$&8)&&G(t,"triminprogress",A[3].triminprogress)},i(A){v||(Y(w),v=!0)},o(A){V(w),v=!1},d(A){A&&W(t),w&&w.d(),e[16](null),M&&M.d(),E&&E.d(),b=!1,he(T)}}}function _i(e,t,n){let i,s,r,o,l,a,c,m,u;U(e,on,q=>n(23,r=q)),U(e,ot,q=>n(24,o=q)),U(e,J,q=>n(3,l=q)),U(e,_e,q=>n(15,a=q)),U(e,Ut,q=>n(4,c=q)),U(e,Te,q=>n(8,m=q)),U(e,je,q=>n(9,u=q));let{index:p}=t,{frameSpecs:h}=t,g,v;const b=sn(),T=()=>{v=o[p],si.set(g),Ut.set(!0)},w=()=>{let q=g.innerText;if(!q||q.length===0){n(5,M=v.trim());return}A(q),Ut.set(!1),g.blur()};let M=o[p];const E=q=>{Te.set(!1),je.set(!1)},A=q=>{let ee=o.slice();if(p===0){let ae=Array.from({length:4},(ie,te)=>`${o[0]}${r}${te+1}`);ee[p]=q,ee.forEach((ie,te)=>{if(te>0){let le=ae[te-1];le&&(ie===le||ie===q)&&(ee[te]=`${q}${r}${te}`)}})}else ee[p]=q;ot.set(ee)},$=q=>{},_=q=>{q.key==="Enter"&&g.blur(),q.key==="Escape"&&(n(2,g.innerText=v,g),g.blur())};function H(q){Ie[q?"unshift":"push"](()=>{g=q,n(2,g)})}function O(){M=this.textContent,n(5,M)}const F=()=>di(p,b),j=()=>fi(p,b),P=()=>ps(),fe=()=>fs(p,b);return e.$$set=q=>{"index"in q&&n(0,p=q.index),"frameSpecs"in q&&n(1,h=q.frameSpecs)},e.$$.update=()=>{e.$$.dirty&20&&c&&Ls().then(()=>$()),e.$$.dirty&8&&l.cancelTrim&&(Te.set(!1),J.update(q=>({...q,cancelTrim:!1,isDefined:!1,triminprogress:!1}))),e.$$.dirty&32768&&n(7,i=a.mode),e.$$.dirty&9&&n(6,s=l.index===p)},[p,h,g,l,c,M,s,i,m,u,b,T,w,E,_,a,H,O,F,j,P,fe]}class gs extends Ee{constructor(t){super(),Me(this,t,_i,vi,be,{index:0,frameSpecs:1})}}function bi(e,t,n){let i,s,r,o,l,a,c,m;U(e,rt,_=>n(2,s=_)),U(e,at,_=>n(3,r=_)),U(e,st,_=>n(4,o=_)),U(e,je,_=>n(5,_)),U(e,Te,_=>n(6,l=_)),U(e,Ut,_=>n(7,a=_)),U(e,_e,_=>n(8,c=_)),U(e,ot,_=>n(9,_)),U(e,J,_=>n(0,m=_));const u=sn(),p=_=>{c.mode!=="quadrant"&&(J.update(H=>({...H,index:_,cancelTrim:!0})),_e.update(H=>({...H,mode:"quadrant"}))),u("switchquadrant",{index:_})},h=()=>{J.update(_=>({..._,cancelTrim:!0})),c.mode==="whole"?g():v()},g=()=>{_e.update(_=>({..._,mode:"quadrant"})),J.update(_=>({..._,index:1,isDefined:!1}))},v=()=>{Te.set(!1),_e.update(_=>({..._,mode:"whole"})),J.update(_=>({..._,index:0,expanded:!1,isDefined:!1,triminprogress:!1})),je.set(!1)},b=_=>{u("copytoclipboard",{index:i})},T=_=>{u("downloadfile",{index:i})},w=_=>{a||l||u("downloadall")},M=()=>{const _=document.activeElement;if(_&&_ instanceof HTMLElement){_.blur(),event.preventDefault();return}},E=(_,H,O)=>{let{x:F,y:j,width:P,height:fe}=o,q=O.shiftKey?10:1,me=O.ctrlKey?q:0,ee=F+_*(_<0?2:1)*q-me*_,ae=j+H*(H<0?2:1)*q-me*H,ie=P+me*Math.abs(_),te=fe+me*Math.abs(H);ee<0&&(ee=0,ie=F+P),ae<0&&(ae=0,te=j+fe),ee+ie>r.width&&(me>0?ie=r.width-ee:ee=r.width-ie),ae+te>r.height&&(me>0?te=r.height-ae:ae=r.height-te),st.update(le=>({...le,x:ee,y:ae,width:ie,height:te,update:!0}))},A=()=>{rt.set(!s)},$=_=>{if(_.metaKey||_.altKey||pi())return;const O={1:()=>p(1),2:()=>p(2),3:()=>p(3),4:()=>p(4),c:()=>b(),t:()=>ps(),f:()=>fs(i,u),D:()=>w(),d:()=>T(),m:()=>h(),"?":()=>A(),ArrowLeft:F=>E(-1,0,F),ArrowUp:F=>E(0,-1,F),ArrowRight:F=>E(1,0,F),ArrowDown:F=>E(0,1,F),Escape:()=>{M(),J.update(F=>({...F,cancelTrim:!0}))}}[_.key];O&&(_.preventDefault(),O(_))};return Et(()=>document.addEventListener("keydown",$)),nn(()=>document.removeEventListener("keydown",$)),e.$$.update=()=>{e.$$.dirty&1&&(i=m.index),e.$$.dirty&1&&m.cancelTrim&&(Te.set(!1),J.update(_=>({..._,cancelTrim:!1,isDefined:!1,triminprogress:!1})))},[m]}class yi extends Ee{constructor(t){super(),Me(this,t,bi,null,be,{})}}function Vn(e,t,n){const i=e.slice();return i[10]=t[n],i}function wi(e){let t;return{c(){t=y("div"),t.innerHTML="<p>Error loading image dimensions.</p>"},m(n,i){K(n,t,i)},p:Q,i:Q,o:Q,d(n){n&&W(t)}}}function ki(e){let t,n,i,s,r,o,l;const a=[Ei,Mi],c=[];function m(u,p){return u[9]==="quadrant"?0:1}return s=m(e),r=c[s]=a[s](e),{c(){t=y("div"),n=y("div"),i=y("div"),r.c(),f(i,"class","image-tracker svelte-rtgkln"),G(i,"expanded",e[6]),G(i,"quadrants",e[9]==="quadrant"),f(n,"class","image-shim svelte-rtgkln"),f(n,"style",o=`${e[7]}`),G(n,"quadrant-padding",e[9]==="quadrant"),f(t,"class","image-base")},m(u,p){K(u,t,p),d(t,n),d(n,i),c[s].m(i,null),l=!0},p(u,p){let h=s;s=m(u),s===h?c[s].p(u,p):(Oe(),V(c[h],1,1,()=>{c[h]=null}),De(),r=c[s],r?r.p(u,p):(r=c[s]=a[s](u),r.c()),Y(r,1),r.m(i,null)),(!l||p[0]&64)&&G(i,"expanded",u[6]),(!l||p[0]&512)&&G(i,"quadrants",u[9]==="quadrant"),(!l||p[0]&128&&o!==(o=`${u[7]}`))&&f(n,"style",o),(!l||p[0]&512)&&G(n,"quadrant-padding",u[9]==="quadrant")},i(u){l||(Y(r),l=!0)},o(u){V(r),l=!1},d(u){u&&W(t),c[s].d()}}}function xi(e){let t;return{c(){t=y("div"),t.innerHTML='<div class="spinner svelte-rtgkln">Loading...</div>',f(t,"class","spinner-container svelte-rtgkln")},m(n,i){K(n,t,i)},p:Q,i:Q,o:Q,d(n){n&&W(t)}}}function Mi(e){let t,n,i,s,r,o;return n=new gs({props:{index:e[10],frameSpecs:e[8]}}),n.$on("imageaction",e[30]),{c(){t=y("div"),pe(n.$$.fragment),f(t,"class","whole active svelte-rtgkln"),f(t,"style",i=`background-image:url(${e[1]});${e[7]}`)},m(l,a){K(l,t,a),ue(n,t,null),s=!0,r||(o=B(t,"mouseenter",e[31]),r=!0)},p(l,a){const c={};a[0]&1024&&(c.index=l[10]),a[0]&256&&(c.frameSpecs=l[8]),n.$set(c),(!s||a[0]&130&&i!==(i=`background-image:url(${l[1]});${l[7]}`))&&f(t,"style",i)},i(l){s||(Y(n.$$.fragment,l),s=!0)},o(l){V(n.$$.fragment,l),s=!1},d(l){l&&W(t),de(n),r=!1,o()}}}function Ei(e){let t,n,i=[1,2,3,4],s=[];for(let o=0;o<4;o+=1)s[o]=Zn(Vn(e,i,o));const r=o=>V(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<4;o+=1)s[o].c();t=Mt()},m(o,l){for(let a=0;a<4;a+=1)s[a]&&s[a].m(o,l);K(o,t,l),n=!0},p(o,l){if(l[0]&129955){i=[1,2,3,4];let a;for(a=0;a<4;a+=1){const c=Vn(o,i,a);s[a]?(s[a].p(c,l),Y(s[a],1)):(s[a]=Zn(c),s[a].c(),Y(s[a],1),s[a].m(t.parentNode,t))}for(Oe(),a=4;a<4;a+=1)r(a);De()}},i(o){if(!n){for(let l=0;l<4;l+=1)Y(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<4;l+=1)V(s[l]);n=!1},d(o){ss(s,o),o&&W(t)}}}function Zn(e){let t,n,i,s,r,o,l,a,c,m;s=new gs({props:{index:e[10],frameSpecs:{...e[8],...e[14](e[10]),factor:.5}}}),s.$on("expandaction",e[27]),s.$on("imageaction",e[28]);function u(){return e[29](e[10])}return{c(){t=y("div"),n=y("div"),i=L(),pe(s.$$.fragment),r=L(),f(t,"style",o=`background-image:url(${e[1]});${e[7]}`),f(t,"class",l=Ne(`${e[9]} quadrant-${e[10]}`)+" svelte-rtgkln"),G(t,"active",e[0]===e[10])},m(p,h){K(p,t,h),d(t,n),e[26](n),d(t,i),ue(s,t,null),d(t,r),a=!0,c||(m=[B(t,"mouseenter",u),B(t,"transitionstart",e[11]),B(t,"transitionend",e[12])],c=!0)},p(p,h){e=p;const g={};h[0]&256&&(g.frameSpecs={...e[8],...e[14](e[10]),factor:.5}),s.$set(g),(!a||h[0]&130&&o!==(o=`background-image:url(${e[1]});${e[7]}`))&&f(t,"style",o),(!a||h[0]&512&&l!==(l=Ne(`${e[9]} quadrant-${e[10]}`)+" svelte-rtgkln"))&&f(t,"class",l),(!a||h[0]&513)&&G(t,"active",e[0]===e[10])},i(p){a||(Y(s.$$.fragment,p),a=!0)},o(p){V(s.$$.fragment,p),a=!1},d(p){p&&W(t),e[26](null),de(s),c=!1,he(m)}}}function Ti(e){let t,n,i,s,r,o;t=new yi({}),t.$on("downloadfile",e[20]),t.$on("downloadall",e[21]),t.$on("copytoclipboard",e[19]),t.$on("switchquadrant",e[18]),t.$on("expandaction",e[25]);const l=[xi,ki,wi],a=[];function c(m,u){return m[2]?0:m[3]&&m[4]?1:2}return i=c(e),s=a[i]=l[i](e),{c(){pe(t.$$.fragment),n=L(),s.c(),r=Mt()},m(m,u){ue(t,m,u),K(m,n,u),a[i].m(m,u),K(m,r,u),o=!0},p(m,u){let p=i;i=c(m),i===p?a[i].p(m,u):(Oe(),V(a[p],1,1,()=>{a[p]=null}),De(),s=a[i],s?s.p(m,u):(s=a[i]=l[i](m),s.c()),Y(s,1),s.m(r.parentNode,r))},i(m){o||(Y(t.$$.fragment,m),Y(s),o=!0)},o(m){V(t.$$.fragment,m),V(s),o=!1},d(m){de(t,m),m&&W(n),a[i].d(m),m&&W(r)}}}function Ai(e,t,n){let i,s,r,o,l,a,c,m,u;U(e,Vt,x=>n(34,o=x)),U(e,J,x=>n(22,l=x)),U(e,ot,x=>n(35,a=x)),U(e,jn,x=>n(36,c=x)),U(e,_e,x=>n(23,m=x)),U(e,at,x=>n(24,u=x));let{imageUrl:p}=t,{currentIndex:h}=t,g=!0,v,b,T,w,M=!1,E="",A;Et(async()=>{const x=await O(p);at.update(S=>({...S,width:x.width,height:x.height})),n(8,A={width:x.width,height:x.height,x1:0,y1:0,factor:1}),n(3,v=x.width),n(4,b=x.height),T=x.canvas,n(7,E=j(v,b))}),Ss(()=>{T&&w&&s==="whole"&&w.appendChild(T)});const $=x=>{x.target===x.currentTarget&&Vt.set(!0)},_=x=>{x.target===x.currentTarget&&(Vt.set(!1),c&&c!==h&&ye(c))},H=async x=>{const S=new Image;return S.crossOrigin="anonymous",S.src=x,await S.decode(),S},O=async x=>{n(2,g=!0);let S,R,X;try{const N=performance.now(),re=await H(x),ge=((performance.now()-N)/1e3).toFixed(2);return S=re.width,R=re.height,X=P(re,0,0,S,R),{width:S,height:R,canvas:X}}catch(N){console.error("Error getting image dimensions:",N)}finally{n(2,g=!1)}},F=sn(),j=(x,S)=>{const R=(we,ge)=>ge===0?we:R(ge,we%ge),X=R(x,S),N=x/X,re=S/X;return`aspect-ratio: ${N} / ${re};`},P=(x,S,R,X,N)=>{const re=document.createElement("canvas"),we=re.getContext("2d");return re.width=X,re.height=N,we.drawImage(x,0,0,X,N),re},fe=(x,S,R)=>{let X,N;switch(x){case 1:X=0,N=0;break;case 2:X=S,N=0;break;case 3:X=0,N=R;break;case 4:X=S,N=R;break;default:X=0,N=0}return{sx:X,sy:N}},q=(x="download",S)=>{const R=parseInt(S)===0?v:v/2,X=parseInt(S)===0?b:b/2,N=document.createElement("canvas"),re=N.getContext("2d");N.width=R,N.height=X;let{sx:we,sy:ge}=fe(S,R,X);re.drawImage(T,we,ge,R,X,0,0,R,X);const Ye=N.toDataURL("image/png");switch(x){case"download":ee(Ye,a[S],i),F("toastNotice",`Quadrant ${S} downloading.`);break;case"clipboard":ie(Ye);break;case"background":return Ye;default:console.error('Invalid action specified. Please use a valid action such as "download", "clipboard", or "background".');break}},me=(x,S,R)=>{const X=x.toDataURL(`image/${R}`,.95);ee(X,S,R)},ee=(x,S,R)=>{const X=document.createElement("a");X.href=x,X.download=`${S}${R}`,X.click()},ae=x=>{x.toBlob(S=>{const R=new ClipboardItem({"image/png":S});return navigator.clipboard.write([R])})},ie=x=>{fetch(x).then(S=>S.blob()).then(S=>{const R=new ClipboardItem({"image/png":S});return F("toastNotice",`Quadrant ${h} copied to clipboard.`),navigator.clipboard.write([R])}).then(()=>{console.log("Quadrant of image copied to clipboard successfully.")}).catch(S=>{console.error("Failed to copy quadrant of image to clipboard:",S)})},te=(x,S)=>{const R=document.createElement("canvas"),X=R.getContext("2d");return R.width=S.width,R.height=S.height,X.drawImage(x,S.x,S.y,S.width,S.height,0,0,S.width,S.height),R},le=x=>{if(x==="downloadall"){[4,3,2,1].forEach(S=>q("download",S));return}if(s==="quadrant"&&!l.isDefined)q(x,l.index);else{const S=l.isDefined?te(T,l):T;x==="download"?(me(S,a[h],i),F("toastNotice",l.isDefined?"Trim area downloading.":"Full image downloading.")):x==="clipboard"&&(ae(S),F("toastNotice",l.isDefined?"Trim area copied to clipboard":"Full image copied to clipboard."))}},ce=x=>{const S=parseInt(x)===1||parseInt(x)===3?0:v/2,R=parseInt(x)===1||parseInt(x)===2?0:b/2;return{x1:S,y1:R}},Ae=()=>{J.update(x=>({...x,expanded:!x.expanded}))},He=x=>{o?jn.set(x):ye(x)},ye=x=>{M||(n(0,h=x),J.update(S=>({...S,index:x})))},ze=x=>ye(x.detail.index),Xe=x=>le("clipboard"),k=x=>le("download"),I=x=>le("downloadall"),D=()=>Ae();function z(x){Ie[x?"unshift":"push"](()=>{w=x,n(5,w)})}const Z=()=>Ae(),C=x=>le(x.detail),Pe=x=>He(x),Ce=x=>le(x.detail),Se=()=>ye(r);return e.$$set=x=>{"imageUrl"in x&&n(1,p=x.imageUrl),"currentIndex"in x&&n(0,h=x.currentIndex)},e.$$.update=()=>{e.$$.dirty[0]&16777216&&(i=u.extension),e.$$.dirty[0]&8388608&&n(9,s=m.mode),e.$$.dirty[0]&4194304&&n(10,r=l.index),e.$$.dirty[0]&4194304&&n(6,M=l.expanded)},[h,p,g,v,b,w,M,E,A,s,r,$,_,le,ce,Ae,He,ye,ze,Xe,k,I,l,m,u,D,z,Z,C,Pe,Ce,Se]}class Hi extends Ee{constructor(t){super(),Me(this,t,Ai,Ti,be,{imageUrl:1,currentIndex:0},null,[-1,-1])}}function Ci(e){let t,n,i,s,r,o,l,a,c;return s=new Hi({props:{imageUrl:e[0],currentIndex:e[3]}}),s.$on("toastNotice",e[2]),o=new ui({}),a=new ni({}),{c(){t=y("main"),n=y("div"),i=y("div"),pe(s.$$.fragment),r=L(),pe(o.$$.fragment),l=L(),pe(a.$$.fragment),f(i,"class","image-stage svelte-1wix96r"),G(i,"fullscreen",e[1]),f(n,"class","image-wrapper svelte-1wix96r")},m(m,u){K(m,t,u),d(t,n),d(n,i),ue(s,i,null),d(t,r),ue(o,t,null),K(m,l,u),ue(a,m,u),c=!0},p(m,[u]){const p={};u&1&&(p.imageUrl=m[0]),s.$set(p),(!c||u&2)&&G(i,"fullscreen",m[1])},i(m){c||(Y(s.$$.fragment,m),Y(o.$$.fragment,m),Y(a.$$.fragment,m),c=!0)},o(m){V(s.$$.fragment,m),V(o.$$.fragment,m),V(a.$$.fragment,m),c=!1},d(m){m&&W(t),de(s),de(o),m&&W(l),de(a,m)}}}function Si(e,t,n){let i,s,r,o;U(e,ot,M=>n(6,i=M)),U(e,on,M=>n(7,s=M)),U(e,_e,M=>n(8,r=M)),U(e,je,M=>n(1,o=M));let l,a;const c=window.location.search;c&&(a=new URLSearchParams(c)),l=(a==null?void 0:a.get("image"))||"https://picsum.photos/1024/1024";const m={duration:1500,intro:{x:256}},u=M=>Xt.push(M.detail,m),p=M=>{const[E,A]=M.split("?"),$=E.split("/").pop(),[_,H,O]=$.match(/(.+)(\.\w+)$/)??[];return{rootname:H??$,imageExtension:O??"",parameters:A??""}},{rootname:h,imageExtension:g,parameters:v}=p(l);at.update(M=>({...M,originalUrl:l,url:`${h}.${g}`,extension:g}));let{mode:b}=r,T={currentMode:b,currentName:h,currentIndex:b==="quadrant"?1:0,filenames:[h,...Array.from([1,2,3,4],(M,E)=>`${h}${s}${E+1}`)]};_s(ot,i=T.filenames,i);let w=T.currentIndex;return T.currentIndex=w,[l,o,u,w]}class Li extends Ee{constructor(t){super(),Me(this,t,Si,Ci,be,{})}}new Li({target:document.getElementById("app")});
